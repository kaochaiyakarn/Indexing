pathchar estimate internet link characteristics allen downey colby college downey colby edu appear acm sigcomm evaluate pathchar tool infers characteristics links internet path latency bandwidth queue delays 
looking example paths identify circumstances pathchar succeed develop techniques improve accuracy pathchar estimates reduce time takes generate 
successful techniques form adaptive data collection reduces number measurements pathchar needs links 
pathchar new tool written van jacobson lawrence berkeley laboratory lbl tries infer characteristics individual links internet path measuring round trip time packets sent single host 
alpha version pathchar available freebsd linux osf solaris ftp ftp ee lbl gov pathchar 
explain basic mechanism evaluate accuracy paths link characteristics known 
observations propose techniques improve accuracy pathchar reduce number measurements time takes generate estimates 
contributions ffl evaluation pathchar insight expected useful 
ffl technique generating intervals estimates pathchar generates 
intervals contain nominal correct values size conveys useful information accuracy estimates 
ffl technique determining dynamically number measurements needed achieve interval size 
fe fe node node network model 
methodology pathchar verbose option collected measurements paths rocky colby edu campus colby college maine emerald mint net rocky mach sdsc edu san diego supercomputer center 
refer mint sdsc datasets 
pathchar documentation wrote program processes datasets generates estimates link characteristics 
software allows test alternatives extensions pathchar techniques data 
example paths links comprise intended statistical sample internet cf 
paxson empirical studies :10.1.1.125.8274
structure paths probably typical fast local network connected comparatively slow link internet proper connected destination site lan 
expect experiences applicable large class potential pathchar users 
background van jacobson pathchar mathematical sciences research institute msri april 
description slides 
traceroute pathchar takes advantage live field ttl ip packet 
ttl determines links packet traverse expires 
router receives packet expired drops packet sends icmp error packet back sender 
source address error packet indicates router outgoing packet reached expiring 
setting ttl survey network measurement tools including traceroute see cooperative association internet data analysis caida web page www caida org tools scatterplot round trip times times log scale ms packet size scatterplot round trip times versus packet size sizes probes 
vertical axis log scale lower envelope appears convex nearly straight line 
value possible find address nth router path 
pathchar works sending series probes varying values varying packet sizes 
probe measures time error packet received 
performing statistical analysis measurements pathchar infers latency bandwidth link path distribution queue times probability packet dropped 
analysis network model 
packet leaves gamma th node waits queue get outgoing link 
time spends network transit time linear function packet size parameters latency bandwidth lat size bw 
node packet waits queue router processes generates error packet 
error packet waits queue node returns node gamma transit time lat error size bw error size size icmp error packet bytes 
waits queue node gamma 
round trip time rtt gamma th nth node back rtt lat packet size bw forward lat error size bw values random variables representing queue times forward time takes forwarding engine process packet 
simplify expression pathchar assumptions size error packet small error size bw negligible forward time negligible large number measurements path eventually probes round trip negligible queue delays 
eliminating negligible terms yields rtt lat packet size bw lat shortest observed round trip time ms packet size shortest observed round trip time versus packet size 
line shows linear squares fit data 
equation basis analysis pathchar uses estimate link characteristics 
statistical analysis section uses sample data set demonstrate analysis pathchar performs 
terms refer various data structures 
probe single measurement rtt packet size number hops 
sample set probes packet size 
link set samples pertaining link spanning range packet sizes 
path set links pertaining path order origin destination 
sample link path written upper case letters indicate refer data structure avoid confusion common 
minimum filtering shows scatterplot probes different sizes bytes taken th link sdsc dataset 
point represents single probe column represents sample graph represents link 
sample pathchar uses shortest observed rtt estimate minimum possible rtt 
phrase shortest observed rtt frequently abbreviate 
column data points near minimum suggesting packets reasonable chance traversing path delay 
observation implies pathchar find minimum rtt small number probes packet size 
shortest observed rtt links sdsc dataset ms packet size shortest observed round trip times links sdsc dataset 
column plotted form straight line accordance parameter model transit times equation 
curve fitting data fall close line easy estimate parameters squares fit 
interpretations cumulative parameters ffl latency node nth node back ffl marginal cost sending additional byte outgoing path 
shows links sdsc dataset 
line labeled line shown 
case data fit straight line 
differencing nice thing cumulative parameters add parameters path sum parameters links 
estimated cumulative parameters pathchar finds link parameters subtraction 
example find latency th link subtract intercepts line line ms gamma ms ms 
equation difference equal twice latency estimated link latency ms find bandwidth subtract slopes gamma 
equation difference inverse bandwidth estimated link bandwidth mb deconvolution assume column minimum possible rtt additional time probes spend due queueing nondeterministic delays 
distribution queue delays fraction probes delay ms distributions cumulative queue delays sdsc dataset 
pathchar fits line calculates minimum possible rtt packet size subtracts probe 
aggregating excess times pathchar estimates distribution total queue delay path nth node back 
shows distributions empirical cumulative distribution functions sdsc dataset 
vertical gray line ms distributions cross line indicates probability observing rtt ms minimum 
length path grows probability drops quickly 
probability relevant indicates probes necessary see rtt near minimum 
distributions cumulative cumulative parameters add simple way 
distribution convolution distributions prior links 
section address problem 
accuracy pathchar techniques estimated characteristics links sample path table 
chose links provide examples pathchar successes failures avoiding complications subsequent links 
address complications section 
links mb ethernets colby campus 
case pathchar estimate nominal value 
link connects colby rest world 
estimated bandwidth mb reasonably close nominal bandwidth mb surprising accurate generally easy measure bandwidth slow link 
link core mci representative oc nominal bandwidth mb oc links implemented distinct oc bitstreams mb packet sent pipes round robin fashion 
link host address latency bandwidth nominal est 
est 
mb bandwidth hub colby edu routing colby edu network colby edu general colby edu routing colby edu cht mci net ms core mci net ms theta sprint nap mci net ms table estimated latencies bandwidths links sdsc path nominal bandwidths reported network service provider 
pathchar point view impossible distinguish oc oc oc 
pathchar estimate bandwidth oc case accurate high 
link ds number parallel pipes ds ds 
case packet broken parallel bitstreams bandwidth experienced single packet nominal bandwith link mb estimate accurate low 
noise examples demonstrate fundamental difficulty pathchar higher bandwidth harder measure 
estimated bandwidth slope rtt curve captures difference rtt largest smallest packets 
higher bandwidth smaller difference 
looking th th hops see difference rtt largest smallest packets small compared noise data 
estimated slopes lines difference meaning difference rtt smallest largest packets comparison largest outlier fitted line 
problem compounded need subtract adjacent estimates 
general calculated difference estimated values accurate values 
result accuracy estimated slopes needs considerably better accuracy required estimated bandwidths 
matters worse minimum filtering amplifies measurement error selecting extreme values 
tried techniques mitigate effect ffl minimum sample tried summary statistics including nd percentile 
ffl curve fit iteratively weighted squares dilute effect outliers 
ffl tried model distribution queue times estimate minimum round trip time parameter distribution model 
techniques reliably improved pathchar bandwidth estimates 
problem focus ongoing 
modeling errors models pathchar network model omits details real world 
section discusses effect estimates 
omissions affect latency omission mentioned assumption size error packet negligible 
result latency estimates little high 
actual size error packet easy adjust estimated latency subtracting error size estimated bandwidth 
cases adjustment insignificant 
second omission assumption forwarding time negligible 
pathchar estimates difference measurements forwarding time drops long routers 
variation forwarding time router router affect estimated latency 
related issue possibility forwarding time varies time 
possible causes variation include mac delays time router spends processing updates 
transient delays eliminated minimum filtering long occur infrequently 
serious problem possibility return path outgoing path 
case longer true latencies equation 
result estimated latencies wildly wrong 
unfortunately pathchar detect deal possibility 
factors affect pathchar bandwidth estimates discriminate large small packets 
omissions affect bandwidth problem mentioned existence links parallel pipes 
links put packet pipe dividing appear bandwidth single pipe 
problem caused probes exceed mtu link 
mtu maximum transfer unit largest packet sent fragmented 
probe exceeds mtu fragmented number smaller packets error packet sent soon packet arrives nth router 
resulting rtt curve levels mtu distorting tending bandwidth estimate high 
setting don fragment flag outgoing packets help cause packet exceed mtu link causes icmp unreachable error fragmentation required link mtu exceeded 
route alternation final factor omitted pathchar model causes significant problems route alternation 
route alternation tendency path hosts change time typically oscillating small set possibilities 
paxson shown route alternation common internet 
rapidly oscillating routing impossible pathchar generate useful estimates oscillating link links 
reason pathchar characterized gamma th link path assumes measurements nth link follow gamma links 
case subtracting characteristics links meaningless 
fortunately paxson majority internet routes persist hours long pathchar measurements 
unfortunately significant number routes alternate quickly routes create problems 
example th link path colby sdsc alternates routes 
current version pathchar tries characterize route finds rejects probes follow route 
happens encounter low probability route waste lot probes 
route characterizes shortest route estimates subsequent links inaccurate 
problem affected sdsc dataset reason restricted discussion links 
interval estimates dangerous generate estimates confidence intervals especially pathchar estimates accurate 
linear squares fit described section produces error estimates parameters estimates statistical meaning context estimated network characteristics 
squares fit knows packet size doesn take account probes sent probability traversing path incurring queue delays 
developing statistical model uses information generate error bound formidable 
alternative technique non parametric statistics divide large sample smaller samples look variation estimated parameters subsamples 
data previous section divided sample containing probes 
subsample contains probes sizes link 
calculate difference adjacent links get estimates parameter ffl difference samples ffl difference odd samples ffl difference evens odds vice versa 
link low bw high bw nominal bw mb mb mb theta table intervals estimated bandwidth links sdsc dataset 
largest smallest form interval estimated characteristics 
table shows intervals bandwidth links path 
intervals links narrow estimated value indicating estimated value consistent perfectly accurate 
cases interval contains nominal bandwidth link 
estimated bandwidth link consistent somewhat lower nominal bandwidth mb 
difficult links oc ds 
news intervals correctly indicate estimates accurate 
width interval nominal value case 
bad news cases interval contain nominal bandwidth 
intervals give measure uncertainty estimates somewhat optimistic 
section intervals criterion convergence order choose number probes link adaptively 
sizes vs bigger samples number probes obvious better measurements wide variety packet sizes large number measurements size 
advantage large number measurements better chance observing minimum possible rtt 
advantage making measurements packet sizes data points fewer discarded minimum filtering 
evaluate tradeoff collected large dataset divided subsamples various ways different packet sizes different numbers measurements 
mint dataset contains probes sizes bytes 
measurements tuesday july edt wednesday july edt 
table shows links path estimated bandwidth 
divided data subsets different axes 
case packets sizes divide probes sets th probe 
case different sizes keep probes size 
headings table show various ways partition dataset example theta means sizes probes size 
data subset estimated bandwidth link calculated relative error link host address latency bandwidth nominal est 
est 
mb bandwidth hub colby edu network colby edu router colby edu router colby edu general colby edu network colby edu cht mci net ms boston mci net theta mint boston mci net ms emerald mint net table estimated characteristics mint path 
subsets relative error absolute difference estimated nominal bandwidth divided nominal bandwidth 
entry table average errors 
link path theta dataset yields estimates average theta dataset average 
remaining links similar datasets packet sizes consistently yield better estimates ones probes size 
discrepancy particularly significant th link oc 
errors link bigger board links best estimates come packet sizes 
link omitted table bug alpha version pathchar 
link pathchar different set packet sizes links 
discrepancy affect calculations break system splitting data subsets 
performed similar experiment sdsc path similar results sizes better probes size 
consistency experiment gives opportunity evaluate consistency pathchar measurements 
theta link theta theta theta theta theta table mean relative error bandwidth estimated mint dataset 
column represents different way partitioning data 
heading theta indicates dataset packet sizes probes size 
lowest value row appears bold 
asterisks indicate errors median estimate nominal bandwidth see section 
dataset examined estimates link 
general estimates low bandwidth links accurate consistent 
example estimates second ethernet largest smallest values differ 
oc link estimates median values mb close nominal value oc pipes oc mb range large indicating single estimate sample size unreliable 
measurements links interesting consistent mb accurate 
nominal bandwidth mb links providing nominal bandwidth explanation behavior 
framing bits suspect accounted nominal bandwidth line rate mb 
table compare accuracy different sample sizes mb nominal value links 
latency far said little accuracy latency estimates latency sum factors nominal values links measured 
hand number links appear sample paths 
measurements assess consistency estimates accuracy 
case measurements differ 
paths latency link higher latency ethernets 
excess time take router generate icmp error packet 
subsequent links time eliminated subtraction adjacent latencies 
link number estimated converge probes nominal criterion bandwidth table adaptive data collection mint dataset 
adaptive data collection thing clear example paths links require measurements generate accurate characterization 
link mint dataset mb ethernet theta sample sufficient estimate bandwidth 
hops theta sample characterize link 
fast links intervening hops oc theta dataset probes 
current release pathchar uses number probes link path 
practice means sample size large characterize difficult link probes wasted easy links 
set design adaptive data collection system uses probes necessary 
experiments simulated adaptive data collection collecting large dataset theta usual way number probes links adaptively selected subset data 
start small number samples link new measurements incrementally including additional data 
estimated characteristics link converged move link discard remaining measurements 
hope process discover minimum number samples required reach accuracy 
simulation distorts time interval probes somewhat expect affect results time scale minutes queue delays noisy uncorrelated section 
matter delay measurement link 
detecting convergence section described simple way calculate interval estimated characteristics 
divide sample halves estimate parameters subsample 
estimate difference adjacent links subsamples generate estimates link 
convergence criterion range estimates divided smallest estimate words difference smallest largest expressed percentage smallest 
consider link converged criterion 
link number estimated converge probes nominal criterion bandwidth table adaptive data collection sdsc dataset 
link number estimated converge probes nominal criterion bandwidth table retroactive data collection sdsc dataset 
result section collected measurements large number packet sizes sizes ranging 
started probes packet size added new measurements size estimates converged exhausted supply previously collected data evens odds 
time added new measurements doubled number starting table shows number data points characterize links mint dataset 
link table shows estimated bandwidth width interval 
cases probes packet size sufficient link converge 
total number samples links subsets probes size sizes probes size 
th th links fail converge available data 
retroactive data collection adaptive data collection works mint dataset fails sdsc dataset table 
estimated bandwidth th link fails converge available data best estimate negative pretty indication wrong 
problem estimate th link depends data th link case th link converged value close nominal value close yield accurate difference th th links see section 
simple solution collect additional measurements th link time working th 
samples current link additional link ms table estimated moments queue delays mint dataset 
measurement prior link 
table shows result technique call retroactive data collection 
case available data th link yields improved bandwidth estimate narrow interval 
improving characterization th link eliminates problematic negative bandwidth th 
characterizations th th links inaccurate worse table 
retroactive data collection slightly improves estimates mint dataset 
cases requires probes simple adaptive collection far fewer required collected number probes link 
directed adaptive collection tried alternate form adaptive data collection reduces number probes required achieve accuracy 
basic idea residuals step direct data collection 
packet size fitted curve assume observed minimum possible rtt collect measurements size 
conversely fitted curve avoid wasting measurements 
technique effective reduces number measurements needed reducing accuracy difficult strong claim statistical validity result initial error lead self fulfilling theory 
practice problem 
deconvolution addition inferring physical characteristics link pathchar tries characterize distribution queue delays reporting mean hinge ratio interquartile distance median 
predicting delay suffered individual packet difficult conditions change quickly measurements seldom predict 
knowing distribution queue delays possible predict aggregate performance 
unfortunately seldom luxury observing queue delays single link link observation sum queue delays see equation 
order discern delays imposed link observed distributions adjacent links 
distribution queue delays fraction probes delay ms distributions cumulative queue delays mint dataset shown log scale fitted lognormal distributions 
total queue delay gamma links path queue delay nth link clearly total delay links sum call knew trivial find way pathchar works measure packet 
making measurements estimate distribution deconvolution infer distribution simplest form deconvolution subtraction moments 
technique pathchar uses 
know fx distribution fy distribution calculate moments fz distribution sum just adding moments fx fy true distributions depend independence property pathchar estimates moments fy subtracting moments fx moments fz negative queue delays impossible moments increase monotonically link 
example mean queue delay nth node mean queue delay gamma th node 
table shows moments queue delays mint dataset 
link fit curve estimate queue delay subtracting fitted time measurement 
discarding small number negative values measurements link 
links moments increase monotonically things break 
mean queue delay th link mean th link th th 
possible explanations ffl estimated moments true moments underlying distributions 
estimating moments distributions long tails notoriously difficult outlying values large influence mean lognormal mean median link early late diff early late diff early late diff table estimated moments queue delays mint dataset 
calculated estimates 
ffl distributions queue delays stationary 
traffic conditions may changed measurement gamma th nth links 
pathchar collects measurements link moving means significant delays minutes dataset set measurements 
possible traffic conditions change interval 
explanations turn true 
sections discuss detail 
moment estimation queue delay distributions modeled reasonably lognormal distribution 
shows representative links mint dataset 
case clear observed distribution strictly lognormal general shape curves indicates lognormal model reasonable choice 
empirical study wide area tcp connections paxson variety characteristics fit lognormal model 
know underlying mechanism relates observations reflect versatility lognormal model 
lognormal model estimate moments distributions yields different results especially second moment 
explanation conventional estimates sensitive outliers small number large queue delays ms raise mean significantly huge effect second moment 
lognormal model sensitive outliers better job describing distributions 
alternate moments problem conventional estimates moments decrease link link way impossible distribution queue delays stationary 
conclude distributions fact changing pathchar running 
non stationarity get idea distribution queue delays varies divided mint dataset subsets containing samples link second 
entire dataset took hours collect elapsed time early subset corresponding late subset order tens minutes 
table shows summary statistics subsets including mean moment lognormal model median 
links parameters distribution change implies history predictor near 
longer term predictions worse 
result may worthwhile pathchar characterize distribution queue times 
evaluation alpha version pathchar ffl estimating link latencies relatively easy latencies wide area networks large compared pathchar measurement errors 
ffl estimating bandwidths harder difference round trip time largest packet smallest small compared measurement errors 
higher bandwidth difficult estimate 
ffl key getting bandwidth estimate send probes traverses entire path incurring queue delays 
length path increases number probes required increases quickly 
ffl single busy link imposing queue delays majority probes difficult resolve characteristics links side 
hand slow links necessarily barrier accurate measurement long performance consistent 
ffl pathchar attempt characterize distribution queue times individual links may vain network traffic conditions change significantly pathchar running 
new techniques tested adaptive data collection greatly reduces amount data required affecting accuracy estimated characteristics 
techniques tried significantly improved pathchar accuracy 
experiments uncovered anomalies 
ffl measured bandwidth links consistently percent mb nominal bandwidth mb ffl measured bandwidth ds consistently low median value close half nominal bandwidth 
easy explain results attribute noise 
order fast link masquerade slow link impose delays proportional packet size 
random noise yield estimates low consistent measurements 
claffy caida jason lavoie mint greg miller mci evi nemeth daniel caida rich wolski university tennessee mark crovella boston university sigmetrics reviewers program committee sigcomm reviewers program committee van jacobson writing pathchar 
van jacobson 
pathchar tool infer characteristics internet paths 
mathematical sciences research institute msri slides available ftp ftp ee lbl gov pathchar april 
norman johnson samuel kotz 
continuous univariate distributions 
john wiley sons 
vern paxson 
empirically derived analytic models wide area tcp connections 
ieee acm transactions networking august 
vern paxson 
routing behavior internet 
ieee acm transactions networking 
richard stevens 
tcp ip illustrated volume protocols 
addison wesley 
rich wolski 
dynamically forecasting network performance network weather service 
cluster computing 
available www cs ucsd edu users rich publications html 
