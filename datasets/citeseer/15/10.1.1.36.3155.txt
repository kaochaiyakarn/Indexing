interworking sip sdp singh henning schulzrinne dept computer science columbia university new york usa cs columbia edu may currently standards signaling control internet telephone calls itu recommendation ietf session initiation protocol sip 
describe interworking function iwf allow sip user agents call terminals vice versa 
solution addresses user registration call sequence mapping session description 
describe compare various approaches multi party conferencing call 
appears session initiation protocol sip session description protocol sdp itu recommendation various versions setting internet multimedia conferences telephone calls 
example currently widely protocol pc conferences due widespread availability microsoft tool carrier networks called soft switches ip telephones built sip 
order achieve universal connectivity interworking protocols desirable 
describes approaches achieving 
itu recommendation defines packet multimedia communication systems heavily previous itu multimedia protocols 
supported earlier version appeared st ip telephony workshop berlin april 
particular call signaling inspired isdn call control terminals 
sip developed ietf builds simple text request response architecture similar internet protocols rtsp 
exception conference control sip provides similar set basic services 
interworking protocols simpler operate ip internet protocol rtp real time transport protocol transferring realtime audio video data reducing task interworking protocols merely translating signaling protocols session description :10.1.1.165.7150
media data needs translated single gateway serve thousands systems 
interworking sip requires transparent support signaling session descriptions sip entities 
call server providing translation sip interworking function iwf 
refer set terminals speaking sip sip networks respectively intermingled ip network 
term native network refer network particular terminal foreign network network access mediated iwf 
terminal sip terminal foreign network 
addressing terminal signaling protocol approaches 
user explicitly identify protocol part address example inventing form url alice columbia edu 
example url sip terminal responsibility sip terminal find appropriate iwf 
alternatively terminal particular signaling protocol sees terminals native know care particular address refers terminal foreign network 
address change native foreign depending equipment owner address happens 
approach preferable requires user registrations exported foreign network 
depending type information sharing sip elements iwf different architectures possible provide transparent address resolution call establishment discuss 
outline rest remainder organized follows 
section list problems translating sip vice versa 
section describes compares url scheme proposed expired internet draft 
different approaches address user registration 
section describe mechanism map sip addresses addresses 
call sequence mapping sip described section 
section gives insight translating multi party conferencing call transfer 
describe current implementation section 
background protocol overview includes various subprotocols connection setup media transport rtp resource access address translation call control capability negotiation large conferences security interoperability pstn supplementary services call transfer 
simple call established follows 
user say alice wants talk user bob alice sends admission request gatekeeper 
gatekeeper acts management entity access resources controls bandwidth maps user names ip addresses things 
gatekeeper finds ip addresses bob reached informs alice 
alice establishes tcp connection ip address bob 
followed isdn call signaling procedure 
alice sends setup message bob responds connect message 
stage signaling complete takes 
messages negotiate terminal capabilities support various audio video algorithms 
procedure opening different unidirectional media channels 
media channel defined pair udp channels rtp rtcp 
audio video packets encapsulated rtp sent system 
depending version steps combined various ways 
sip sets calls invite message response called party 
invite response contain session description indicating terminal capabilities typically necessarily encoded sdp 
proxy redirect servers responsible translating user names called party ip address 
call setup translation pieces information needed establishing call endpoints signaling destination address local remote media capa bilities local remote media transport addresses endpoint receive media packets 
information spread different stages call setup sip conveys invite message response 
translating sip call call straightforward 
iwf gets pieces information sip invite message split multiple stages call establishment 
reverse direction sip different stages call establishment merged single sip invite message 
describe compare various approaches section 
version fast connect procedure step simplifying multi stage signaling 
optional entity required support traditional multi stage signaling 
describe call setup fast connect 
user registration sip translation solve user registration problem 
user registration involves mapping user names phone numbers identifier email addresses network addresses 
allowing users reached location independent identifiers user registration provides personal mobility 
instance call destined sip bob com reaches user bob matter ip address currently 
sip proxy redirect servers access location server registrar receives user registration information 
server com map addresses form sip xyz com appropriate ip addresses depending xyz currently logged 
functionality performed gatekeeper 
iwf user registration information available networks resolve user name ip address 
iwf contain sip registrar server gatekeeper discussed section 
session description iwf map session descriptions signaling protocols 
uses session description 
negotiate media capabilities provide conference floor control establish tear media channels 
media capabilities described set capability descriptors listed decreasing order preference 
capability descriptor called simultaneous capability set set alternative capability sets alternative capability set contains list algorithms time 
instance capability descriptor alterna tive capability sets 
indicates terminal support audio video data simultaneously 
audio codec video codec data format sip principle session description format 
practice sdp exclusively 
sdp lists media types supported encodings 
sdp express cross media inter media constraints 
example sdp indicate particular media type side choose subset subset listed codecs codecs subsets 
similarly sdp express certain audio codecs conjunction certain video codecs 
sip media capability easily described reverse complicated 
approach carry multiple sdp messages message body sip invite requests responses multipart content type 
sdp message represents capability descriptor capability set 
section describe sending multiple sdp messages avoided 
multi party conferencing ad hoc conferencing sip systems possible modifying protocols 
ad hoc conferencing defined participants know advance call point topoint party multi party 
participants switch point point call multi party conference vice versa call 
possible participants invite third party conference third party join conference 
sip individually support ad hoc conferencing 
sip conference topology full mesh participants having signaling relationship participant centralized bridged conference star topology participant signaling relationship central conference bridge 
possible switch mesh bridged conference 
conferences managed central entity called multipoint controller mc 
mc part terminal gateway gatekeeper mcu multipoint control unit 
conferences inherently star topology participant having control channel mc 
mc responsible deciding common media capabilities conference conference floor control conferencing functions 
participants required obey media capabilities mc 
difference topology conferences sip star full mesh star sip transparent support multiparty conferencing achieved modifying protocols 
simplifying assumptions basic conferences set described section 
call services advanced call services call forwarding call transfer supported sip 
uses supplementary services 
sip support blind transfer operator assisted transfer call forwarding call park directed call pickup 
services widely deployed translation critical moment 
section describes issues related 
security quality service problems sip translation include security quality service qos 
sip individually support 
translating open architecture sip security qos independent connection establishment security qos go hand hand call establishment remains open issue 
architecture user registration section describe different architectures user registration address resolution 
user registration servers entities network store user registration information 
sip registrars user registration servers 
simplifies locating users independent signaling protocol iwf direct access user registration servers 
user registration server forwards registration information network belongs 
iwf contains sip proxy registrar approach combines iwf sip registrar proxy server shown 
fig 

approach registration information maintained gatekeeper 
sip registrar receives sip register request generates registration request gatekeeper translating sip uri alias address 
users register usual procedure 
sip registration information available gatekeeper entity resolve address sip entities reachable sip server iwf 
direction sip user agent wants talk user happen reside network sends sip invite message sip server 
sip server multicasts location requests terminal gatekeeper sip sip user agent sip terminal gatekeeper sip user agent sip terminal gatekeeper register register register options register location request registration request sip user agent sip proxy registrar sip proxy sip proxy registrar registrar sip message message iwf iwf iwf iwf contains sip proxy iwf contains gatekeeper iwf independent proxy gatekeeper architectures user registration 
gatekeeper user registered responds ip address user 
sip server knows address belongs world route call destination 
drawback approach burdened registrations sip network 
approach sip addresses handled registrar available zone 
typically registrar responsible single domain columbia edu 
zone iwf 
user wants call sip terminal terminal locates dns txt records appropriate gatekeeper turn uses registration information conveyed iwf discover address located sip network 
clear widely implemented approach iwf contains gatekeeper architecture shown fig 
similar previous approach sip proxy server maintains user registration information networks 
registration request received gatekeeper forwarded appropriate sip registrar stores user registration information sip entities 
sip terminal terminals simply appear sip urls domain 
see section addresses translated sip urls 
entity wants talk user happens reside sip network sends admission request arq gatekeeper 
gatekeeper multicasts location request 
gk iwf server captures request tries find address belongs sip user 
sending sip options request set call state 
address valid sip network user currently available called iwf responds location confirmation lcf letting terminal know destination reachable 
approach similar drawback previous approach section proxy store registration information 
approach advantage equipped iwf address resolution works gatekeeper resolve called address multicasts location request network 
long gatekeeper exists sip signaling translation capability sip user located network 
note previous approach section required sip registrars proxy servers equipped 
iwf independent proxy gatekeeper third approach shown fig 
iwf colocated gatekeeper sip proxy server 
user registration done independently sip networks 
call reaches iwf iwf queries network user location 
assume iwf capable interpreting responding location request network 
address resolution mechanism works follows 
suppose sip user sam wants talk henry user 
henry registered gatekeeper network gatekeeper knows henry ip address conveyed 
sam contacts sip proxy henry name sip proxy registration henry configured contact iwf case called party network 
iwf turn multicasts location request henry 
positive response network timeout period iwf concludes address valid network branch fails 
direction henry sends admission request arq gatekeeper 
gatekeeper address mapping sam multicasts location request sam network 
addition iwf tuned receive 
iwf uses sip options request section find sam available sip network informs gk request succeeds 
followed call establishment henry iwf sip call iwf sam 
iwf support direct connections 
instance sip user sam able call user henry iwf say sip columbia edu placing call sip henry sip columbia edu 
similarly user able reach sip user sip sam com establishing tcp connection iwf providing destination address remote extension address setup message sip user com 
direct connection involve user registration caller expected know destination reachable iwf 
address translation user registration exports identities foreign network address translation performed iwf create valid sip addresses addresses vice versa 
sip addresses typically sip uris form sip user host user names telephone numbers 
sip terminals support urls schemes example tel urls telephone numbers urls 
generally sip terminals proxy calls local server understand particular url scheme hope server translate 
addresses asn take forms including unstructured identifiers id global telephone numbers urls various types host names ip address email addresses email id 
local user names host names appear common 
compatibility version entities id field 
sip interoperability consistent unique way mapping sip uri address vice versa 
translating sip uri easy simply copy sip uri verbatim id user host parts sip uri generate email identifier user host stored email id field 
transport id parameter copied host part sip uri numerically 
field extracted user part sip address marked telephone number 
translating sip address difficult multiple representations url id transport id need merged single sip address 
easiest case alias contains url id sip uri case simply copied sip message 
id parsed valid sip address alice alice host 
transport id point iwf forms host port portions sip uri 
alias email id sip uri prefixed sip uri scheme 
note translated address may necessarily valid 
side may desirable configure gatekeeper route calls resolvable network iwf attempt translation sip uri 
allow terminals reach sip terminal cross registered 
connection establishment user knows destination reachable iwf connection established 
point point call alice bob needs pieces information logical destination address bob media transport address users ready receive media packets rtp rtcp description media capabilities parties 
alice know bob bob needs know alice difficulty translating sip arises contained sip invite request response may spread information messages 
fast connect fast connect procedure available protocol translation simplified fast connect establishes call single stage mapping sip call establishment messages 
setup message fast connect sip invite request components 
call succeeds connect message fast connect sip response including session description required components call destination 
fast connect optional entity able handle calls fast connect feature backward compatibility 
particular iwf accept non fast connect call side 
direction iwf try fast connect prepared switch multi stage call establishment procedure response entity indicates supported 
call translation fast connect translating sip call call straightforward fast connect 
iwf uses phases 
responses side collated forwarded sip side shown fig 

multi stage call translated sip call variety ways 
obvious approach accept call informing sip user agent 
call proceeds terminal iwf iwf just terminal 
iwf may get media capabilities sip user agent sip options message 
media capabilities terminal obtained capability negotiation 
logical channels established iwf terminal iwf knows place sip call sending invite 
media transport address response conveyed terminal acknowledging requests terminal 
approach pretty simple disadvantage iwf accepts call asking actual destination leading caller confusion sip destination reachable 
problem solved iwf sends sip invite session description session description media transport information receiving setup message terminal 
sip user agent accepted call iwf forwards confirmation connect terminal 
rest call establishment proceeds sip options message needed response sip user agent describes media capabilities 
media capabilities terminal received message forwarded sip user agent part ack message additional invite 
media capabilities sip user agent session description response invite request 
different interpretations media capabilities sdp potentially cause problems call 
sdp receive media capability sip user agent terminal capability set ack ack ack ack session description iwf invite ok ack setup connect call sip terminal terminal fast connect means sender switch algorithms time call explicitly informing receiver changing rtp payload type 
sender chooses algorithm capability set receiver explicitly opens logical channel algorithm 
sender switch dynamically algorithm informing receiver 
sender close previous logical channel re open new algorithm 
alternatively receiver request sender different algorithm 
problem addressed having rtp rtcp packets sip intercepted iwf 
iwf detects change coding algorithm initiates required procedures 
approach advisable scales poorly 
approach limits media description sent sip side algorithm media alternative capability set 
achieved maintaining maximal intersection sip terminal capability sets 
maximal intersection capability sets capability set subset capability sets superset subset capability sets 
operating mode selected algorithms call derived intersection capability sets selecting algorithm alternative capability set 
sip side sends additional invite requests call change media parameters iwf simply recalculates operating modes 
finding maximal intersection capability sets described 
example sip capability set capability set sip user support audio video user support audio video audio video 
maximal intersection calculated iwf iwf derives operating mode selecting capability descriptor maximal intersection selecting algorithm alternative capability set 
iwf conveys audio video sip user agent 
sip side sends additional invite different capability set new maximal intersection gf iwf derives new operating mode fg initiates procedure change audio 
translating advanced services sip support advanced services multi party conferencing call transfer 
section propose possible approaches translating services 
multi party conferencing transparent support multi party conferencing achieved having iwf mirror endpoint direction 
fig 
shows scenario sip user agent terminal setup ack ack ack session description capability set session description ack operating mode connect iwf invite ok ack call sip terminal call fast connect terminals sip user agents involved conference 
side interworking function iwf looks single terminal 
sip side iwf acts single sip user agent 
approach fails invites user different interworking function iwf 
participants know joined conference 
alternatively invites sip user know presence 
way participants know multipoint mc controller convention hn terminals sm sip user agents interworking function iwf iwf iwf ad hoc conferencing sip endpoints existence participants rely rtp rtcp packets 
goes idea conferencing messages convey existence new participants 
solve problem forcing invitations pass iwf 
fig 
shows conference managed mc terminals directly connected mc sip user agents connected 
sip user agent allowed invite sip uas iwf iwf update mc state 
sip centric architecture fig 
terminals take part conference 
recommend sip centered architecture sip conferencing model general allowing full mesh distributed control centralized bridged conferences 
general translating services greatly simplified operator adopts primary signaling protocol services offered protocol 
terminals protocol restricted making calls iwf 
supporting loosely coupled conferences straightforward sdp mc sip centered conference cloud sip cloud sip cloud cloud centered conference iwf iwf iwf iwf iwf iwf different conferencing architectures context 
call transfer call transfer supplementary services needed internet telephony 
idea transfer call entities say call fig 
shows message sequence sip possible translation terminals sip user agent 
difference sip arises different philosophies protocol extension 
designers identify supplementary service call transfer call forwarding call hold define new set messages accomplish 
results different procedures different advanced services call transfer call diversion call hold 
sip crucial information needed call services identified encapsulated new message headers replaces requested 
different call services designed building blocks 
number open issues remain translating advanced services including call parameters translated security authentication handled 
original call original call facility invoke call transfer initiate connect return result setup invoke call setup release complete return result facility invoke call transfer setup invoke call setup connect return result release complete return result sip call transfer mixed network 
terminals sip user agent 
call transfer call transfer sip new call iwf bye invite ok ack original call new call invite ok ack ok example call transfer mapping related problem interworking sip started attract attention etsi itu get involved 
details sip interworking described 
crowcroft address problem interworking solve issues registration media capability translation 
described framework interworking sip 
challenges include call sequence mapping address translation mapping session descriptions 
ad hoc conferencing sip participants possible modifying protocols 
problem tractable keeping iwf aware call state changes 
picked number features sip fast connect udp signaling 
possible convergence may occur fundamental changes sip 
implemented basic interworking function library sip signaling stack developed locally simple audio call setup sip user agents microsoft 
address issue multistage translation users communicate sip gateway 
clear common scenario direct network connectivity parties 
acknowledgments members sip mailing list sip com comments 
handley schulzrinne schooler rosenberg sip session initiation protocol request comments proposed standard internet engineering task force mar 
schulzrinne rosenberg internet telephony architecture protocols ietf perspective computer networks isdn systems vol 
pp 
feb 
handley jacobson sdp session description protocol request comments proposed standard internet engineering task force apr 
international telecommunication union packet multimedia communication systems recommendation telecommunication standardization sector itu geneva switzerland feb 
toga ott itu standardization activities interactive multimedia communications packet networks related recommendations computer networks isdn systems vol 
pp 
feb 
international telecommunication union narrow band visual telephone systems terminal equipment recommendation telecommunication standardization sector itu geneva switzerland may 
international telecommunication union terminal low bit rate multimedia communication recommendation telecommunication standardization sector itu geneva switzerland feb 
fielding gettys mogul frystyk masinter leach berners lee hypertext transfer protocol request comments draft standard internet engineering task force june 
schulzrinne rao real time streaming protocol rtsp request comments proposed standard internet engineering task force apr 
schulzrinne rosenberg comparison sip internet telephony proc 
international workshop network operating system support digital audio video nossdav cambridge england pp 
july 
fang comparison sip ip telephony signaling proc 
photonics east boston massachusetts spie sept 
schulzrinne casner frederick jacobson rtp transport protocol real time applications request comments proposed standard internet engineering task force jan :10.1.1.165.7150
conversational multimedia urls internet draft internet engineering task force dec 
progress 
international telecommunication union media stream packetization synchronization non guaranteed quality service lans recommendation telecommunication standardization sector itu geneva switzerland nov 
international telecommunication union control protocol multimedia communication recommendation telecommunication standardization sector itu geneva switzerland feb 
international telecommunication union extended loosely coupled conferences recommendation telecommunication standardization sector itu geneva switzerland sept 
international telecommunication union security encryption multimedia terminals recommendation telecommunication standardization sector itu geneva switzerland feb 
international telecommunication union interworking series multimedia terminals series multimedia terminals voice terminals isdn recommendation telecommunication standardization sector itu geneva switzerland feb 
international telecommunication union generic functional protocol support supplementary services recommendation telecommunication standardization sector itu geneva switzerland feb 
international telecommunication union call transfer supplementary service recommendation telecommunication standardization sector itu geneva switzerland feb 
international telecommunication union call diversion supplementary service recommendation telecommunication standardization sector itu geneva switzerland sept 
international telecommunication union digital subscriber signalling system dss isdn user network interface layer specification basic call control recommendation telecommunication standardization sector itu geneva switzerland mar 
schulzrinne rosenberg sip call control services internet draft internet engineering task force june 
progress 
schulzrinne rosenberg signaling internet telephony technical report cucs columbia university new york new york feb 

petit ip telephony 
reading massachusetts addison wesley 
urls telephone calls internet draft internet engineering task force dec 
progress 
singh schulzrinne interworking sip sdp internet draft internet engineering task force jan 
progress 
study main ip telephony signaling protocols signaling sip comparison signaling gateway specification master thesis libre de bruxelles ulb des science informatique brussels belgium 
supervised eric 
crowcroft architecture conference control functions proc 
photonics east boston massachusetts spie sept 

