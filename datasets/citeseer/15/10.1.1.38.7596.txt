ecc extended calculus constructions zhaohui luo department computer science university edinburgh king buildings edinburgh eh jz higher order calculus ecc seen extension calculus constructions ch adding strong sum types fully cumulative type hierarchy 
ecc turns expressive mathematical theories abstractly described mathematics may adequately formalized 
shown ecc strongly normalizing nice properties 
gammaset realizability model described show essential properties calculus captured set theoretically 
calculus constructions ch coq typed higher order functional calculus provides nice formalism constructive proofs natural deduction style seen high level functional programming language 
extended calculus constructions ecc seen extension calculus constructions ffl sigma types strong sum types ffl fully cumulative type hierarchy 
sigma types ecc type hierarchy provides powerful abstraction mechanism mathematical theories abstractly described structured leading comprehensive structuring mathematical texts interactive proof development program specifications 
cumulative type hierarchy increases expressiveness aspect example mathematics supported studentship university edinburgh ors award 
algebras categories may adequately formalized 
furthermore type hierarchy provides strong flexible form polymorphism ecc provides potential higher order module mechanism supports structure sharing parameterization style programming language pebble lb bur type types exists plays important role 
infinite type hierarchy ecc similar martin lof type theory fully cumulative sense 
lowest level rop impredicative propositions level lifted higher level types 
lifting essential sigma types ecc play role abstraction mechanism solves technical difficulty adding type indexed strong sum impredicative proposition level constructions results inconsistent system girard paradox derived coq 
secondly type inclusions type universes coherently expanded types strong form type unicity achieved yields simple notion principal type simple algorithm type inference 
ecc proof theoretic properties 
particularly strongly normalizing shows consistency ecc general constructions infinite type hierarchy establishes theoretical basis implementation decidability convertibility type checking 
give intuitionistic set theoretic semantics ecc framework sets mog lm hyl captures intuitive meanings constructs calculus reflects essential properties 
addition importance getting better understanding calculus modeltheoretic semantics useful considering pragmatics calculus formalize mathematical problems adequately constructions 
discuss structure mathematical texts express theories ecc 
sharing parametrization explained example 
weak existential types discussed 
ecc ecc consists underlying term calculus set inference rules judgements 
basic expressions term calculus called terms inductively defined clauses ffl constants rop ype called kinds terms ffl variables 
terms ffl terms pix mn sigmax pair sigmax 
free bound occurrences variables substitution defined usual 
terms changes bound variables identified identity 
reduction conversion defined usual respect step contraction schemes pair sigmax church rosser property holds term calculus term calculus inclusion reduction rule surjective pairing church rosser fail vd klo 
worth remarking church rosser welltyped terms ecc fails existence type inclusions induced universes 
kinds called type universes type inclusions induce type cumulativity syntactically characterized partial order 
definition type cumulativity define smallest partial order terms conversion 
rop type ype 
pix pix 
sigmax sigmax identity referred reflexivity antisymmetry oe contexts finite sequences expressions form variable term 
empty context denoted hi 
judgements form gamma valid gamma gamma context terms 
sets free variables context xn judgement gamma defined fx fv fv gamma fv fv respectively 
inference rules ecc hi valid gamma type gamma valid fv gamma var gamma gamma valid gamma gamma gamma valid gamma rop ype gamma valid gamma type ype pi gamma rop gamma pix rop pi gamma type gamma type gamma pix ype gamma gamma pix app gamma pix gamma gamma mn sigma gamma type gamma type gamma sigmax ype pair gamma gamma gamma ype gamma pair sigmax sigmax gamma sigmax gamma gamma sigmax gamma conv gamma gamma ype gamma cum gamma gamma ype gamma oe derivation judgement finite sequence judgements jn jn instance inference rule premises judgement derivable derivation term typed gamma gamma derivable shall write gamma gamma derivable gamma gamma typed gamma respectively 
completes formal presentation ecc 
ecc extends calculus constructions ch coq adding sigma types cumulative type hierarchy 
seen extension core martin lof type theory infinite type universes ml adding lowest impredicative level propositions types type rop 
propositions stand logical formulas curry howard correspondence constitute impredicative level rop type hierarchy 
viewing intuitively types sets rop type type rop ype ype particularly proposition lifted higherlevel type 
appearance propagate impredicativity level propositions higher levels 
instance derive pix ype pib ype rop bx type type hierarchy lowest level rop stratified predicative sense types ranked way existence proper type type convertible proposition dependent lower ranks see section 
stratification type hierarchy essential logical consistency calculus 
idea lifting propositions types essential sigma types ecc useful abstraction tool express mathematical theories section 
reason adding type indexed sigma types impredicative level constructions get inconsistent system girard paradox derived coq 
note ecc sigmax proposition propositions lifted types derive gamma type gamma rop gamma sigmax ype sigmax intuitively represents set pairs element proof proposition intuitionistic subset type ml 
property enables propositions express axioms mathematical theory expressed sigma type 
type hierarchy fully cumulative 
inference rule cum design decision achieves strong form type unicity simple notion principal type theorem straightforward algorithm type inference theorem 
type hierarchy coq property typed term minimum type general luo 
pairs heavily typed avoid undesirable type ambiguity type inference type checking difficult impossible luo 
note full cumulativity types expected say pair type thetat ype rop rop ype theta type necessary partial order defined definition completely contravariant second clause definition required convertible take decision proof theoretic properties section hold 
algorithm type inference remain 
difference point view terms get types 
example type types type type rop type type type types 
semantically type inclusions defined reflected coercions set inclusions explain section 
proof theoretic properties section show ecc nice properties 
particularly prove ecc strongly normalizing straightforward algorithm computes principal type typed term 
consequence ecc decidable 
basic properties stated theorem 
theorem ecc 
derivation gamma gamma subderivation gamma kind including propositions types may directly rules gain similar effects 

derivation gamma gamma subderivation gamma valid 

gamma gamma valid context contains component gamma gamma 
gamma gamma gamma gamma gamma 
gamma gamma kind 
subject reduction gamma gamma 
strengthening gamma gamma fv fv gamma gamma gamma 
characterizing typed gamma gamma fv gamma 
type inclusions induced type universes type uniqueness upto conversion fails 
simple characterization set types typed term 
definition principal type called principal type gamma gamma gamma words principal type typed term minimum type respect partial order exists obviously unique upto conversion 
theorem existence principal types typed term context gamma principal type 
proof sketch theorem follows diamond property gamma gamma gamma proved induction derivations 
existence principal type proof theoretic property important implementation interactive proof development system 
denote tm principal type gamma 
tm general type sense 
fact gamma tm gamma kind come important result section 
theorem strong normalization ecc strongly normalizing gamma strongly normalizable 
proof theorem difficult 
key difficulty constructions type hierarchy ecc propositions proper types form mn 
difficult define rank assignment types complexity measure fi coq essential proving strong normalization theorems constructions calculi insight coquand 
solve problem prove result says typed term reduced term contain oe redex fi redex type proper type 
implies typed proper type reduced head normal forms xa pix sigmax kind variable 
result define dimensional complexity measure types enables prove theorem similar pattern proof sn theorem constructions coq 
result shows proof theoretic consistency constructions infinite type hierarchy applies generalized calculus constructions coq see luo 
corollary consistency ecc logically consistent 
particularly term pix rop corollary decidability convertibility decidable arbitrary typed terms convertibility typed terms decidable theorem type inference simple algorithm context gamma succeed proving extending way measure adopted pottinger seldin attempt prove sn theorem calculus constructions pot ps essentially spirit pra higher order logic complex 
term checks types gamma gamma tm tm principal type gamma 
proof sketch algorithm just straightforward extension calculus constructions described coq follows ml 
consider cases 
ffl check gamma pix gamma gamma ffl sigmax check gamma fp rop type gamma fp rop type gamma sigmax max fk ype ffl pair sigmax check gamma sigmax fp rop ype gamma gamma gamma pair sigmax sigmax soundness completeness algorithm proved usual 
note convertible terms may un convertible principal types 
example type rop rop type rop principal types respectively 
fact existence type inference algorithm implies decidability type checking 
corollary decidability type checking ecc decidable decidable gamma arbitrary gamma gammaset model ecc section sketch realizability model ecc gives intuitionistic set theoretic semantics calculus 
model captures intuitive meanings constructs calculus reflects essential properties logical consistency type cumulativity 
main question interpreting ecc interpret type universes type formation operators pi sigma intuitively mean describe model calculus 
reasonable models 
example give truth value model ecc propositions interpreted 
basic points missed interpret constructs properly hope explicit 

rop type type 
rop type type 
ype closed pi sigma 
rop closed pi 
requirements prevent giving naive non trivial classical set theoretic model ecc 
see rey rp lm pit discussions second order calculus gir rey 
fortunately idea interpreting types partial equivalence relations gir tro mog provides nice framework sets modest sets mog lm hyl interpretation ecc satisfying requirements 
gammaset category sets category modest sets 
see lm notions 
jaj gamma denote carrier set realizability relation set 
interpretation ecc defined induction derivations judgements gives derivable judgement unique denotation ffl gamma valid context gamma obj gammaset ffl gamma gamma gamma fpp gamma intuitively interpreted element see ffl gamma inclusion morphism gamma 
gamma furthermore gamma gamma ffi gamma ffl gamma gamma gamma gamma 
fact indicate interpret gamma tm principal type gamma 
different traditional simpler cases types objects constructions calculi mixed 
type fact double identity model 
give details interpretation see luo details filled emphasize interpret pi sigma type universes 
explaining model introduce set constructors oe oe gamma gamma suppose gamma obj gammaset gammaj gammaset 
define oe gamma set joe gamma df fl fl gammaj ja fl hm nik gamma oe gamma fl df mk gamma gamma fl nk gamma fl oe interpret valid contexts 
empty context interpreted terminal object gammaset gamma df oe gamma gamma ta 
notation gamma fpp gamma means satisfies projection property fl gamma fl fl suppose joe gamma gammaset 
oe gamma gamma functions gammaj gammaset defined fl gammaj joe gamma fl df ja fl jb fl hm nik gamma oe gamma fl df mk gamma fl nk gamma fl gamma fl defined pia ja fl jb fl nk gamma gamma fl pi denotes set product nk gamma gamma fl ja fl pk gamma fl gamma fl 
interpretation ype pi sigma types 
interpret type consider large set universes 
basic insight notions sets modest sets sizes sets consideration 
consider zfc set theory infinite inaccessible cardinals ff cumulative hierarchy sets 
define gammaset full subcategory gammaset objects sets carriers roughly speaking type interpreted gammaset 
points 
model zfc lemma oe gamma gamma closed gammaset gammaj gammaset oe gamma gammaset oe gamma gamma gammaj gammaset 
interpretations sigma type pi type principal type ype gamma sigmax ype gamma pix ype defined oe gamma gamma type gamma ype gamma gamma type gamma ype respectively 
closedness requirement satisfied lemma 
secondly gammaset full subcategory gammaset 
justifies requirement cardinal strongly inaccessible uncountable regular 
type requirement 
note gammaset small categories 
naturally sets special way delta df obj gammaset theta obj gammaset delta obj gammaset 

interpretation rop propositions 
category sets small full subcategory prop objects form quotient set partial equivalence relation 
rop roughly speaking interpreted prop 
similarly prop full subcategory gammaset obj prop 
theta obj prop obj gammaset 
lemmas 
lemma lm gamma closed modest sets gammaj gammaset joe gamma gamma gammaj lemma equivalence categories back prop obj prop back 
inverse back inclusion functor 
gamma pix rop interpretation defined back ffi gamma gamma ta gamma rop closedness requirement satisfied lemmas 
existence category equivalence back important interpret rop propositions properly pi closed prop 
note correct interpret rop constructions calculi ehr small category 
completes sketch realizability model ecc 
necessary logical consistency stated corollary follows model construction 
fact pix rop interpreted empty set 
explains mean double identity 
note set jaj jbj gammaset form jbj theta jbj 
prop isomorphic category partial equivalence relations 
easy verify prop full subcategory model gives information just consistency 
captures intuitive meanings constructs calculus 
example means syntactic type inclusions reflected semantically set inclusions 
pointed section type inclusion completely contravariant possibly reflected sort coercion set inclusion 
secondly important semantics shows adequately formalize mathematical problems 
example adequate formalize theory groups assuming carrier group rop know proposition viewed arbitrary set 
assuming ype adequate model view ype containing sets 
research needed aspect 
theory abstraction ecc briefly discuss section pragmatic aspects ecc expressing structuring mathematical theories 
sigma types theory abstraction sigma types ecc type hierarchy express mathematical theories gain comprehensive structuring mathematical texts 
example postulating theory rings context form type ass ass id propositions ring axioms may express theory rings sigma type ring sigmas sig ring ax ring sig ring sigmax ype theta theta ax ring sig ring ass general presentation mathematical theory say ring consists ffl signature presentation sig general sigma type ffl axioms signature expressed predicate function ax type rop 
theory sigma type sigmas sig axt proved theorems expressed function type rop proofs constitute function rf type pit hmt 
theorems proofs instantiated corresponding theorems proofs particular algebraic structure application 
example may instantiate theorems proofs theory rings concrete ones integers 
functions theories defined may capture idea lifting proofs theory extended theory tl 
type hierarchy allows approach theory abstraction internally expressed idea due coquand pollack fourth level type hierarchy type 
sharing parameterization type hierarchy ecc provides reasonably strong form polymorphism potential facility defining higher order modules 
define functions abstracted modules express sharing parameterization bur lb 
show simple example 
example define function results ring structure arguments monoid abelian group carrier proof extra axiom distributed laws 
suppose theories monoids abelian groups defined follows mon sigmax ype sigmag sigmax ype type type type carrier give results sigma types operations monoids abelian groups respect respectively propositions expressing axioms theories monoids abelian groups 
defined follows omit associated typings pairs readability type pm gamma pag gamma gamma pm pag type pix ype pim pig pid distr ring example shows sharing style pebble described lampson burstall bur lb supported ecc particular guarantee carriers arguments required 
note sort parameterized modules 
sort facility supporting higher order modules useful 
existential types existential types called weak sums describe data types mp defined ecc 
existential quantifier proposition level mp rey pra define existential types type levels 
example define ith level existential type constructor follows ype type pir ype pix type pia ype type ype 
elimination operators rep abstype similar described mp rey defined level satisfy desired properties abstype rep fi note different existential quantifier proposition level weak sums defined predicative levels 
show expressing data types impredicativity important 
course data types values strong sense mp type type type type weak sums satisfactory tools express mathematical theories proof development elimination operator weak 
particularly way prove component weak pair type satisfies property comparison strong weak sums context modular programming mac 
related calculus constructions cc short studied coq ch ch meta theory studied coq coq pot 
idea extending constructions infinite type hierarchy appeared coq generalized calculus constructions gcc short 
strong normalization result attempt prove sn system extends cc infinite type hierarchy applies gcc luo 
type checking problem gcc considered hap gcc property type unicity resulted algorithm complicated 
hyp general approach categorical semantics constructions calculi described extension constructions sigma types unit type motivation discussing semantics 
ehr gives general framework categorical semantics dependent types sketch interpret calculus constructions gammaset framework 
full description gammaset model constructions sigma types luo 
sigma types known martin lof type theory ml 
similar idea sigma types express modular structures occurs researches programming languages mac 
programming language research need consider logical consistency problem 
research extended calculus constructions ecc studied believe strong promising calculus formalize mathematical problems basis structured proof development 
discuss briefly related topics researches mentioned 
curry howard principle formulas types embedded logic ecc 
conjecture logic conservative extension intuitionistic higher order logic hol chu tak respect reasonable interpretation 
relevant problem adequate formalization mathematics discussed section 
connection concerned question proper way interpreting object set obj hol 
guess proper type proposition conjecture interpretation conservative unsound 
intuition computational power provided impredicative level 
proof theoretic power calculus unknown 
model construction uses large set universes interpret type hierarchy 
may possible give small model ecc 
approach theory abstraction adopted section may called theories types particularly sigma types 
approach theory structuring proof development sb borrows idea researches algebraic specification languages clear bg 
approach may called theories values theory operations put theories structured theory development 
type hierarchy ecc enables view sigma types theories sort values flexible internal powerful theory operations structure large theories smaller ones 
general unavoidable weakness type systems necessary restrictive logically consistent 
interesting combine ideas approaches way idea theories values implemented meta level proof development system type theories 
pollack edinburgh developed interactive proof development system lego constructions extended incorporate sigma types type hierarchy 
experience system lead powerful proof development environment 
am grateful hayashi kindly helped check draft sn proof pointed notion inaccessible cardinal interpret type hierarchy joint effort consider models hierarchy 
moggi th coquand insights suggesting consider set universes interpret hierarchy 
harper huet pollack taylor helpful discussions 
special supervisor burstall ideas structured theories sharing originate motivations helpful continuous guidance 
bg burstall goguen semantics clear specification language lncs 
burstall lampson pebble kernel language modules data types lncs 
burstall zhaohui luo settheoretic setting structuring theories proof development circulated notes 
apr 
bur burstall programming modules typed functional programming proc 
inter 
conf 
fifth generation computer systems tokyo 
ch th coquand huet constructions higher order proof system mechanizing mathematics 
ch th coquand huet calculus constructions information computation vol 

chu church formulation simple theory types symbolic logic 
coq th coquand une theorie des constructions phd thesis university paris vii 
coq th coquand analysis girard paradox lics 
coq th coquand calculus constructions 
nov 
ehr ehrhard categorical semantics constructions lics 
gir girard interpretation fonctionelle elimination des coupures de ordre universite paris vii 
gir girard system variable types fifteen years theoretical computer science 
hap harper pollack type checking universe polymorphism typical ambiguity calculus constructions draft 
sept 
hyl hyland small complete category ann 
pure appl 
logic 
appear 
hyp hyland pitts theory constructions categorical semantics topos theoretic models categories computer science logic boulder 
klo klop combinatory reduction systems mathematical center tracts 
lb lampson burstall pebble kernel language modules data types information computation vol 

lm longo moggi constructive natural deduction modest interpretation report cmu cs computer science dept carnegie mellon univ luo zhaohui luo higher order calculus theory abstraction lfcs report dept computer science univ edinburgh 
luo zhaohui luo cc ae meta theory lfcs report ecs lfcs dept computer science univ edinburgh 
luo zhaohui luo higher order calculus gammaset model circulated notes 
jan 
mac macqueen dependent types express modular structure th popl 
ml martin lof theory types report dept math univ stockholm 
ml martin lof intuitionistic theory types predicative part logic colloquium eds 
rose shepherdson 
ml martin lof intuitionistic type theory bibliopolis 
mp mitchell plotkin types existential type th popl 
mog moggi model internal category small products manuscript 
pit pitts polymorphism set theoretic constructively summer conf 
category theory computer science edinburgh 
pot pottinger strong normalization terms theory constructions tr odyssey research associates 
pra prawitz natural deduction study almqvist wiksell 
ps pottinger seldin normalization theory constructions extended dec 
rey reynolds theory type structure lncs 
rey reynolds types abstraction parameter polymorphism information processing 
rey reynolds polymorphism settheoretic lncs 
rp reynolds plotkin functors expressible polymorphic typed lambda calculus lfcs report dept computer science univ edinburgh 
sb sannella burstall structured theories lcf th colloquium trees algebra programming 
tak takeuti proof theory stud 
logic 
tl taylor zhaohui luo theories mathematical structures strong sums preliminary notes 
dec 
tro troelstra metamathematical investigation intuitionistic arithmetic analysis lecture notes mathematics 
vd van language theory automath phd thesis 
technological univ eindhoven 
