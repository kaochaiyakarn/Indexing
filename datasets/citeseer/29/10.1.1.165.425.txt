network sensitivity hot potato disruptions teixeira shaikh tim griffin geoffrey voelker uc san diego labs research intel research uc san diego la jolla ca florham park nj cambridge uk la jolla ca teixeira cs ucsd edu research att com tim griffin intel com voelker cs ucsd edu hot potato routing mechanism employed multiple equally interdomain routes available destination 
scenario border gateway protocol bgp selects interdomain route associated closest egress point intradomain path costs 
consequently intradomain routing changes impact interdomain routing cause abrupt swings external routes call hot potato disruptions 
shown hot potato disruptions substantial impact large isp backbones jeopardize network robustness 
result need guidelines tools assist design networks minimize hot potato disruptions 
developing tools challenging due complex subtle nature interactions exterior interior routing 
address challenges analytic model hot potato routing incorporates metrics evaluate network sensitivity hot potato disruptions 
methodology computing metrics measurements real isp networks 
demonstrate utility model analyzing sensitivity large tier isp network 
categories subject descriptors network protocols routing protocols computer communication networks network operations general terms design reliability management performance keywords network robustness sensitivity analysis hot potato routing bgp igp ospf 
internet service providers isps seek build robust networks small perturbations environment internal conditions significantly impact network performance 
permission digital hard copies part personal classroom granted fee provided copies distributed profit commercial advantage copies bear notice full citation page 
copy republish post servers redistribute lists requires prior specific permission fee 
sigcomm aug sept portland oregon usa 
copyright acm 
practice robustness easily achieved 
fact robustness easy thing measure 
network running smoothly crash unexpectedly seemingly small event 
robust network low sensitivity routing behavior traffic load variations 
understand robustness ip network important understand robustness control data planes 
example small routing change inside network may significant impact control plane causing extremely large number routing messages turn may overload crash routers routes initially play carrying traffic 
hand small routing shifts popular routes impact data plane causing large swing traffic leading congestion losses delay jitter 
understanding network sensitivity change crucial step designing robust network current traffic engineering techniques tools network design management limited capability analyze sensitivity 
fact little terminology describe measure network sensitivity 
address problem defining metrics characterizing network sensitivity routing changes inside autonomous system network 
routing performed interplay interdomain routing internet today bgp intradomain routing protocol ospf 
routers border exchange reachability information bgp responsible determining level forwarding path 
inside interior gateway protocols determine shortest paths router network 
bgp determines set best egress points destination prefix 
multiple equally egress points terms bgp specific attributes igp provides ranking egress points ingress point terms closeness 
egress point selection decided comparing igp costs commonly called routing 
previous measurements isp network show hot potato routing significant impact bgp route selection 
example igp routing change measured change router bgp table 
call abrupt bgp route shifts caused igp cost changes hot potato disruptions 
motivated findings propose metrics capture impact intradomain changes control data planes 
model control plane routing matrix maps node destination set potential egress points ma node set potential egress points destination consider tie break comparison trix function routes sent locally implemented routing policies 
routing matrix stores set egress points best bgp equal igp distances node 
changes igp bgp may affect network routing matrix 
express dependence informally relation represents combination information protocols data plane modeled traffic matrix 
traffic matrix represents volume traffic ingress point egress point 
adopt abstraction combined routing matrix easier determine metrics network load individual link loads 
define traffic demand matrix determines volume traffic entering network ingress point destination prefix 
actual egress point traffic uses exit network determined routing matrix 
changes traffic demands routing decisions may result changes traffic matrix 
represent combination relation 
informally talk measuring robustness put way sensitivity network elements network perturbations 
interested control plane sensitivity igp change capture say network robust small produce small naturally extends quantification data plane sensitivity captures perturbations traffic matrix derived control plane perturbations 
note control plane data plane sensitivities necessarily related 
example small routing change produce large shift traffic large routing change leave traffic unchanged 
interesting analogy seismic scales definitions 
richter scale familiar quantification magnitude seismic events 
familiar scale called modified scale rank intensity seismic event impact earthquake human society 
magnitude scale captures intrinsic property seismic event values intensity scale vary location may depend local conditions structural integrity buildings 
control plane sensitivity scale analogous richter scale data plane sensitivity scale analogous modified scale 
contributions understanding network sensitivity internal events 
analytic model ip network control plane data plane interactions 
terminology network sensitivity analysis 
methodology computing network sensitivity data typically collected large isps management purposes igp distances 

case study applying model large tier isp network 
rest organized follows 
discuss related section 
section background material routing isp perspective discuss challenges modeling 
section model routing matrix focusing single destination prefix 
extend model section capture control plane data plane sensitivity 
section presents methodology compute control plane sensitivity real networks analyzes control plane sensitivity tier link router failures 
conclude directions section 
related traffic engineering tools evaluate impact different network configurations traffic matrix 
example tool labs allows network operators experiment different igp configurations determine load distribution links 
incorporates models intradomain routing hot potato routing models formally described 
algorithm searches set ospf weights leads optimal link load distribution 
subsequent considers weight setting robust link failures changes traffic demands 
models bgp routing decision detail allows study changes bgp configuration egress point selection 
tools focuses network sensitivity routing changes specifically 
evaluate route selection traffic distribution considering different network settings impact change network 
impact intradomain routing changes interdomain routing egress point changes traffic quantified measurements isp networks 
study sprint network characterizes impact bgp changes traffic matrix 
study changes traffic matrix correlate bgp routing changes 
measured impact intradomain changes bgp route selection find intradomain changes cause large churn bgp routes 
study identified seriousness impact routing interaction isp networks motivated develop model analysis 

modeling routing behavior start section overview routing typical internet service provider isp network 
outline challenges modeling routing behavior impact internal routing changes selection external routes consequently traffic 
routing isp network internet interconnection autonomous system networks administered isps customers 
order customers isp able communicate customers router isp learn reach destination prefixes belong customers isps 
typically bgp exchanging reachability information external destination prefixes 
particular routers periphery isp speak external bgp ebgp routers outside customers isps learn destination prefixes reachable outside routers 
router periphery selects routes learned externally best reach announcement route neighbor traffic 
ignore exit point unreachable 
highest local preference 
lowest path length 
lowest origin type 
lowest med hop 
ebgp learned ibgp learned 
lowest igp path cost exit point hot potato 
configuration specific tie breaking older route lowest router id bgp speaker uses egress point route hot potato routing determines forward packets destination prefix uses route destination prefix distributes route routers inside network internal bgp ibgp 
addition running bgp ibgp ebgp runs interior gateway protocol igp responsible determining path routers inside network 
commonly ospf link state protocols 
link state protocols router learns entire topology network uses dijkstra shortest path algorithm compute shortest path routers network 
isp connects customer isp multiple physical locations 
leads scenarios bgp route prefix learned router periphery isp network 
example consider scenario shown routers learn reach prefix ebgp 
routers propagate route ibgp router indicated solid arrows 
point view routes equally terms bgp attributes 
choose egress point isp sending traffic destined break tie selects router closer terms igp distance egress point 
example picks egress point traffic destination prefix shown dotted line 
bgp best route selection igp distance called hot potato routing 
fact hot potato routing happens igp distance bgp hop egress point steps decision process router select best bgp route prefix 
table presents steps bgp decision process 
router uses decision process prefix basis applies steps outlined table prefix select route multiple bgp routes router learns prefix 
table shows router uses igp information ensure reach egress point route igp path network 
considers various bgp attributes routes 
step routes survive equally routes router compares igp distance egress points routes selects route lowest igp distance egress point 
transit core internet significant fraction routes selected hot potato routing 
include routes learned peer networks customers connect multiple locations 
hot potato routing cause router change routing decision igp distances egress points changed due failure planned maintenance traffic engineering event inside network 
call bgp routing changes due hot potato rule decision process hot potato changes 
table principle steps bgp decision process consider assume failure links path causes cost small change igp distance egress point closer prompting send traffic destined observed cases hot potato routing cause large fraction bgp routes router switch egress points due single igp change inside network 
abrupt hot potato routing changes significant impact control plane data plane 
goal understand changes happen analytic model bgp igp interaction sensitivity metrics characterize network sensitivity igp changes 
challenges modeling sensitivity routing traffic igp changes inside isp network requires understanding network uses igp bgp routing resulting routing matrix traffic demands traffic demands routing matrix combine generate traffic matrix 
outline main challenges modeling complex system igp 
freedom design internal routing infrastructure select appropriate igp route packets network 
scalability reasons ospf allow hierarchical routing dividing network areas 
areas employed packets forwarded shortest paths area may deviate shortest paths traverse multiple areas 
result model hot potato routing needs incorporate link weights division routers areas accurately model igp path cost computation 
bgp 
modeling complete set egress points prefix isp complicated due ibgp architecture network 
bgp standard requires full mesh ibgp connections bgp speaking routers network 
ensures routers know best routes learned router ebgp 
overcome resulting scalability issues networks large number bgp speakers usually structure form ibgp hierarchy router reflectors popular ways forming hierarchy 
unfortunate side effect bgp routes available subset bgp routers inside network 
lead scenarios different routers network different sets egress points 
routing matrix 
model igp bgp decisions need combine form routing matrix depends interaction protocols 
parts interaction standardized steps bgp decision process tiebreaking rule comparison igp costs 
implies interaction bgp depends router implementation specific network configuration 
traffic demands traffic matrix 
traffic demand placed network depends traffic sent received users attached customer peer networks locations connect network 
consequently traffic demands vary considerably time 
general hard obtain representative snapshot traffic demands resulting traffic matrix 
measurement estimation traffic matrix received considerable research attention late measurements aggregated sampled routers network capable collecting required data 
assumptions model reduce complexity modeling details simplifying assumptions 
routers know routes reach destination prefix 
mentioned earlier assumption valid bgp speakers organized full ibgp mesh 
ases ibgp hierarchy assumption longer holds 
case ibgp hierarchy condition model capture network sensitivity correctly router learns route picked best route learned ebgp learned routes prefix 

configured ibgp 
griffin wilfong describe scenarios ibgp misconfigurations lead route 
means routers forwarding path egress point prefix disagree selection egress point leading loops extreme case 
assume network configuration satisfies conditions specified avoiding loops 

stable bgp routing snapshots 
assume bgp policies ebgp routes stable 
model works snapshots bgp routes analyzes impact intradomain routing changes snapshot routes 

stable snapshots traffic demands 
similarly model takes input snapshots traffic demands analyze impact intradomain routing changes traffic 
assumptions allow model state routing system snapshots traffic 
model capture routing dynamics traffic load variations directly 
single underlying event may cause series routing messages routers network may take time converge consistent state 
model sequence messages exchanged reach stable routing state 
model routing change stable state stable state reached convergence phase 

regions region shifts section introduces concepts multidimensional data analysis inspired network sensitivity analysis 
describes graph model concepts graph regions region shifts form basis network model hot potato routing 
set definitions capture interaction bgp igp considering single destination prefix 
section build terminology define control plane data plane sensitivity metrics 
table summarizes notation introduced section remainder 
basic universe vertices undirected weight graph root set egress set rank root vertex region root vertex region index set vertex class graph transformations probability function graph transformations regional region shift function hij min st qr vertex uv eo sensitivity impact graph transformation est graph xy sensitivity control plane sensitivity set destination prefixes mapping prefixes egress sets routing shift function ced fsg node routing ced zh eo sensitivity routing impact graph transformation ba ced zm esg control plane ced zh eo sensitivity data plane sensitivity set ingress nodes ingress prefix traffic matrix total traffic volume entering traffic shift function zh jm st ingress node traffic sensitivity traffic impact graph transformation data plane sensitivity zh jm sg eo table summary definitions metrics 
multidimensional data analysis extracting useful information network configuration difficult task 
interested sensitivity network hot potato disruptions depends number factors including network topology routing policies location network specific network changes considered matters worse size fits metric capture routing sensitivity meaningful way 
approach managing complexity inspired area databases similar challenges arise online analytic processing olap :10.1.1.120.4505
key olap design arrange data multidimensional cube provide natural ways slice dice data multiple dimensions 
instance imagine dimensional olap data cube cell contains sales totals indexed product sold city sales day sales 
possible explore sales data dicing dimensional slices aggregating displaying slice various ways 
example fix product city obtain dimensional slice cube captures sales time chosen product chosen city 
slice compute average days find days maximum sales 
similar way fix city obtain dimensional slice cube captures sales products city days 
interesting characteristic data cubes dimensional data natural hierarchical structure 
example generate new data cube rolling time dimension level month location dimension level country product dimension level category 
presents olap data cube define purpose exploring impact hot potato routing network 
dimensions location routers network change representing fixed class changes single link failures single node failures ip prefixes 
find large number interesting hot potato sensitivity queries computed simple data cube data cell contains single bit 
bit set associated router changes egress points associated prefix associated network change applied 
explore fine grained hierarchy dimensional data example routers naturally grouped pops grouped regions turn grouped countries utility clear 
network changes locations ip prefixes data cube network sensitivity analysis 
section study slices data cube correspond ip prefix represented shaded surface 
define metrics region shift sensitivity computed surface 
definitions universe set vertices 
undirected weighted graph non empty set vertices say set root vertices 
root vertices represent set egress points destination prefix 
vertex local ranking root vertices 
function returns rank root vertex ov closer ranking function represents igp distance routers network consequently computation depends specific details intradomain routing protocol network configuration 
network igp hierarchy sum weights edges shortest path network complex igp structure wf computed model igp hierarchy 
graph ranking function root set root vertex induces region ce 

construction divides regions region shortest distance tree rooted note division regions partition vertices regions necessarily mutually disjoint 
instance wf wf ew allow vertices region model potential tie break decision hot potato step bgp consider subset greater universe vertices want study cases vertices deleted added graph decision process associated regions 
note define graph divided regions root set ov dr yt wf region index set vertex 
region index set vertex set root nodes closest egress set destination prefix entry routing matrix wf wf yt dr dr represents considering disconnected graph example graph presents internal topology shown 
shows division topology regions destination prefix previous example 
root set egress set 
nodes internal nodes 
arrow vertex vertex represents vertex successor vertex short est path root distances respectively region 
forwards packets egress point 
rp 
wg region represents routers forward packets egress point region wg similarly represents routers egress 
note router wf wg 
region region example division regions 
graph transformation function deletes edges vertices changes weight edges adds edges vertices 
class graph transformations set single edge deletions 
graph transformation tf probability associated tf compute region shift ot wf function follows sg qr intuitively function determines vertex experiences hot potato routing change vertex changes regions transformation applied shifting region boundaries 
note set root vertices removal addition element considered region shift 
root deleted longer belongs region consequently value region shift function 
possible types graph transformations root vertex change regions ot ewf rr re examine example 
suppose set single edge deletions 
consider scenario delete edge ip network deletion edge represents link failure 
presents resulting graph new division regions 
distance changed distance remained changes ot vertices affected change wf wf dr wf ot region region example division vertices regions deleting edge regional sensitivity analyze graph sensitivity graph transformations respect set root vertices construct dimensional surface point pair tf wf value point tf set ot wf wf introduce metrics capture sensitivity vertex region shifts impact graph transformation vertices graph computing averages maxima dimensional slices plane represented 
region region example graph vertices divided regions induced 
equal probabilities 
scenario vertices divided regions illustrated 
table presents cross tabulation values ot vertices 
column corresponds deletion edge column presents vertex sensitivity vertex 
vertices roots wf edge deletion cause change regions 
equal possible graph transforma tion deletion edge causes vertex change computation tivity similar 
describe row table define impact graph transformation graph sensitivity 
uv vertex sensitivity graph transformations vertices impact graph transformation regional sensitivity metrics computed twodimensional surface vertices graph transformations 
vertex sensitivity vertex sensitivity vw describes expected regional sensitivity vertex ov set graph transformations probability uv eo qr sg ast vertex sensitivity captures likelihood vertex change regions applying class graph transformations section discuss sensitivity set parameters graph class graph transformations graph transformation probability function conciseness notation omit parameters wbr define average vertex sensitivity useful evaluating sensitivity graph 
xy table sensitivity metrics root set 
general values wf vary wf close sensitive class graph transforma tions changes regions division induced definition root considering class graph transformations include deletion root vertices 
routers set egress points destination prefix prefer routes learned ebgp 
intradomain changes excluding router crashing impact route selection routers 
value wf means sensitive graph jr transformation consider graph root 
shows division regions new scenario table shows values sensitivity metrics 
example just route reach destination prefix edge deletion disconnects deletion edge graph disconnects root 
region example graph root set uv eo consider graph 
assume edges weight 
class single edge deletions independent impact graph transformation impact graph transformation determines fraction vertices experience region shifts proof 
eo qr sg ast xe qr sg ast table sensitivity metrics root set 
graph transformation 
st ast eo define graph sensitivity qr sg sg define metric captures expected impact class graph transformations probability function st ast revisit example analyze impact edge deletions 
row table presents wf values edge deletion 
deletion edge cause vertex change regions 
graph transformation impact 
deletion impact vertices graph transformations higher value row table presents scenario depicted 
root set deletion causes vertices change regions wf making vertex sensitivity root set graph trans formation values vary wf represents transformation causes region shifts graph wf happens transformation causes vertices graph change regions 
root set composed vertices graph graph transformation exception vertex deletions causes vertex change regions 
configuration sensitive changes graph wf note scenario extremely ip network 
peering available 
second set egress points prefix usually smaller number routers network 
hand deletion nv vertices change regions rp extreme prefixes egress point 
graph sensitivity average vertex sensitivity expected impact graph transformation allow compare region shift sensitivity wf wbr lemma 
eo eo dt dr compute graph sensitivity example 
twelve possible combinations experience region changes probability scenario region changes edge deletion 
graph sensitivity metric reflects increased sensitivity 
dt graph root set extremely robust graph transformations defined happens include vertex deletions 
values close arise graph transformation causes vertices change regions 
scenario contains transformation deletion roots 
general expect graph sensitivity dt 
network sensitivity terminology introduced previous section model hot potato routing 
metrics capture control data sensitivity hot potato changes 
regions hot potatoes model graph vertices represent routers edges ip level links edge weights igp cost associated link interface igp path costs computed igp hierarchy incorporated ranking function set egress points destination prefix represented root set assume routers announce equally routes reach assumption implies model considers set best bgp routes applying policies 
words considering routes tied step bgp decision process see table 
region set routers route announced egress point forward traffic destination prefix change result intradomain path cost changes caused underlying event fiber cut interface router crash igp weight change maintenance 
model intradomain routing changes graph transformation 
scenario region shift function determines router experiences hot potato change destination prefix particular intradomain routing change happens 
xy eo uv think vertex sensitivity metric net set intradomain routing changes determines router change selection egress point particular prefix 
impact graph transformation determine fraction routers experience hot potato change intradomain routing change 
graph sensitivity metric reflects impact internal routing changes egress point routers choose forward packets destination prefix 
definition regions router equidistant egress points consider different regions time 
practice router breaks tie rule 
instance default cisco routers prefer older route leads different decisions depending order routing changes 
model captures tie breaking rule simulate routing dynamics 
deterministic options breaking tie comparing id egress points potentially incorporated model choice tie break particular network configuration 
network robust independent routing dynamics network design counting luck 
definition region shift function introduced previous section captures worst case sensitivity considers chance vertex change regions wf wf dr refer definition region shift func ot tion destination prefix set egress points set egress points unique prefix 
case number destination prefixes share set egress points 
example networks peer locations peering routers 
example destination prefixes customers neighbor share set destination prefixes egress 
set mapping prefixes egress sets routing shift ced wf wf function represents fraction destination prefixes change egress points graph transformation ced zm sg qr 
fsg routing sensitivity metrics computed similarly metrics replacing region shift function function ced view routing shift function transformation dimensional slice data cube pair tf wf applying transformation ced wf pair tf wf obtain dimensional projection equivalent plane 
node routing sensitivity node routing sensitivity fraction route shifts router perspective 
represents fraction router bgp table changes egress points 
describes expected fst ced zh tie breaking rule node region time graph transformations may change region index cause hot potato change practice 
define best case scenario region shift function 
root vertex belongs yt wf consider experience hot potato change 
ced zm eo zh node routing sensitivity useful determining routers network susceptible hot potato changes 
metric differentiate router experiences route shifts experiences rare large route shifts 
differentiate cases represent worst case route shift introduce node ced zh st sg sg computing sensitivity metrics determine upper bound regional sensitivity 
similarly determines lower bound 
practice sensitivity metrics lie values depending tie breaking rule adopted order routing changes 
clarity notation define control plane data plane sensitivity metrics region shift function defining upper lower bounds case study isp network section uses definitions compute upper lower bounds network sensitivity 
control plane sensitivity far model focused analysis sensitivity considering destination prefix 
hot potato disruptions result large number routes changing simultaneously intradomain routing change 
add dimension data cube capture set destination prefixes analyze network state dimensional data cube understand impact graph transformation prefixes routing matrix 
node routing sensitivity represented average vertex sensitivity prefixes demonstrated lemma 
zm eo lemma 
zh proof 
zh ced zm st 
ced fsg ast qr 
sg ast qr 
sg ast 
consider graph 
assume number prefixes prefixes egress set remaining egress set 
table presents node routing ced tf sensitivity vertex wf ta wf ced computed values respectively 
single edge deletion causes change regions respect sensitive vertex fact vertex changes regions edge deletion root set changes regions root set examining indicates 
dr ced ced compute vertex sensitive graph transformation case routes change 
ast ced ast table routing impact single edge deletions graph root sets control plane sensitivity control plane ced sensitivity node routing sensitivity expected routing impact class graph transformations 
control plane sensitivity represents average fraction routing matrix shifts response internal perturbations 
average ced ced zm eo ced zh eo table node routing sensitivity graph root sets routing impact graph transformation vw rep routing impact graph ced transformation resents average fraction bgp route shifts routers intradomain routing change 
ced zm esg zh eo zh st control plane sensitivity example root sets ced control plane sensitivity provides aggregated view network sensitivity igp changes metric comparing robustness control plane different network designs 
useful determining robustness network worst case node routing ced sensitivity routing impact graph ced transformations 
high values ced mean router network high probability experiencing hot potato disruptions may lead router overload 
similarly graph transformations high routing impact may lead overload control plane 
robust network ced minimize ced est sg routing impact graph transformation represents average number entries routing matrix changed graph transformation 
similar node routing sensitivity define metric represent node impacted graph ced transformation 
zm esg zh st node routing sensitivity routing impact graph transformation defined terms impact graph transformation root set equivalence class 
lemma 
ced zh est 
est omit proof steps similar lemma 
table shows routing impact deletion edge deletion edge transformation greatest impact 
impacts vertex considering root set impacts vertices see table ced tf ced tf higher impact zm eo ced zm eo zm esg identifying disruptive graph transformations network operators plan maintenance activities longer term add extra links routers reduce avoid disruptive events 
practical constraints may prevent network free hot potato disruptions 
knowledge areas network vulnerable hot potato disruptions selecting location connect customers 
instance may economically advantageous connect customers interactive applications voice gaming locations susceptible disruptions 
data plane sensitivity previous section metrics study variations routing matrix caused igp changes impact hot potato routing control plane 
section combine routing traffic demands introduce metrics measure impact hot potato routing changes ingress egress traffic matrix 
set destination prefixes set ingress routers 
matrix representing ingress point destination prefix traffic demand matrix 
tf wf element represents volume traffic ingress router destination prefix redefine data cube study data plane sensitivity cell data cube tf wf wa contains ot wf bw wf tf wf value represents volume traffic node prefix changes regions applied ingress demand matrix total inbound traffic ingress node tf traffic shift function wf fraction traffic entering network ingress node switches egress points graph transformation wf wf represents metrics represent fraction volume traffic shifts egress points due intradomain routing change 
represents node experiences largest traffic shift graph transformation 
computing metric network operators statements single link failure shift traffic 
data plane sensitivity data plane sensitivity describes average ingress node traffic sensitivity expected traffic impact graph transformation 
captures average change traffic matrix 
zm eo zh zh jm st 
qr 
sg jm fraction traffic changes may experience transient performance degradation convergence changes forwarding path characteristics congestion longer rtts packet filters 
define data plane sensitivity metrics function traffic shift function 
ingress node traffic sensitivity ingress node traffic sensitivity expected fraction traffic originating ingress node switches egress points considering set graph transformations probability metric captures expected variation entry traffic matrix graph transformations define represent largest traffic shift experienced node considering set graph transformations zh eo vw describes zh st sg maximum data plane sensitivity represents worst case traffic shift experienced node considering graph transformations eo zh jm zh jm sg average maximum data plane sensitivity metrics allow compare different networks respect robustness flow traffic intradomain routing changes 
network operators may consider analyzing traffic specific customers applications separately 
customers interactive applications traffic shift may cause performance degradation 
studying data plane sensitivity subset addresses corresponding customers network customer connectivity location changed minimize disruptions due internal events 
zm eo zh st eo computed averaging total volume traffic shifts root sets possible graph transformations total traffic originated discussed routing sensitivity metrics traffic sensitivity ranges zero indicating traffic ingress point shift egress points con extreme transformation causes traffic originated switch egress points 
traffic impact graph transformation traffic impact graph transformation vw represents average ingress points fraction traffic shifts graph transformation captures variation traffic matrix graph transformation zh est zm sg zh est zm st zm eo zh est sg 
applying model section demonstrates utility model metrics analyzing sensitivity large tier isp network link router failures 
give brief explanation obtain input parameters model measurements collected operational networks 
analyze control plane sensitivity tier 
analysis data plane sensitivity network remains 
obtaining inputs model large isps routinely collect routing traffic measurement data network management purposes 
leverage data extract input parameters model follows network topology ranking function derived snapshots router igp configuration archives igp routing messages collected route monitor 
set destination prefixes prefix mapping computed joining collection bgp tables archives bgp routing messages 
snapshots traffic demands estimated link load statistics measured directly ingress routers 
isp uses ospf intradomain protocol network partitioned areas 
ospf monitor deployed isp network collects link state advertisements network 
monitor located point presence pop direct physical connection router area 
receives detailed information links routers area summarized information routers areas 
summarized information consists distance router non zero area border routers area non zero area question 
area topology summarized information construct snapshots network topology extract ranking function router area 
note detailed topology information non zero areas area topology summarized information allow compute exact ospf distance router area router network 
isp uses ibgp route reflector hierarchy inside network scalability reasons 
bgp monitor establishes ibgp sessions running tcp route reflector pop route reflectors belong ospf area 
monitor timestamps archives bgp updates received sessions dumps routing table day provide periodic snapshot best route prefix 
destination prefix compute union egress points selected route reflectors monitored 
model route reflector hierarchy mapping prefix egress set routers network 
case study isp network section analyzes control sensitivity isp network 
depth analysis control plane sensitivity focuses snapshot collected june 
evaluate control plane sensitivity evolves time 
control plane sensitivity analysis illustrate network operator model analyze control plane sensitivity network internal routing changes 
absence accurate failure models network network operators usually consider simple failure scenarios link router failures 
consider sets graph transformations set single link failures set single router failures excluding failures egress points 
assume failures set happen equal probability 
detailed topology information area consider failures area links routers 
furthermore focus area routers compute control plane sensitivity 
proceed exercise shows hypothetical network operator model answer queries different aspects network sensitivity link router failures 
sensitive network single link single router failures 
table presents control plane sensitivity network single link single router failures 
compute lower bound control plane sensitivity ced best case routing ospf areas form hub spoke topology area forms hub non zero areas form spokes 
may routes learned border routers announced internally 
situation router network border routers egress points impact sensitivity measurements 
shift ced function defined section 
similarly upper bound computed worst case routing shift function 
conciseness notation denote control plane router failures ced sensitivity link failures ced ced ced close zero indicating network quite robust single link router failures 
network relatively sensitive router failures link ced failures 
matches intuition failure router impact paths failure single link 
note ced represents control plane sensitivity averaged routers failures having low value single link router failures means network average robust set failures 
may outliers average perturb network 
question explores issue 
sensitivity ced lower bound upper bound single link failures single router failures table control plane sensitivity 
largest disruption happen network 
table presents worst case control plane ced sensitivity recall ced represents tf wf pair maximum routing sensitivity network 
upper bound sensitivity router extremely sensitive link router failures 
assume represents worst case means shifts indicates scenario 
values destination prefixes consequence graph transforma tion leads average network robust single link router failures exists set routers extremely sensitive certain failures 
worst case ced sensitivity lower bound single link failures single router failures upper bound table control plane sensitivity 
hypothetical operator deeper slicing data cube failure computing impact individual failures slicing router computing router routing sensitivity 
failures disruptive 
shows routing impact ced link router failures 
top bar plot upper bound sensitivity defined section bottom computed ced lower bound computed ced middle point average notation remaining plots case study 
axis fraction graph transformations sorted upper bound routing impact 
average routing impact link router failures low 
instance ced link failures router failures 
clear plot failures considerable impact routers 
particular router failures ced means impact average destination prefixes routers 
impact link failures lower may routers experience large route shifts link failures 
determining disruptive failures operator information making decisions traffic engineering network provisioning 
step understand routers sensitive hot potato disruptions 
routing impact graph transformations rm router failures link failures fraction graph transformations routing impact router link failures 
routers sensitive 
shows upper lower bounds node routing sensitivity link router failures 
axis fraction routers area sorted upper bound routing sensitivity 
routers experience routing changes average 
average sensitivity may best indicator router experiences small route shifts number failures may node routing sensitivity ced router experiences large route shift failures 
case arguably disruptive 
interesting note high variance routers 
router sensitivity internal changes depends location relative closest second closest egress points destination prefixes 
variance routing sensitivity routers consistent empirical findings 
rank routers number hot potato changes measured algorithm rank routers node routing sensitivity single link failures find ranking 
single router failures ranks agree 
sound counter intuitive metrics depend failure model 
router failures rare events practice surprising empirical results consistent single link failure sensitivity metrics 
observe node routing sensitivity average low surprising consider failures equally probable ced represents average sensitivity possible failures 
operator investigates node routing sensitivity analyzing worst case routing shift router 
largest routing shift experienced router 
figures worst case node routing sensitivity ced single router failures single link failures respec tively 
routers experience considerable hot potato node routing sensitivity rm router failures link failures fraction routers node routing sensitivity router link failures 
disruptions router failures 
impact particular router failure usually limited routers usually located pop 
fewer routers experience disruptions caused link failures compared caused router failures 
worst case node routing sensitivity max rm fraction routers worst case node routing sensitivity router failures 
important note wide gap lower upper bounds nodes figures 
suggests substantial fraction routing shifts router depends non deterministic tie breaking step bgp decision process 
note order routers different 
comparing node routing sensitivity router failures link failures router find routers sensitive link failures router failures 
counter intuitive scenarios may arise practice hot potato changes occur graph transformation link router failure changes relative distance router closest second closest egress points 
consider example assume egress points destination prefixes 
node shift routes egress failure link failure node cause shift 
indicates optimizing network topology configuration minimize sensitivity type graph transformations may result increase sensitivity type transformation 
note routing changes may unavoidable overloading links leading old egress points 
discuss trade offs section 
worst case node routing sensitivity max rm fraction routers routing shift rm router failures link failures fraction graph transformations worst case node routing sensitivity link failures 
example showing higher sensitivity single link failure single router failure 
analyze sensitive routers 
call router rightmost router router ced highest router highest router figures distribution route ced shifts routers respectively 
small fraction failures cause worst case hot potato disruption 
sensitive routers robust changes network small fraction failures cause large routing shifts 
distribution control plane sensitivity router snapshot network state 
large tier isp hundreds routers links consequently state network constant flux due failures maintenance activities 
selection representative snapshot network particularly challenging 
study snapshot wf month february june determine sensitivity analysis choice network snapshot variation control plane sensitivity time 
presents control plane ced sensitivity snapshot month month period 
network control plane sensitivity types failures low 
seen earlier network relatively sensitive router failures link failures 
observe dramatic variation ced month period just small decrease months decrease month 
decrease control plane sensitivity indicates average network robust router link failures time 
router failures link failures router failures link failures routing shift rm control plane sensitivity fraction graph transformations months distribution control plane sensitivity router 
network operators knowledge routers sensitive hot potato disruptions deciding location connect customers 
instance customers interactive applications voip gaming sensitive forwarding instabilities caused hot potato change 
isp may decide connecting customer sensitive location may worth cost long haul link 
temporal variation sensitivity sensitivity analysis previous section focused sensitivity router link failures time 
discussion analysis control plane sensitivity shows average isp network robust link router failures 
room improvement link router failures cause routers shift egress points large number destination prefixes 
identifying sensitive routers disruptive failures network operators designers information improve network robustness 
doing design guidelines operational practices considered minimize impact internal routing changes link node redundancy 
approach minimize sensitivity replicate paths network 
clearly approach expensive practice 
analysis shows critical links routers 
replicating network components help minimize hot potato disruptions 
model iteratively determine network sensitivity addition new components 
selection peering locations 
approach minimize sensitivity egress point peering router 
solutions desirable practical reasons peering locations depend business relations feasible isp peer isps location ii selecting peering location destination prefix desirable reliability traffic engineering perspective 
isps knowledge locations network sensitive disruptions prioritize adding connections peers locations 
reconfiguring network 
selecting best configuration link weights reduce network sensitivity adds extra dimension problem optimizing link weights traffic engineering 
optimizing link weights type graph transformations may increase sensitivity types accurate failure models help guide analysis 
reconfiguration link weights avoiding hot potato disruptions planned maintenance activities 
case operators know advance graph transformation applied graph 
model identify disruptive configuration link weights deployed event 
clear discussion factors represent trade network designers operators need consider managing networks 
sensitivity analysis assist making trade offs 

develop methods characterizing network sensitivity intradomain routing changes hot potato disruptions ultimately improve network robustness 
propose describe analytic model interaction intra interdomain routing impact control data planes isp network 
model define set metrics describing network sensitivity intradomain routing perturbations 
study control plane sensitivity large tier isp link router failures 
analysis demonstrates utility model identifying routers particularly sensitive internal perturbations failures cause disruptions 
plan improve accuracy model incorporating ibgp hierarchies 
plan derive realistic failure models study control data plane sensitivity models 
model basis tool network operators improving robustness networks 
approach building robust networks focused improving network design routing protocols exist today 
network robustness problems intrinsic way bgp reacts small igp cost changes 
newer routing protocols designed goal network wide robustness mind 
acknowledgments jennifer rexford encouragement feedback stage 
supported teixeira research help support especially albert greenberg 
supported part fellowship capes brazil support ucsd center networked systems 
voelker supported part darpa contract 
jay provided invaluable guidance understanding backbone network 
christophe diot alex snoeren shepherd anja feldmann anonymous reviewers helpful comments 

rekhter li border gateway protocol bgp rfc march 
moy ospf version rfc april 
osi routing tcp ip dual environments rfc december 
teixeira shaikh griffin rexford dynamics hot potato routing ip networks proc 
acm sigmetrics june 
feldmann greenberg lund reingold rexford traffic engineering ip networks ieee network magazine pp 
march 
rexford thorup traffic engineering traditional ip routing protocols ieee communication magazine october 
thorup optimizing ospf weights changing world ieee selected areas communications vol 
pp 

feamster rexford model bgp routing network engineering proc 
acm sigmetrics june 
agarwal 
chuah bhattacharyya diot impact bgp dynamics intra domain traffic proc 
acm sigmetrics june 
internet routing architectures 
cisco press second ed 
feldmann greenberg lund reingold rexford true deriving traffic demands operational ip networks methodology experience ieee acm trans 
networking vol 
june 
medina taft bhattacharyya diot taxonomy ip traffic matrix estimation existing new directions proc 
acm sigcomm august 
zhang lund donoho information theoretic approach traffic matrix estimation proc 
acm sigcomm august 
griffin wilfong correctness ibgp configuration proc 
acm sigcomm august 
gray bosworth layman pirahesh data cube relational aggregation operator generalizing group cross tabs data mining knowledge discovery pp 

chaudhuri dayal overview data warehousing olap technology acm sigmod record vol 
march 
gupta harinarayan quass aggregate query processing data warehousing environments vldb pp 

shaikh greenberg ospf monitoring architecture design deployment experience proc 
usenix symposium networked systems design implementation march 
bgp best path selection algorithm www cisco com warp public shtml 
crovella diot kolaczyk taft structural analysis network traffic flows proc 
acm sigmetrics june 
