oters tree efficient recovery subcasting reliable multicast protocol dan li david cheriton department computer science stanford university cs stanford edu presents reliable multicast protocol oters organizes receivers fusion tree matches multicast delivery tree source uses tree fuse naks subcast retransmissions 
protocol requires extensions current internet network layer multicast route backtracing subcasting 
argue extension simple natural low overhead extensions internet 
simulations reliable multicast protocols demonstrate approach substantially reduces recovery latency traffic load compared previously proposed approaches 

designing reliable multicast protocol scales audience sizes allowed internet challenge 
number receivers grows thousands millions significant probability packet loss receivers transmission 
lost packets entire multicast delivery tree easily double bandwidth load network 
packet loss due congestion particularly tail circuits multicast retransmission lead effect increasing packet loss 
techniques cascaded unicast retransmission deferred retransmission increase time recover packet loss recovery latency limiting application domain 
general choices techniques date force trade high network traffic high latency recovery 
approaches rely complex extensions routers entailing significant state raising concerns scalability practicality 
reliable multicast protocol called oters tree efficient recovery subcasting 
protocol requires simple low overhead extensions network layer multicast route backtracing subcasting 
simulations reliable multicast protocols ns show oters achieves low recovery latency imposing low network traffic load network 
rest organized follows 
section describes required network layer extensions 
section describes oters design extension called scream 
section presents simulation results reliable multicast protocols 
section discusses related 
section concludes 

network extensions oters oters relies extensions network layer multicast route backtracing subcasting performance 
extensions provided simple modifications igmp traceroute ip encapsulation respectively described 

multicast route backtracing multicast route backtracing facility subscriber multicast address determine sequence routers specified source 
particular multicast route backtracing query sent specifies hop limit response contains list ip addresses hops multicast route leading corresponding incoming interface multicast packets arrive 
hop limit allows incremental query multicast delivery tree prevents implosion source 
multicast route backtracing implemented subset functionality provided igmp traceroute allows host trace multicast route host group source destination query response returned unicast multicast address response contains comprehensive hop information interface addresses timestamps packet counts note runs shared tree source specific multicast routing domains mix 
designed comprehensive network management diagnostic programs 
trace infer multicast routes detailed information sources sending groups rates 
security privacy concerns may prevent facility fully supported network administration boundaries 
example firewalls block traffic border domains 
address security concerns propose restricted form ip addresses query 
routers may leave fields response template empty fill incoming interface field 
stub networks block outbound traffic transit networks block traffic 
router may forward packets appending response record 
account discontinuous records responding router copies current ttl packet record 
semantics comprehensive restricted coexist 
network administrators select semantics router requester local security policy 
network management multicast justifies provision just supporting oters 

subcasting subcasting facility multicast packet subtree multicast delivery tree particular group specified multicast address router root subtree 
refer subcasting propose modified version ip encapsulation implementing subcasting allowing trust originality packet 
particular denote ip packet source destination payload 
subcast packet appears payload group member originates packet unicasts router swaps inner ip header outer ip header stripping outer header conventional encapsulation 
packet payload note source stub network blocks incoming traffic routes close source inside stub network may traced 
highest level subgroups may formed outside stub network seek retransmissions directly source 
number subgroups fanout border gateway 
inner header minimal forwarding header relevant fields swapped 
multicasts packet outgoing interfaces deliver data source multicast group single source model ip multicasting proposed express subcasting simpler multicast subcast packet originate source 
see section subcasting implemented loose source routing 
cases receiver assured source subcast packet trust network infrastructure 
contrast conventional ip ip encapsulation originator subcast packet indicated source address inner ip header determined receiver 
potential source spoofing multicast routers may refuse forward packets limiting availability 
mechanism requires allocation new ip protocol number support routers stations 
implementation straight forward introduce new state routers simpler proposals extend network layer reliable multicast section key aspect efficiency oters 
subcasting supported form useful multicast applications management facilities mobile ip pim sm security concerns taken account internet 
extensions provide powerful simple low overhead facilities natural extensions internet layer 
note extensions slight modifications existing experimental facilities network layer modifications required growing security concerns internet 

oters protocol design oters consists loss recovery protocol lrp fusion tree formation protocol 
organizes multicast group members oters fusion tree oft context term refers root oft subtree router 
subgroup refers group members subtree 
oft application layer tree rooted multicast source subtree subtree multicast routing tree subtree designated receiver dr group member located subtree close knows ip address 
subgroups hierarchical subgroup member dr descendant subgroup 
special case group members top level subgroup source dr member dr multiple 
term fusion tree tree serves aggregate positive negative acknowledgments 
dr top nearest source dr describe lrp assuming oters fusion tree established describe 
protocols discussed scenario 
oters equally applicable communication applying lrp source 

loss recovery protocol lrp lrp handles retransmission data packet missing packet detected gap sequence numbers timeout 
receiver missing packet referred requester immediately unicasts nak dr requester dr requests retransmission subcast top 
request unicast retransmission 
receiving nak dr ffl requests packet dr receive packet requested packet 
case dr closer source subgroup members normally detect loss earlier 
ffl ignores nak detected loss requesting subcast retransmission subcast repair packet sent received ignoring nak case avoids unnecessary repairs nak sent time shortly requester receive repair 
ffl retransmits segment 
instance lrp operation illustrated 
naks retransmitted exponential backoff initial timeout round trip time dr elapsed time exceeds threshold proportional oneway delay source re invoked locate dr handling misbehaving drs network membership dynamics 
lrp efficiently repairs correlated losses oft subcast retransmission 
packet drop occurs resulting loss receivers subtree underneath point drop dr just drop point retransmits lost packet 
subcast retransmission repairs loss entire subtree assuming retransmitted packet dropped links 
inefficient case losses independent subcast repair triggered expected uncommon means round trip time requester 
subcast repairs round trip time sum way unicast delay dr way subcast delay dr unicast repairs unicast round trip time dr 
lrp 
dr unicasts nak designated receiver dr detecting packet loss 
dr responds repair subcast subgroup top assuming dr received packet 
bold links indicate path subcast retransmission 
studies mbone handley show strong loss correlation 
argue subcast transmissions typically retransmit members received packet 
note dr high delivery tree unreliable link source cause poor behavior 
lrp efficient network resources routers multicast forwarding state links subcast retransmission original data transmission 
lrp low latency receivers closer source generally detect loss earlier receivers typically initiates recovery process entire subtree 
nak sent upstream receiver starts recovery process peers subtree downstream receivers detect loss reducing recovery time 
early start effect average loss recovery latency individual receiver may smaller average round trip time 
see section 
fusion tree formation protocol builds oters fusion tree incrementally identifying multicast routing tree multicast route backtracing selecting dr 
group member assumed know ip address multicast group multicast source hop count source loss rate minimal transmission delay source packet subcast member specifies elements gamma hop distance gamma transmission delay gamma loss rate initial multicast ttl value packet 
receiver packet infer hop distance subtracting remaining ttl initial ttl 
member node defined superior dr compared node tuple rk corresponding member dictionary order tuple rk member rk hop distance similarly prevent looping protocol considered equal difference lies mean 
selecting minimal loss rate dr reduce amount unwanted retransmissions subcast entire subtree 
member node performs search dr follows 
unicast query hop limit obtain ip address potential hops away 
initially set 

subcast packet group packet delivered group members subtree rooted including receiving subcast packet set timer equal times delay 

packet received specifies node superior dr timer expires record node dr search 
record dr increment go step 
dr packets top heartbeat rate 
member receive packet dr consecutive heartbeat periods selects best dr heartbeat arriving resumes search actively find 
receiving packet minimal transmission delay reliable measure topological distance average delay 
obtained packets received source contained initial ttl timestamp 
source receivers clocks coarsely synchronized milliseconds 
optimization ttl subcast packet restrict delivery links lower receive subcast 
effectiveness optimization may limited administrative boundaries cases 
ffl ignores packet dr dr downstream dr respond appropriate 
ffl packet superior dr sender ffl records sender dr stops search process 
possible extension measure round trip time current dr candidate pick closer 
shows round search process 


participating formation higher level subgroup selected dr subgroup 
packet potential ttl 
bold links experience subcast transmission ttl scoping preventing reaching lower part tree 
expected respond packet concludes superior dr assuming links indicate higher delay loss rate 
protocol specified assumes routers support multicast route backtracing subcasting 
allow routers non conforming routers increment failing receive response query reach responding router skipping non conforming intermediate routers 
presence non conforming routers simply increases size subgroups reduces granularity subcast retransmission making efficient 
extreme router support oters degenerates single subtree equal multicast delivery tree multicast retransmission source 
incremental deployment router features feasible 
increasingly oters simply increase pressure networks upgrade routers capabilities 
overloaded dr force potential subgroup members join subgroup dr sending heartbeats limited ttl ignoring round trip time rtt probes naks 
situation subgroups usually small network topology extremely flat topology large average router fanout node low latency nodes 

scream extension oters source constrained repair multicast scream restricts traffic including repair traffic come multicast source 
directly subcasting repair unicasts repair request source 
source repair intended 
scream allows oters function multicasting model simpler encapsulation scheme described section 
conventional multicast allows receivers safely ignore retransmissions unknown nodes apply source filtering selectively disable delivery packets proposed igmp 
prevents potentially bogus retransmissions may come wide area networks originator identity hard verify 
receiver unable malicious failed nodes flooding multicast group subcast packets 
lastly scream provides better congestion control source informed losses locations dictate data rate repair rate 
scream incurs extra delay round trip source 
simulations indicate significantly increase recovery latency 
may lead nak implosion excessive load source losses independent subtrees 
situation arises frequency network service application performance poor scream significantly worse application 
truly large scale dissemination trusted regional logging servers deployed handle retransmission load 
scream wide area network direct dr retransmission local networks corporate campus intranet retransmission need traverse tail circuit local network 
local dr retransmissions verified source address generally trustworthy 
reduces recovery latency retransmission load source 

simulations analysis implemented oters scream ns reliable multicast protocols see section srm multicast retransmission duplicate avoidance da 
srm ideal identical srm da finds lower bound recovery latency maximizing recovery traffic 
tmtp expanding ring search ers fusion tree limited scope multicast 
tmtp unicast tmtp cascaded unicast loss recovery 
simulation environment simulation driven packet stream cbr constant bit rate source multicast group 
routers run dense mode multicast routing similar dvmrp 
group members join multicast group time start measuring rtts forming fusion tree 
data stream runs seconds starting time second fusion tree formation half way 
overlapping allows realistic protocol evaluations assumption network topology group membership may change significantly seconds may trigger major parts fusion tree rebuilt 
transit stub network topologies generated gt itm 
simulations run times different seeds 
topologies nodes nodes 
percent nodes randomly picked multicast group members 
links symmetric packet error rate 
transmission delay approximately ms local links ms links outside stub domains ms links connecting transit domains 

simulation results node topologies shows network traffic protocols averaged simulation runs 
oters scream incur substantially lower network traffic recovery protocols tmtp unicast closest performance 
shows station measured recovery latency time loss detected time repair received 
oters recovery latency close srm implemented original ns simulator 
da period chosen half deterministically half probabilistically 
exponential backoff naks disabled exclude delay factor 
invented variant tmtp comparison purposes 

network traffic loss recovery node topology 
source data scream shown packet hops 
packet hops tracks number forwards routers number distinct packets generated stations 

average loss recovery latency node topology srm ideal lower bound having level recovery traffic far 
oters improves srm avoids da delay contributes roughly ms srm recovery latency 
da delay cascade delay tmtp experiences highest recovery latency 
tmtp unicast cascade delay better tmtp far worse latency oters 

simulation results node topologies second set simulations run larger node topologies demonstrate differences protocols scale 
multicast scale increases differences recovery traffic protocols grow exponentially 
shows network traffic logarithmic scale 
session traffic added reflect cost fusion tree formation session state synchronization negligible node topologies significant larger scales 
figures show oters scream vari 
network traffic loss recovery node topology addition session messages 
source data scream packet hops 
ant provide greater benefit larger scale improving 
average loss recovery latency node topology orders magnitude just going nodes 
particular oters achieves significantly lower recovery latency just lower bound recovery traffic times srm ideal times srm times tmtp times tmtp unicast 
scream offers competitive combination recovery traffic recovery latency 
oters session messages times tmtp times srm 

early start effect early start benefit claimed oters demonstrated table provides measurements node simulation 
average recovery latency group members average rtt 
example nodes reside stub network cases node recovery processes www dsg stanford edu dli ts gif topology 
node id losses recovery latency rtt ms rtt ms rtt ms rtt ms rtt ms rtt ms rtt ms rtt ms rtt ms rtt ms table 
average recovery latency relative average round tip time oters node topology sped upstream peer node 
results average recovery latency low rtt 
hand node far apart 
rarely benefits recovery process initiated node rarely recovers earlier rtt 
oters able reduce average recovery latency topologically grouping receivers 

related previous explored various nak retransmissions schemes network support reliable multicast 
compare oters 
multicast retransmission schemes table summarizes properties retransmission techniques including subcasting 
summary shows subcast retransmission faster efficient conventional techniques operational overviews listed 
ffl cascaded unicast tmtp unicast 
requests repairs unicast subgroup member dr correlated losses repaired individually generating traffic multicast repair 
repairs may retransmitted multiple times reaching subgroups bottom fusion tree resulting cascade delay 
ffl multicast duplicate avoidance da srm 
requests repairs multicast entire group 
transmitting request repair sender delays da period 
transmission suppressed identical received period 
repairs multicast members may need 
ffl limited scope multicast tmtp 
requests multicast da 
dr responds requests responds immediately 
requests repairs multicast host group ttl equal subgroup radius restrict delivery scope source specific routing domains 
approach incurs da delay cascade delay suffers coarse granularity ttl scoping current internet 
ffl multi group multicast 
subgroup multicast group address 
member joins subgroup ancestor subgroups including source 
requests unicast dr dr multicasts repair multicast address corresponding subgroup 
approach requires multicast addresses routing state 
simulations section show techniques incur substantially recovery traffic achieving recovery latencies longer subcasting 
techniques form hierarchical structure group members 
structures weaker characteristics oters fusion tree 
particular ers structure differs constructs subgroups closeness group members 
ttl rtt wise closeness necessarily reflect relative positions multicast routing tree multicast paths shared 
protocol uses fusion trees model delivery tree correlated losses tend scatter subgroups incur retransmissions 
early start occurs average recovery latency higher 
subgroup members receive unwanted retransmissions caused unrelated losses subgroup 
rmtp applied subcast retransmission statically configured subtree roots 
oters fusion tree provides automatic configuration making larger scales practical 
rmtp address issue ensuring originality subcast determined subcasting single source multicasting model 
demonstrated simulations subcast scream oters costly network traffic tmtp tmtp unicast costly srm srm requests naks repairs forwarded widely limited scope multicast 
oters triggers fewer dvmrp prunes srm tmtp protocol request repair network traffic network state cascaded unicast individually cascade delay multiple unicast zero multicast da da delay da delay unwanted repairs members limited scope multicast da delay cascade delay unwanted repairs members multi group multicast early start immediately minimal subgroups subcast early start immediately minimal zero table 
comparison retransmission techniques 
tmtp unicast instances uses multiple source specific delivery trees 
compared scream particularly attractive reliable multicast single source model proposed express 
oters efficient session messages demonstrated section reasons 
oters drs new members generate subcast packets group member tmtp srm multicasts session messages 
second tmtp request may rejected dr forcing requester try drs 
oters eliminates traffic associated delay group member unilateral decisions dr oters faster 
network support research explored adding router support fast efficient loss recovery reliable multicast 
subcast approach network forwards naks hop hop dr 
repairs subcast 
oters maintains implicit fusion tree network layer cost additional network state protocol processing 
requires new ip options new igmp packet format 
second approach subject failures nak forwarding malfunctions application direct control 
additional interactions nak senders routers necessary overcome applicationlevel malfunctions 
conversely oters application controls fusion tree structure making flexible identifying failures restructuring fusion tree promptly 
third subcast naks examined hop order forwarded go slow path routers 
takes longer nak reach normal unicast multicast naks 
oters hand incurs exceptional hop processing overhead naks repairs 
hop slow path forwarding query occurs part infrequently 
general purpose facility useful network diagnosis network management applications just reliable multicast 
subcasting ttl alternative encapsulation subcasting scheme far attractive 
ttl control subcast packet ttl forwarded reverse path multicast route hops multicast subtree hop router 
similar subcast subcast naks repairs forwarded hop hop slow path routers inefficient network application 
pgm naks forwarded confirmed hop source 
routers establish layer retransmission soft state nak ed segment multicast session forward retransmissions interfaces naks received 
network decides naks fused re naks forwarded making harder fine grained application control timing 
pgm exhibits disadvantages noted subcast approach 
routing label approach extends ip multicasting rich forwarding semantics support delivery packets specific subset group subtree multicast routing tree 
approach conceptually superset subcast approach pgm implies protocol complexity 
additional network state computed updated multicast session membership change regardless application needs 
routing labels maintained network layer oters stations cache topology information ip address dr greatly simplifying network layer lowering cost supporting deploying reliable multicast 
cache router approach lets routers cache retransmit dropped multicast packets 
approach consumes scarce network buffer space complicates reliability drop notifications router timeout retransmit drop notification 
summary performance oters merit complex network layer support discussions scheme research community 
simple extensions oters requires 
open question reliable multicast protocol achieves performance comparable oters simpler network extensions 

oters provides reliable multicast low recovery latency low recovery traffic levels requiring minimal additional network support 
simulation evaluation oters show recovery latency times lower bound incurring times network traffic recovery protocols times protocol produces minimal recovery latency section 
oters single source multi source multicasting case shared tree source specific multicast routing 
key technique oters multicast route backtracing facility dynamically trace multicast delivery tree order identify building fusion tree models multicast delivery tree adapts network membership changes 
key technique exchange subcast packets group members select positioned designated receiver dr subtree handles nak fusion data retransmission receivers subtree 
final key technique oters subcasting facility retransmit packets dr subtree fast efficiently repair packet losses entire subtree 
techniques oters provides best trade network performance performance demonstrated simulations recovery latency recovery traffic competing requirements reliable multicast protocol design 
oters require additional network support internet multicast route backtracing subcasting 
extensions simple implement minor modifications existing experimental internet facilities incur relatively low overhead routers appear uses outside oters reliable multicast 
oters imposes additional state buffering network layer requires special hop processing naks repairs 
extensions fit stateless datagram service model internet layer 
oters offers potential applications requiring low latency reliable multicast deployed scale allowed internet 
hope see inter network layer extensions subcasting deployed internet potential reality 
calvert zegura 
gt internetwork topology models gt itm 
www cc gatech 
edu fac ellen zegura gt itm deering cain 
internet group management protocol version 
internet draft draft igmp txt progress december 
estrin farinacci helmy thaler deering handley jacobson liu sharma wei 
protocol independent multicast sparse mode pim sm protocol specification 
rfc june 
fenner casner 
traceroute facility ip multicast 
internet draft draft ietf traceroute ipm txt progress 
floyd jacobson liu zhang 
reliable multicast framework light weight sessions application level framing 
acm transactions networking november 
handley 
examination mbone loss distributions 
north east isi edu march 
holbrook cheriton 
express multicast extended service model globally scalable ip multicast www dsg stanford edu holbrook express 
holbrook singhal cheriton 
log receiver reliable multicast distributed interactive simulation 
sigcomm 
levine garcia luna aceves 
improving internet multicast routing labels 
ieee international conference network protocols october 
levine garcia luna aceves 
case concurrent reliable multicasting shared ack trees 
proc 
acm multimedia conference 
lim kim 
ip extension reliable multicast 
internet draft draft lim ip reliable multicast txt progress 
lin paul 
rmtp multicast transport protocol 
infocom 
papadopoulos varghese 
error control scheme large scale multicast applications 
infocom march 
perkins 
ip encapsulation ip 
rfc october 
farinacci lin 
pretty multicast pgm transport protocol specification 
internet draft draft pgm spec txt progress january 
thaler estrin meyer 
border gateway multicast protocol protocol specification 
internet draft draft ietf gum txt progress october 
ucb lbnl vint 
network simulator ns version 
www mash cs berkeley edu ns partridge deering 
distance vector multicast routing protocol 
rfc 
yavatkar griffioen sudan 
reliable dissemination protocol interactive applications 
proc 
acm multimedia conference 
