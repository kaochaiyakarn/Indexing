engineering stable scalable tcp variant cued infeng tr tom kelly laboratory communication engineering cambridge university engineering department street cambridge cb pz united kingdom cam ac uk june describes engineering new congestion control tcp motivated theoretical results suggest system flow control protocol exhibit scalable connection rates stable operation decoupling congestion detection response algorithms 
protocol designed suitable low loss low delay ip network adapted current ip networks tcp connections need scale high bandwidths high latency links 
incorporates packet pacing scheme variant traditional slow start parameter scaling remove round trip time bandwidth allocation bias 
simulation results context low loss low delay ip network show strengths weaknesses protocol interconnected simple static congestion detection algorithm routers 
concluded protocol maintain low loss low delay packet service model consistent throughput allocations needed improve link utilizations 
internet composed heterogenous networking technologies ciently supports decentralized multiplexing resources ability instrumental success 
link ip network experiences packet arrival process mean greater capacity termed congested 
congestion persistent link start drop packets bu ers full dropping implicit congestion signal systems inferred tcp sender timeouts duplicate selective 
tcp congestion control closed loop control implemented communicating systems flow sending rate implicit signaling 
control reduces packet loss experienced congested links possibility congestion collapse arose internet persistent congestion left uncontrolled 
outcome congestion control allocation scarce link bandwidth flows traversing congested link 
congestion control proved remarkably successful providing robustness sharing contended resources wide range operational networks successful remained largely unchanged 
problems remain tcp current congestion control mechanisms operation increasing number scenarios 
current tcp congestion control packet drop signaling leads non negligible loss rates high inter packet jitter packets traversing congested links detrimental applications voice ip hinder deployment 
current tcp congestion control mechanisms rely properties underlying network elements performance properties include significant bu ering space time low link bit error rates order packet delivery su cient bandwidth delay products self clocked window sending scheme 
relaxing constraints aid designers network elements example smaller bu ering requirements allow high speed router designs simpler bu ering schemes faster dense sram memory complex bu ering architectures slower denser dram memory similar reasons help designers optical packet switches 
current congestion control introduces performance problems connections large round trip times high bandwidths situation currently scientific research networks 
problem arises current flow control algorithm increases congestion window packet round trip time 
consider connection mbps available bandwidth round trip time ms packets size bytes connection take seconds reach equilibrium sending rate packet drop 
explicit congestion notification ecn routers actively signal congestion setting ecn codepoint ip header proposed 
proposal mandates tcp primarily ecn signaling aid systems detection congestion responding way marked packet traditional tcp dropped packet 
ecn provides performance advantages short transfers transaction rates heavily ected packet retransmissions delays imposed packet loss detection performance evaluation ecn tcp proposed standard see 
suggested protocols ecn order provide low loss low delay packet service model significantly reduced packet bu ering requirements network elements 
low loss low delay packet service model taken mean packets transmitted meet queues order packets queueing element loss rates order ambitious performance target judge system network control aims maintain link utilization 
implicitly network better ort service model capable supporting wider range applications need complex signaling heterogenous network elements administrative boundaries 
case low loss low delay congestion control framework systems perspective 
presents new congestion control designed stable control theoretic modeling scalable low high bandwidth delay products capable operation low loss low delay ip network framework 
organized follows section gives overview mathematical models related new protocol built section discusses implementation new tcp variant congestion detection algorithm routers section describes simulation results displaying strengths weaknesses protocol design section 
background mathematical modeling lead suggestion low loss low delay network constructed elastic tra appropriately designed flow control schemes tra appropriate system connection acceptance control 
possible necessary build elastic rate control schemes aggregate load arriving link maintained close link capacity su ciently small timescales call rate matching 
problem network rate matching round trip timescales modeled considering properties di erential equations describing individual source sending rates 
rate matching correspond di erential equations converging quickly equilibrium point displaying control theoretic stability equilibrium point 
theory suggests possible implement new scalable congestion control flow rates stable equilibrium point independent round trip time signals congestion receiver sender learns congestion packets sent back receiver tcp 
design datagram network architectures example edge driven variant atm available bit rate abr service designed similar methods 
transmission rates provided certain constraints met independently routers systems 
impact flow level network performance due allocation rates di erent flows network studied sharing mechanism emphasized sharing policy 
related authors pursued system controlled networks ecn 
marking variant source response designed provides feedback encoded marking probability network driven low loss low delay operation 
approach applies similar design techniques requires tighter coupling systems marking scheme encoded feedback scheme slow response transients sources need average feedback signal 
simulation results regarding convergence stability early ecn tcp variant 
seen building considering flow control scalable di erent convergence properties 
adaptive virtual queue algorithm achieves higher link utilizations adaptation timescales longer round trip time observed utilizations link 
designing congestion detection algorithms considered complementary flow control algorithm design adaptive algorithms seen interesting area 
parallel lead flow control algorithm class explored similar increase decrease parameters arrived heuristic stochastic process arguments 
tackle problems arising low loss low delay network resulting issues tcp implementation 
contrast related aggressively pursues goal designing robust protocol scalable low high bandwidth delay products capable delivering low loss low delay packet service ip network ecn signaling 
control theoretic modeling brief overview network modeling di erential equation fluid limits complete overview see results 
consider ecn datagram network probability packet marked link static function instantaneous link load source destination pair identified route probability marked acknowledgment received source route time sum marking probability link forming route return delay link acknowledgment destination route denoted load link forward delay source route link notice route round trip time datagram networks window flow control schemes tcp window cwnd maintained source maximum number transmitted packets treatment sum approximation marking probability route requires marking probabilities link small dominated single bottleneck 
results hold precise product form restriction omitted analysis concise 
assumed rates arriving links matched capacity queueing delays small negligible 
assumptions routing apart remains static flow timescales asymmetry permissible 
awaiting acknowledgment 
suppose unmarked acknowledgment received window cwnd incremented cwnd marked acknowledgment received window decremented cwnd tr continuous approximation sending rate sources satisfy set di erential equations dt cwnd cwnd cwnd cwnd terms rates system equilibrium point shown heterogeneous round trip times arbitrary topologies set equations stable equilibrium provided exists equilibrium rates connection link respectively set links set routes 
agreed global constant natural decoupling congestion detection response algorithms 
argued decoupling valuable ers mechanism providing di erentiated services system setting allows evolution congestion detection schemes loosely coupled system protocols 
notice observed equation highlights possible trade convergence times utilization rates stable system static congestion detection algorithm high utilization necessary low close capacity 
lead high point reach approaches capacity 
turn high value requires su ciently large small needed give stability reduces convergence speeds 
trade achieving design goals fast system convergence transient periods system stability equilibrium 
stability condition equation suggests choosing lead scalable control local stability equilibrium depend window size individual connections 
control basis variant designed 
window process modeling class ecn tcp responses considered terms stochastic process formed flow congestion window cwnd isolation 
arguments consider average window size window variance average number packets marked round trip time flow relaxation times concludes parameters promising class controls 
furthermore shown coe cient variance instantaneous sending rate scheme proposed cov cov cwnd note global convergence equilibrium proved appears reasonable cases constraint global convergence results similar systems 
equilibrium point equation admissible 
provided 
particular interest suggests high sending rates instantaneous sending rate coe cient variance controlled primarily single parameter convergence speed significance elastic rate protocol deal network conditions include sudden route changes short transfers highly bursty non elastic sources 
consider source sending window cwnd suppose time sudden overload shock occur source reduce sending rate receiving feedback factor log log cwnd round trip times 
comparison traditional ecn tcp congestion control immediately reduce window factor receiving feedback limit window reduction factor round trip time 
response sudden increase available capacity route time taken source increase sending rate factor round trip times 
contrast traditional ecn tcp congestion control require cwnd round trip times respond increase available capacity 
scalable tcp scheme responds ectively changes available capacity window sizes large enables operate high bandwidth delay product environments high speed long haul networks 
small window scenarios ecn tcp adapt rapidly equation suggest expense system stability ability tcp share resources small window scenarios known problem 
system design control theoretic modeling section fluid flow model connections attempts model interaction packet arrivals link congestion detection algorithm static feedback function 
ipv network discrete packets data sent source sink ecn standard provides binary congestion signal packet tra subject closed loop control implementation control robust 
static ecn marking scheme virtual queue marking scheme hybrid virtual queueing schemes suggested random early marking proposal 
argued optimal congestion detection algorithm merely simple easily implemented 
link network capacity bps fifo bu er size bits virtual queue drained continuously rate packet arrives forwarded link packet marked probability current size virtual queue bytes predominant packet size sets marking scheme ective bu er size packet marking decision packet size added virtual queue real packet added real fifo queue forwarding link speed packets arriving real fifo queue fit bu er size discarded predominantly world wide web transfers dns lookups instant messaging applications cache validation protocols 
assumes overload causes loss delay ects result rate reductions window flow control schemes require release packets 
intended packet arrivals link controlled event rare real fifo queue remains empty time 
furthermore virtual queue size constrained ensures queue dynamics kept fast possible comparison round trip times 
order get intuition set parameters particular queueing scheme consider di erent packet arrival models simple markov chain sophisticated brownian motion analysis 
assuming packet arrivals form poisson process parameter service virtual queue forms poisson process intensity pasta property poisson process probability arriving packet marked ye providing equation gives stability yp ye suggests setting higher allow smaller aggressive gain systems 
consider alternative tra model 
suppose arriving link time period gaussian mean variance distribution arriving tra probability arriving packet marked load form stability condition equation yp notice brownian model gives intuition burstiness tra ect stability system 
tra arriving link bursty higher 
bound equation tighter allowing lower equation allows stability larger range values bursts tra aid stability expense lower utilization 
analysis design queueing algorithm argued ideal merely simple intuitive achieves performance 
designing active queue management schemes perform wide variety system responses tra patterns remains active area research 
bandwidth allocation response curves di erence scalable tcp conventional ecn tcp respective sending rates level congestion signaling 
relationship sending rate terms ease analysis constraint removed 
assumed alter qualitative insight analysis 
marking rate conventional tcp ms conventional tcp ms scalable tcp sharing const scalable tcp sharing const scalable tcp sharing const response curves conventional tcp scalable tcp 
signaling rate called response curve 
model conventional tcp response curve segment size packets sent 
contrast response curve scalable tcp derived equilibrium point equation notice curves di erent form multiplicative function prevalent schemes factor tr giving bias connections short round trip times 
queueing delays significant respect propagation serialization delay round trip times ms ms common congestion 
case short round trip time connections get rate allocation twice longer counterparts 
regime queueing delays small say maximum ms spread round trip times ms ms short round trip time connections receive share times greater longer round trip connections 
low loss low delay network increasingly di cult defend bias conventional tcp response curve connections short round trip times 
setting tr removes dependence round trip time variant response curve explicit resource allocation flow packet size fraction ar call fraction sharing constant 
comparisons response curve various sharing constants tcp response curve round trip times ms ms 
notice traditional tcp requires small marking rate order sustain high sending rate large round trip times significant higher marking rates 
rest assume connections packet size sharing constant 
common sharing constant introduces small technicality regarding practice exceed violent reduction cwnd response mark detrimental performance 
mathematically displayed equation links point sample variance rate implementation capped scaled ensure sharing constant correct current round trip time 
assumes bu ers provisioned bandwidth delay product longest connection propagation delay ms necessity packet drop signal available 
policing interconnection complexities economic implications resource sharing policies left untreated mechanisms provided consistent congestion pricing settlement framework provide su cient incentives address issues 
consistent condition needed stability equation 
marking probability mean traffic arriving pkt gaussian model phi sigma flows sharing constant flows sharing constant flows sharing constant mean traffic arriving pkt model phi gaussian model phi sigma gaussian model phi sigma gaussian model phi sigma flows sharing constant ect flow numbers marking utilization rates gaussian tra model 
ect di erent tra distributions marking utilization rates number flows 
mechanism capping introduced quick method improve performance small round trip times choice optimal threshold value open question 
plotting response curves marking probability functions respect mean load arriving bottleneck link possible get feel system parameters ect utilization 
suppose mbps link packet size bytes sharing constant flows 
arrivals link gaussian utilizations point aggregate response curve intersects marking function response load shown 
consider ect tra characteristics utilizations marking rates show various utilizations marking rates di erent values gaussian model simple model 
notice burstiness results higher utilizations cost slower system convergence set lower ensure stability tradeo system ability converge quickly presence transients ability maintain high utilization 
stability analysis assumed tra pattern load link invariant parameters flows traversing link 
assumption correspond static function represent signaling response section 
reality complex interaction source parameters number sources marking schemes employed routers getting grip di cult 
ideally desirable sending protocol designed tra generated superposition combination flows varying parameters generated predictable packet arrival process similar superposition multiple poisson processes 
ideal tra normalization may impossible achieve level normalization may possible 
guided di erent queueing models earlier rough estimates set coupled 
suppose system wished convergence speed setting consistent implied range poisson packet arrival queues gaussian arrival process implied 
changes tcp relevant points tcp congestion control implementation outlined provide baseline changes complete treatment see 
sender window sent acknowledged packets flight size window minimum congestion window cwnd receiver available receive bu er 
receiver acknowledges receipt data back sender indicating successful transmission advertising receive bu er 
receiving sender immediately sends data available permitted window 
data arrive receiver route available bandwidth received sender spaced accordingly 
trigger sending data implicitly scheme sending rate self clocking avoids need fine grained timers sender 
scheme elastic altering cwnd packets dropped marked way receiver steady state increase decrease various enhancements basic framework including methods signaling multiple packet drops single window data various methods determining initial value cwnd connection setup alternative algorithms sending packets recovering packet drop 
elements basic algorithm unsuited low loss low delay operation 
primarily self clocking interaction small window sizes 
example low loss low delay network round trip times order ms continent europe regional connections order ms 
low round trip times result small window sizes order kb packets connections kbps round trip time ms 
window sizes packets fast retransmit algorithm detect packet loss quickly tcp performs badly 
leads course grained timeouts poor multiplexing resources connections stabilize large windows majority experience poor throughput timeouts 
ecn ecn tcp help mitigate small window ects aid fairness go far considering ects fractional windows course grained backo reasons believe small window problems ect increasing number tcp bytes transfered total connections lower round trip times expected result increasing link speeds reducing serialization times improved system processing speeds leading shorter delays protocol stacks content distribution caching networks pushing content closer system 
premise argued flow control protocols inevitably introduce fine grained timers pace transmission accurate fractions round trip times 
past timers expensive implement implementation fine grained timers network protocol stacks exist 
operating system approach building microsecond timers process cross talk cpu caching ects approach suggest benefits running timers scheduling tasks network interface card possible 
rate pacing timers disadvantages 
tcp pacing concluded pacing significantly worse throughput regular tcp susceptible synchronized losses delays congestion signals 
consistent equation suggests stabilizing system elastic flows smooth sending rates requires closed loop gains lower 
performance rate pacing timers improved scaling inter packet pacing clamped exponentially distributed random variable 
addition randomness adds burstiness large connections making appear super position small connections gaussian model earlier ect increasing allowing faster system convergence increasing implementation rate pacing timers variant follows 
endpoint maintains congestion window cwnd real number implicitly determines current sending rate rtt pkts packet contains congestion feedback segment acknowledges congestion signaled cwnd cwnd congestion observed cwnd cwnd rtt mean round trip time seen max cwnd segments acknowledged 
timers set expire rtt packet transmission taken clamped exponential distribution receiver delay order send batched reduce reverse path tra delayed added protocol described extension need provide feedback segment congestion experience timestamp care needed ensure added noise time lag introduce oscillations system 
bw bps sources sinks bw bps ms bw bps ms topology single round trip time simulations 
lower bound upper bound 
changes cwnd due reschedule timer resampled 
timer fires single packet released permitted minimum cwnd receiver advertised window 
rounding window provides fractional windows smooth rate speedups 
maintaining window final packet sending decisions maintains robustness case sudden change network conditions legacy networks support packet drop 
case packet drop implementation falls back traditional tcp detection mechanisms congestion responses 
round trip time estimator rtt recalculated parameters adjusted ensure maintaining sharing constant discussed earlier capping bound variance sending rate maintaining consistent bandwidth allocations 
discussion far dealt stability elastic rate connection close equilibrium sending rate 
connection start tcp connection find operating point route 
traditionally slow start achieved goal increasing connections cwnd received loss encountered 
ect approximately doubling sending rate round trip time 
experimental scheme termed soft start 
tcp variant increases cwnd unmarked decreases cwnd cwnd marked 
initialized connection leaves soft start reaches 
provides grace marked packets connection experience inflated window growth connection changes steady state congestion control 
scheme aims allow connections reach operating point faster higher signalling rates permitted ecn marking 
depth study soft start compared slow start variety operating scenarios area importance high bandwidth long haul networks convergence times lengthy 
soft start preclude methods initialize cwnd historical route caches control block sharing 
simulation results marking algorithm protocol changes tcp section implemented discrete event network simulator ns 
various validation tests conducted ensure protocol correctness experience robustness system common implementation errors important 
results qualitative nature aim capture advantages network stable flow control terms number performance metrics utilization queueing delay size variation packet drop rates 
queueing delay variation ects determines certain applications meet latency requirements implicitly systems implementing delayed slow start increase sending rate factor 
available www isi edu nsnam ns time arrival forwarded marking rate time min queue max queue average queue round trip time ms arrival forwarded marking rate top queue bottom time arrival forwarded marking rate time min queue max queue average queue round trip time ms arrival forwarded marking rate top queue bottom acts measure queue occupancy implications bu er provisioning 
mean queueing delay variance metrics provide insight performance suitable requirements 
packet drop rates measure raw loss performance harmful real time applications lead congestion collapse 
basic operation simulations results shown figures attempt show basic operation flow control protocol interconnected static congestion detection scheme described section 
simulations topology shown round trip times ms ms bottleneck bandwidth mbps 
initially connections direction started uniformly second 
seconds number connections doubled directions start times picked uniformly second number connections went direction exercising connection bandwidths mbps kbps 
queue state shown minimum maximum average queue size second intervals 
arrival forwarded marking rates averages taken second intervals 
virtual queue marking scheme described section running real capacity real packet bu er size kb 
sources theory suggests system just stable 
comparing results ms ms shows flow control scales di erent round trip times marking rates utilizations queuing delays similar 
ms results display noise marking rate due smaller number round trip times measures averaged 
notice queue size kept small packets heavy load excluding transients synchronized connection arrivals 
interestingly queue performance heavy load slightly worse ms connections compared ms connections due small fractional windows number flows marking rate utilization queue delay queue delay std dev 
flow goodput bps goodput fairness table network flow performance metrics di erent numbers connections 
ms connections seconds average window ms ms connections order packets packet respectively 
operating range simulation statistics steady state scenarios 
simulations round trip propagation delay set ms simple bottleneck topology 
simulations virtual queue operating capacity real bu er size kb 
simulation access link extra propagation delay displacement chosen uniformly ms ms added avoid simulation artifacts due exactly homogeneous round trip times 
connections started uniformly distributed seconds simulation equal numbers forward backward connections 
statistics collected seconds seconds simulation system steady state 
simulations bottleneck link speed mbps queue set 
number connections varied set segment size bytes 
simulations attempt display ectiveness system range ered loads changing number connections 
table displays network flow level performance statistics seconds data collected 
seen flow fairness measured jain fairness index range flow rates 
rate achieved line expected theoretical response curve marking rate response curve suggests goodput bps bps respectively 
mean queueing delay jitter kept packet serialization times 
simulations packet drops observed 
utilizations poor aggregate demand low room improvement 
ect packet size simulations conducted see ect packet size performance 
decreasing packet size expected improve stability multiplexing expense increased packetization overhead 
simulations bottleneck link speed mbps number connections set segment sizes chosen 
parameter chosen equal connection response curve packet sizes 
marking schemes queues set 
choices guided arguments gaussian models congestion window cwnd corresponds packet sent cwnd round trip times 
excluding tcp ip headers headers added bytes overhead tcp timestamp option measure round trip time 
segment size bytes marking rate utilization queue delay queue delay std dev 
flow goodput bps goodput fairness table network flow performance metrics di erent packet sizes 
section 
simulation parameters unchanged operating range simulations 
table shows aggregate statistics taken seconds data collected simulations packet drops observed 
seen noise system reduces segment size decreases bytes bytes 
bytes additional tcp ip header overhead appears variability gains set increasing overhead ine ciency seen reduction flow goodput 
argued packet size bytes ers tradeo connection goodput ciency variability 
reduced segment size improves absolute jitter performance number packets queue ects stability size 
round trip time fairness displays dynamic operation system heterogenous round trip times 
simulations topology shown delays right hand set links changed connections round trip times ms ms ms ms ms ms ms ms bottleneck link speed mbps 
initially total connections direction started uniformly second round trip times 
seconds number connections doubled directions start times picked uniformly second round trip times uniform available number connections went direction exercising connection bandwidths mbps kbps 
queue state shown minimum maximum average queue size second intervals 
arrival forwarded marking rates averages taken second intervals 
parameter settings basic operation simulations 
notice marking rates utilizations queue dynamics roughly seen single round trip time case shown figures invariance desirable predictability introduces 
throughput achieved connections round trip time class roughly equal 
dynamics system stabilizes dependent round trip time short round trip times react faster longer round trip times 
figures show normalized throughput connections coming di erent groups 
results bottleneck link mbps equal reverse path tra connections started uniformly distributed seconds goodput measured seconds th simulation second 
ecn tcp simulations delayed bottleneck adaptive red target queueing delay packets ecn marking 
scalable tcp variant simulations parameters simulations display scheme basic operation 
traditional ecn tcp displays significant variation contended bandwidth allocation connections round trip time ms get times goodput connections round trip time ms 
tcp variant designed remove bias small round trip times simulation results suggest approach perform extremely atm environment cell sizes bytes 
time arrival forwarded marking rate time ms ms ms ms ms ms ms ms time min queue max queue average queue heterogenous round trip times arrival forwarded marking rate top normalized throughput round trip time middle queue samples bottom 
ms ms ms ms ms round trip time normalized throughput connections heterogenous round trip times adaptive red 
ms ms ms ms ms round trip time normalized throughput tcp variant connections heterogenous round trip times static congestion detection algorithm 
results display invariance bandwidth allocation round trip time 
attempts show viability low loss low delay network ip ecn signalling standard relatively small changes tcp congestion control simple static congestion detection algorithm 
protocol changes tcp involve implementing packet pacing scheme altering slow start deal higher signalling rates changing congestion window update algorithm parameter scaling ensure fairness throughput connections di erent round trip times 
design studied simulation results suggest point flow control maintain low loss low delay fairness round trip times 
remains improve utilizations demand low adaptive marking schemes appearing promising direction research 
acknowledgments done royal commission exhibition industrial fellow research labs cambridge 
go frank kelly andy hopper sally floyd useful discussions 
glenn laboratory communication engineering support 
aggarwal savage anderson 
understanding performance tcp pacing 
ieee infocom tel aviv israel march 
ahmed salim 
performance evaluation explicit congestion notification ecn ip networks 
internet rfc july 
aron druschel 
soft timers cient microsecond software timer support network processing 
acm transactions computer systems august 
li low yin 
rem active queue management 
proceedings th international congress september 
massoulie 
impact fairness network stability performance 
acm sigmetrics cambridge massachusetts june 
floyd ramakrishnan black 
addition explicit congestion notification ecn ip 
internet rfc september 
kelly 
resource pricing evolution congestion control 
automatica 
jacobson 
congestion avoidance control 
sigcomm symposium communication architectures protocols pages 
updated version available ftp ftp ee lbl gov papers ps jain chiu 
quantitative measure fairness discrimination resource allocation shared computer systems 
technical report dec research report september 
kelly 
models self managed internet 
philosophical transactions royal society volume pages 
royal society august 
kelly tan 
rate control communication networks shadow prices proportional fairness stability 
journal operational research society 
kelly 
case new ip congestion control framework 
technical report cued tr laboratory communication engineering cambridge university june 
key mcauley 
ecn congestion control framework experiments evaluation 
technical report msr tr microsoft research october 
srikant 
analysis design adaptive virtual queue avq algorithm active queue management 
acm sigcomm san diego california august 
low wang doyle 
dynamics tcp red scalable control 
ieee infocom june 
morris 
tcp behavior flows 
ieee international conference network protocols atlanta georgia 
ott 
ecn protocols tcp paradigm 
workshop modeling flow congestion control mechanisms 
ecole normale superieure september 
ott misra 
ecn aggressive flows 
submission 
pratt fraser 
arsenic user accessible gigabit ethernet interface 
ieee infocom anchorage alaska april 
touch 
tcp control block interdependence 
internet rfc april 

stability networks operating tcp congestion control 
th ifac world congress automatic control barcelona spain july 

