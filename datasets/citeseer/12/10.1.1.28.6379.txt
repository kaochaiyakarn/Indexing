winning strategies ehrenfeucht fraiss games sanjeev arora princeton university ronald fagin ibm almaden research center powerful versatile new sufficient condition second player duplicator winning strategy ehrenfeucht fraiss game graphs 
accomplish things technique 
give simpler easier proof ajtai fagin result reachability directed finite graphs monadic np 
monadic np known monadic sigma corresponds existential second order logic restriction second order quantifiers range sets relations higher arity binary relations 
second show result holds presence larger class built relations known 
appeared theoretical computer science pp 

mailing address olden street princeton nj 
email arora cs princeton edu 
done author student uc berkeley visiting ibm almaden 
mailing address harry road san jose california 
email fagin almaden ibm com 
computational complexity problem amount resources time space required machine solves problem 
descriptive complexity problem complexity describing problem logical formalism imm 
complexities related 
discovered fagin showed fag complexity class np coincides class properties finite structures expressible existential second order logic known sigma consequently np np existential universal second order logic expressive power finite structures sigma pi similar vein immerman vardi proved complexity class coincides class properties finite ordered structures expressible fixpoint logic imm var 
famous conjectures computational complexity theory np np difficult prove 
connection questions descriptive complexity holds promise techniques domain brought bear questions domain 
particular standard technique finite model theory proving separation results ehrenfeucht fraiss games see section 
fagin showed sigma pi separation proven second order ehrenfeucht fraiss games fag 
fagin suggested partial progress sigma pi question restricting expressive power classes allowing second order quantification relations arbitrary arity allow quantification sets 
quantifying sets corresponds quantification monadic relations fagin stockmeyer vardi fsv term restricted classes monadic np monadic np respectively terminology gained acceptance 
note spite seemingly restrictive syntax monadic np contains nontrivial problems including np complete ones colorability satisfiability 
fagin fag showed monadic np monadic np 
specifically showed connectivity finite graphs property easily seen monadic np monadic np 
proof uses certain ehrenfeucht fraiss game graphs 
games results 
ehrenfeucht fraiss game played players called spoiler duplicator results involve proving duplicator winning strategy 
proof existence quite complicated see fag af surprising spoiler strategy may arbitrarily complicated proof argue strategy prevails duplicator 
quite important develop tools proving duplicator wins 
conditions identified 
formulation secondorder ehrenfeucht fraiss games ajtai fagin af easier prove duplicator winning strategy sufficient condition due essentially han duplicator winning strategy idea playing iss games random structures 
techniques ajtai fagin af techniques fagin stockmeyer vardi fsv 
library tools emerging simplifies task showing duplicator winning strategy 
clearly important enlarge library tools intuitive natural possible researchers easier time proving results 
give example library tools mentioned fagin stockmeyer vardi follows give simple proof simpler fagin connectivity monadic np show connectivity monadic np presence large class built relations previously known built successor relation dr discuss built relations shortly 
give new sufficient condition duplicator winning strategy 
hope condition prove useful intuitive 
follows 
give proof directed reachability directed graph distinguished vertices problem deciding directed path monadic np 
proof easier earlier proof ajtai fagin af 
show directed reachability monadic np presence larger class built relations known 
note condition place condition fagin stockmeyer vardi proof connectivity problem 
arguable proof simpler 
reasons interest connectivity directed reachability problems considered 
cosmadakis cos shown connectivity reduces weak kind reduction host problems including non colorability 
fact connectivity monadic np implies problems monadic np 
connectivity special significance 
directed reachability interesting problem known senses difficult problem deal connectivity 
instance surprising result kanellakis private communication see says undirected reachability consider undirected graphs monadic np 
contrast undirected connectivity monadic np mentioned 
furthermore cosmadakis shown connectivity reduce sense directed reachability 
suggests directed reachability monadic np proving requires techniques different show connectivity monadic np 
ajtai fagin af resolved status directed reachability proving fact monadic np 
current greatly simplifies proof 
results hold presence larger class built relations allowed af fsv 
main reasons built relations important 
proving results monadic np presence built relations provide training ground attacking general monadic case 
instance proving results binary np clearly needs deal case monadic np built successor linear order relation existence relations expressed binary second order existential quantifier 
reason interest built relations known examples classes built relations provably add expressive power 
example property evenness graph having number nodes monadic np monadic np built successor relation 
furthermore connections computational complexity descriptive complexity known hold presence built relations 
mentioned earlier immerman vardi showed property iff expressed fixpoint logic built successor relation built linear order 
allowing successor crucial case evenness definable fixpoint logic successor ch 
built relations viewed adding element nonuniformity class changing somewhat analogous way circuit computational complexity differs turing machine complexity 
proving problem monadic np presence certain built relations shows problem captured certain nonuniform ways built relations vary universe universe stronger result 
rest organized follows 
section give definitions conventions 
section discuss order ehrenfeucht fraiss games 
section give new sufficient condition duplicator winning strategy 
section define monadic np ajtai fagin games 
section give application sufficient condition duplicator winning strategy giving simple proof fagin result connectivity monadic np proof modeled fagin stockmeyer vardi 
section consider directed reachability problem 
subsection sketch ajtai fagin proof af directed reachability monadic np 
subsection give simplified proof result 
main application new sufficient condition duplicator winning strategy 
section give new results presence certain built relations 
summarize section 
related 
related development independent result schwentick sch 
gives sufficient condition duplicator winning strategy uses show connectivity monadic np presence larger class built relations fagin stockmeyer vardi shown 
importantly resolved open problem de dr showing connectivity monadic np presence built linear order 
definitions conventions language called similarity type signature vocabulary finite set fp relation symbols arity finite set fc constant symbols 
structure structure simply structure set called universe mapping associating relation arity associating member constant symbol may call interpretation similarly constant symbols 
point interpretation constant symbol may say labeled structure called finite stated rest assumption structures consider finite 
results hold infinite structures proof infinite case known trivial compactness theorem 
usual tarskian truth semantics define means structure obey satisfy sentence 
main application directed reachability 
shall take liberties standard terminology usually graph mean directed graph distinguished points labeled respectively 
graph structure language consists single binary relation symbol constant symbols interested colored graphs structures language consists single binary relation symbol constant symbols case graphs finite number unary relation symbols 
colored graph interpretations unary relation symbols language color point universe mean description point member 
colors 
hx tuple define set fx points appear define hypergraph associated structure hypergraph universe universe set hyper edges tuple relation ag simple path length points consists set edges set points gamma distinct ii iii iv distance distinct points smallest path length distance point 
cycle length structure path length vertex 
shortly shall mention consider cycles length 
fact consider cycles length definition corresponds berge notion ber cycle hypergraph 
various notions cycle hypergraph equivalent berge see fag 
note structure language single binary relation hypergraph ordinary undirected graph concept distance cycle familiar ones 
hx represent directed edge directed graph undirected edge undirected graph 
undirected version directed graph mean undirected graph obtained ignoring directions edges edge undirected version iff hx hx edge directed graph 
gaifman graph structure undirected graph universe edge distinct appear tuple relation particular gaifman graph directed graph self loops simply undirected version graph 
definition distance points structure equivalent distance points gaifman graph structure 
notions cycle structure cycle gaifman graph different general 
example tuple hx ternary relation structure entries distinct cycle length gaifman graph edges necessarily cycle general cycle structure gives rise cycle gaifman graph vice versa 
note assumption main theorem small cycles structure 
fact notion cycle restrictive increases applicability theorem 
consider cycles length small cycles effect theorems want forbid 
define degree point degree gaifman graph 
ehrenfeucht fraiss games tools model theory survive restrict attention finite structures 
ehrenfeucht fraiss games ehr fra 
ehrenfeucht fraiss games applications finite model theory see af pp 

informal definition round order ehrenfeucht fraiss game positive integer shall call game short 
straightforward give formal definition shall 
players called spoiler duplicator structures round spoiler selects point structures duplicator selects point structure 
point selected point selected second round begins spoiler selects point structures duplicator selects point structure 
point selected point selected continues rounds 
duplicator wins substructure induced isomorphic substructure induced function maps duplicator wins precisely iff hp tuple relation iff hq tuple corresponding relation choice interpretation constant symbol iff interpretation constant symbol spoiler wins 
say spoiler duplicator winning strategy guarantee win matter player plays 
game finite ties spoiler winning strategy iff duplicator 
duplicator winning strategy write case intuitively indistinguishable game 
important theorem ehr fra shows games interest 
class structures language complement class structures theorem order definable iff spoiler winning strategy game winning condition duplicator theorem show property finite structures order definable construct structure satisfying property structure failing property duplicator winning strategy game finding structures nontrivial 
pair guaranteed look different global level satisfies property doesn 
look similar ehrenfeucht fraiss game 
main observation times ehrenfeucht fraiss game sense involves local properties structures 
describe condition satisfied guarantees duplicator winning strategy game 
intuitive level condition says structures approximately isomorphic local level 
see approximate isomorphism leaves plenty room structures differ global level lies condition usefulness researcher prove results gets room construct desired example proof directed reachability monadic np probabilistic method suffices prove existence structures 
probabilistic method derived techniques af 
integers structure 
define notion color vertex intuitively speaking color describes small neighborhood vertex 
simplicity considering case colored graph case interest proof directed reachability monadic np 
define color vertex color colored graph description edge self loop vertex vertex distinguished point labeled vertex distinguished point labeled inductively define color vertex description color complete description possible color gamma points color hv wi edge graph hw vi edge complete description possible color gamma points color hw vi edge hv wi edge complete description possible color gamma points color hv wi hw vi edges 
color vertex tells color tells vertices color just just cases count readers familiar af recall slightly different notion color appears 
notion involves additional information definition color vertex contains complete description possible color gamma points color hv wi hw vi edge 
notion useful completely local nearby points points distance affect color discuss define color vertex structure arbitrary language preliminary notion 
type variables xm conjunction exactly conjunct arity relation symbol arity choice exactly px px conjunct 
intuitively type tells exactly variables xm relate quantifier free way 
say variable positive occurrence type px opposed px conjunct relation symbol variables fx define type vertices opposed variables analogously 
specifically vertices define type type variables xm holds xm interpreted respectively 
intuitively type vertices tells exactly vertices relate similarly define means vertex positive occurrence type 
ready define color vertex structure arbitrary language largest arity relation symbols color complete description relations tuple hv vi member course length tuple arity relation constant symbols label inductively define color vertex description color complete description possible choice gamma colors possible type vertices positive occurrence gamma choices hv gamma gamma type color gamma 
color tuple hx tuple color multiplicity color vertex number vertices structure color 
similarly multiplicity color tuple relation structure number tuples relation color 
theorem describes desired sufficient condition 
theorem positive integers 
positive integer depends structures similarity type set vertices satisfy conditions 
degree vertex 
cycle length 
vertex color 
tuple relation structure corresponding relation structure tuples relations color section give version theorem small cycles allowed additional assumptions 
shall prove theorem shortly 
theorem gives sufficient condition duplicator winning strategy 
noted fagin stockmeyer vardi fsv sufficient condition due essentially duplicator winning strategy 
condition incomparable condition 
particular apply condition necessary point structure point structure isomorphic neighborhoods 
directed graphs differ edge shall see theorem prove directed connectivity monadic np condition applied 
neighborhood endpoint isomorphic neighborhood point intuitively requiring isomorphic neighborhoods condition demands condition requires approximately isomorphic neighborhoods dealing colors isomorphism types expense adding requirements small cycles 
theorem subsume condition theorem strong replace condition fagin stockmeyer vardi proof connectivity monadic np including case built relations consider 
helps show versatility theorem 
section shall give proof theorem connectivity monadic np 
conclude section giving proof theorem 
ease description prove theorem assumption colored graphs structures arbitrary similarity type 
noted case interest proof directed reachability monadic np 
fairly straightforward modify proof deal general case replacing distance graph distance hypergraph changes 
assuming hypothesis theorem describe duplicator matches spoiler moves substructures picked rounds isomorphic 
formal proof give intuition colors allow small cycles 
assume spoiler duplicator playing game colored graphs rounds points picked gamma colors corresponding points picked assume spoiler picks say different adjacent say hp edge hp 
gamma color follows point different adjacent similarly hq edge hq 
assume cycles length adjacent adjacent enables maintain isomorphism subgraph induced subgraph induced 
small cycles possible happen adjacent adjacent violate isomorphism spoiler win 
allow small cycles 
full winning strategy duplicator complicated sketch example discuss happens spoiler selects point adjacent point selected far fill details 
define distance ignore directions edges 
ease notation little sloppy delta delta distances may different 
clear context graph distance measured 
shorthand denote induced directed subgraph undirected version shortest path path unique notation 
word path refer undirected path directed graph undirected version path 
define dm min fm distance care exact distance 
ball set vertices distance say directed graph possibly colored tree tree ignore directions edges 
connected undirected cycles 
part proof theorem state prove facts lemma 
definition useful 
set vertices graph define consist vertices appear path length pair points sg denote subgraph induced set vertices 
note ignore edge directions consider paths sg directed graph directions edges determined 
colored graph sg colored subgraph defined similarly 
fact says graphs small cycles small neighborhoods point look trees 
fact assume graph cycles length fu um set vertices 
assume sg fu um tree 
proof set consisting fu um vertices shortest undirected path subgraph induced set vertices 
show tree 
clearly connected 
assume contains cycle cycle minimum size induced subgraph know assumption cycle length vertices cycle path length bk 
path length 
bk 
paths distinct 
distinct paths path length length bk 
follows cycle length bk contradiction 
tree 
show sg fu um tree 
clearly connected tree need show path length path path length path path length 
distinct paths path path length 
follows cycle length contradiction 
observation showing duplicator match spoiler actions 
motivate remind reader color vertex partial description colored ball 
instance vertices color vertex distance gamma color vertex gamma color distance generalize 
fact assume colored graphs cycles length integers fp fq subsets vertices respectively fp ball fq ball 
assume sg fp sg fq isomorphic colored trees isomorphism mapping vertex colored color 
vertex 
assume point sg fp vg sg fq ug isomorphic colored trees isomorphism mapping mapping vertex colored gamma color 
proof fact graphs form sg mentioned necessarily trees follows fact 
sg fp corresponding vertex sg fq satisfies conditions required fact color just gammax color 
assume sg fp vertex sg fp closest sg fp vg tree follows path pass sg fp vg union sg fp path show isomorphic path added sg fq 
sequence vertices path gamma color set vertices gamma color relate way relates hv vi resp hv directed edge iff hv resp hv directed edge similarly set vertices gamma color relate way relates color follows cardinality cardinalities contains vertex fp follows contains vertex fq vertex 
argue similarly neighbors need depend fact find vertex keep doing path outside fq isomorphic vertices colored gamma color 
define final vertex path 
ball vertices graphs theorem facts vertex colors high multiplicity 
fact maximum degree vertices graph 

vertex color multiplicity delta points vertex color outside ball 

vertices multiplicity color multiplicity gamma color proof part obvious 
prove second part 
note number vertices distance exactly vertex denote color gamma color vertices having color vertex color distance 
yields vertices color counted vertex color times vertex color distance exactly 
vertices gamma color ready describe duplicator strategy prove theorem 
maximal degree result follows easily 
assume 
strategy maintains invariant 
invariant round sequences vertices picked respectively 
ffl isomorphism invariant sg fp gammai isomorphic sg fq gammai isomorphism mapping vertices colored gammai color 
ffl multiplicity invariant multiplicity common gammai color gamma gamma gamma gamma delta delta delta gamma gammai generalization fact shows isomorphism invariant easy maintain vertex picked spoiler ji ball gammai gamma 
lemma vertex ball gammai gamma vertex ball gammai gamma isomorphism invariant maintained plays role proof ball gammai gamma 
fp subset lying ball gammai 
lie ball gammai 
furthermore sg fp gammai sg fq gammai isomorphic colored trees isomorphism mapping vertices colored gammai color 
fact applied yield vertex ball gammai gamma gammai gamma gammai gamma color isomorphism invariant maintained trees formed gammai gamma gammai gamma color 
gammai gamma gammai gamma gammai gamma conclude trees isomorphic gammai gamma color 
finish claim isomorphism invariant suffices show distance resp vertex outside ball gammai resp vertex outside ball gammai gammai gamma vertices interfere isomorphism invariant 
follows triangle inequality gamma gammai gamma gammai gamma delta gammai gamma argument works describe duplicator strategy 
suppose spoiler picks vertex round symmetric strategy spoiler chooses vertex 
vertex conditions theorem imply color 
gammai gamma color say letting lead violation isomorphism invariant plays role just 
gammai gamma gammai gamma gammai gamma gammai gamma gammai gamma colored path isomorphic colored path isomorphism mapping vertices colored gammai gamma color 
case show find vertex maintaining invariant 
case gammai gamma gammai gamma ball gammai gamma 
ball gammai gamma follows gammai gamma gammai gamma gammai gamma gammai gamma follows ball gammai gamma 
need vertex color ball gammai gamma 
vertex exists part fact multiplicity delta gammai gamma show multiplicity gamma gamma delta delta delta gamma gammai gamma delta gammai gamma multiplicity invariant maintained 
show high multiplicity analyzing possible cases edge path assumption multiplicity color missing edge distance gammai gamma edge part fact implies multiplicity gamma gammai gamma gamma gammai gamma turn gamma gamma delta delta delta gamma gammai gamma desired 
assume existing multiplicity invariant implies multiplicity gammai color gamma gamma gamma gamma delta delta delta gamma gammai distance gammai gamma follows part fact multiplicity gammai gamma gammai gamma color gamma gamma gamma gamma delta delta delta gamma gammai gamma gammai gamma desired 
case gammai gamma gammai gamma ball gammai gamma 
lemma find point ball gammai gamma maintaining isomorphism invariant 
remains shown multiplicity invariant maintained 
subcases analysis similar case 
case gammai gamma gammai gamma gammai gamma colored path isomorphic colored path isomorphism mapping vertices colored gammai gamma color 
lemma find isomorphism invariant maintained 
argue multiplicity invariant maintained procedure yields different consider cases argue case 
concludes proof theorem 
monadic np ajtai fagin games order logic allows quantification members universe sets members universe generally relations details see enderton shoenfield sho 
pass order logic second order logic allow quantification relations 
particular sigma sentence sentence form order relation symbols 
give examples sigma sentences 
examples represents edge relation graph 
example construct sigma sentence says graph hamiltonian path graph path passes points 
new binary relation symbol say 
linear order 
conjunction sentences says transitive second says satisfies 
second sentence convenience phi represent exclusive 
phi phi say immediate successor edge 
exy sigma sentence says graph hamiltonian path 
example construct sigma sentence says graph colorable 
sentence colors represented unary relation symbols say point exactly color 
say vertices color connected edge 
exy exy exy sigma sentence says graph colorable 
example final example relevant deals class graphs path say set contains complement contains 
say edge complement ax ay exy 
clear sigma sentence characterizes graphs path sigma sentence order said monadic unary existential second order quantifiers quantify sets 
class graphs said monadic sigma class finite graphs obey fixed monadic sigma sentence 
reason sigma classes great interest fagin result fag collection sigma classes coincides complexity class np 
reason follow fsv refer collection monadic sigma classes monadic np 
sigma sentences constructed examples monadic colorability monadic np 
note colorability np complete property gj 
monadic np includes np complete properties 
sigma sentence constructed example monadic binary relation symbol 
tur tur shown monadic np fact showed stronger result defined monadic second order sentence allow arbitrary quantification universal existential sets 
discuss game corresponds monadic np 
game called ajtai fagin game involves colors rounds 
introduced af prove directed reachability monadic np 
class graphs 
example class graphs connected 
set distinct colors 
simplicity assume coloring point corresponds deciding unary relations member 
duplicator selects member spoiler colors points colors obtain colored graph duplicator selects member complement duplicator colors points colors obtain colored graph note asymmetry graphs rules game spoiler color points game concludes game 
duplicator wins wins final game 
ajtai fagin prove result hard 
theorem monadic np iff spoiler winning strategy ajtai fagin game connectivity section show theorem prove connectivity monadic np 
proved fagin fag simpler proof fagin stockmeyer vardi fsv 
theorem connectivity monadic np 
proof follow outline fagin stockmeyer vardi proof theorem condition 
number colors number rounds 
class connected graphs 
theorem need show duplicator winning strategy ajtai fagin game move ajtai fagin game duplicator selects graph directed cycle length sufficiently large shall discuss large 
spoiler colors colors obtain colored graph ff ff ff gamma denote points order cycle edge hff ff think subscripts reduced modulo belong interval gamma 
degree point cycle theorem 
number colors independent number points easy see picking sufficiently large point ff multiplicity color edge hff ff point ff distance ff edge hff ff color duplicator selects graph obtained deleting edges hff ff hff ff adding edges hff ff hff ff easy see disjoint union cycles particular connected 
duplicator colors vertex vertex just colored obtain colored graph easy see vertex color colored ball isomorphic 
edges hff ff hff ff color edges hff ff hff ff easy see color follows immediately theorem choice duplicator winning strategy remaining game 
duplicator winning strategy ajtai fagin game desired 
directed reachability main application theorem give simpler proof ajtai fagin result directed reachability monadic np 
sketch proof 
sketch ajtai fagin proof ajtai fagin proof characterization monadic np theorem 
class connected graphs 
points set vertices graph vertex labeled vertex labeled member selected duplicator game forward edges hv form path addition certain backedges hv choice backedges probabilistic means turns proof backedges 
refer graph path backedges 
forward edges denote gamma graph results deleting edge clear path forward edge path gamma gamma forward edge show certain choice coloring spoiler forward edge duplicator select gamma color exactly coloring vertex vertex colored winning strategy remaining game 
theorem sufficient show directed reachability monadic np 
graph selected duplicator guaranteed exist theorem reader able prove standard arguments theory random graphs 
theorem assume positive integers ffl 
sufficiently large graph vertices path backedges 
vertex number vertices distance ffl 
number vertices cycle size ffl 
spoiler colors colors probability gamma ffl probability taken choices deleted forward edge vertex color gamma part theorem probability possible choices forward edge equally 
course ajtai fagin notion color implies result notion 
ffl clauses respectively 
just convenience easy see proof give result involving ffl theorem tells parameters mentioned sentence theorem selected neighborhood radius small points short cycles cycles size spoiler colored choices forward edge vertex color gamma theorem proven selecting backedge appear certain probability backedges 
proof proceeds probabilistic arguments difficult 
idea theorem fairly intuitive 
backedges follows neighborhoods small number points short cycles small 
gives 
certain forward edges special example near point color unusual near point short cycle 
neighborhoods small number points short cycles small follows nearly forward edges 
follows fact backedges absence forward edge compensated presence backedges 
example hx yi backedges vertices gamma color edge deleted affecting color take advantage fact color counts high 
describe ajtai fagin theorem prove directed reachability monadic np 
number colors number rounds 
want show duplicator winning strategy ajtai fagin game class directed graphs connected 
select sufficiently large respect take ffl sufficiently small 
move ajtai fagin game duplicator selects graph guaranteed theorem spoiler colors colors 
denote resulting colored graph forward edges guaranteed part theorem vertex color gamma duplicator selects gamma member colors gamma vertex vertex coloring denote resulting colored graph ajtai fagin give complicated proof elaborate combinatorial constructs show suitable choice parameters ffl duplicator winning strategy game played follows theorem directed reachability monadic np 
simplified proof proof directed reachability monadic np proceeds follows 
slightly modified version theorem theorem useful purposes 
proof similar ajtai fagin 
conclude proof complicated proof duplicator winning strategy game played conclude proof theorem 
net result understandable simpler proof directed reachability monadic np 
give slight modification theorem proof 
graph guaranteed theorem may short cycles cycles size points short cycles 
convenient completely eliminate short cycles 
theorem define deleting backedge short cycle 
obtain theorem statement theorem 
theorem assume positive integers ffl 
sufficiently large graph vertices path backedges 
vertex number vertices distance ffl 
cycle length 
spoiler colors colors probability gamma ffl probability taken choices deleted forward edge vertex color gamma proof increasing necessary assume loss generality 
assume loss generality ffl 
take theorem obtain deleting backedge short cycle cycle length 
ffl ffl 
shall play role statement theorem proving ffl play role ffl 
mentioned earlier point distance vertex affects color vertex 
follows easily endpoint forward edge distance endpoint deleted backedge color point color corresponding point gamma theorem proven show probability endpoint randomly selected forward edge distance endpoint deleted backedge ffl sufficiently large 
endpoints deleted backedges lie short cycles 
number vertices distance short cycles ffl ffl ffl factor ffl upper bound number vertices short cycles second factor ffl upper bound number vertices distance vertex number forward edges gamma number vertices probability endpoint randomly selected forward edge distance endpoint deleted backedge ffl gamma ffl ffl sufficiently large 
shown 
give simpler proof theorem ajtai fagin af 
theorem directed reachability monadic np 
proof number colors number rounds 
class directed graphs connected 
theorem need show duplicator winning strategy ajtai fagin game theorem ffl 
define bn ffl respectively 
sufficiently large shall discuss large 
move game duplicator selects graph guaranteed theorem spoiler colors colors 
denote resulting colored graph total number possible colors 
depends depend depends follows depends call forward edge vertex color gamma gamma forward edges follows theorem gamma ffl gamma edges 
possible colors set gamma ffl gamma edges color 
number gamma ffl gamma greater sufficiently large inequality holds bn ffl 
select member duplicator selects gamma member colors gamma vertex vertex coloring denote resulting colored graph gamma conditions theorem satisfied show 
conditions theorem follow immediately corresponding conditions theorem choice parameters 
fourth condition theorem follows choice fact edge graph 
follows theorem choice duplicator winning strategy remaining game 
duplicator winning strategy ajtai fagin game desired 
allowing built relations ajtai fagin af proved directed reachability monadic np presence built relations large class includes successor relation 
techniques allow extend results larger class built relations 
significance allowing built relations discussed 
explain definition 
purpose considering built relations convenient restrict attention universes initial prefix set natural numbers 
cardinality universe assume universe gamma 
particular collection built relations specified auxiliary language relation symbols positive integer interpretation universe gamma 
intuitively universe associated set auxiliary relations 
denote corresponding structure gamma 
intuitively gamma structure composed built relations 
explain ajtai fagin result says directed connectivity monadic np presence certain families built relations 
intuitively allow binary built relations short cycles vertex small degree 
theorem ajtai fagin af assume built relations binary oe 
assume gamma contains cycle length degree point gamma oe directed reachability monadic np presence built relations 
result say 
graph recall defined structure language consisting single binary relation symbol constant symbols universe gamma 
expansion mean structure expanded language interpretation interpretation gamma 
theorem says long built relations restricted described monadic sigma sentence expanded language graph connected iff satisfies 
strengthen theorem removing restriction built relations binary 
furthermore replace assumption gamma contains short cycle cycle length assumption points oe points lie short cycles 
theorem assume oe 
assume number points gamma lie cycles length oe degree point gamma oe directed reachability monadic np presence built relations 
explain prove theorem 
ajtai fagin give version theorem applies case built relations assumptions built relations 
fairly straightforward modify proof obtain theorem theorem assumptions built relations 
talk color point take consideration built relations 
gamma mean gamma gamma result deleting edge graph leaving built relations 
theorem assume positive integers ffl 
sufficiently large graph universe gamma path backedges 
vertex number vertices distance ffl 
number vertices cycle size ffl 
spoiler colors colors probability gamma ffl probability taken choices deleted forward edge vertex color gamma just case considered earlier built relations prove theorem giving sufficient condition duplicator winning strategy 
allowing small cycles weaken assumptions theorem 
define point isolated distance cycle length intuitively point isolated near small cycle 
tuple relations structure said isolated vertex tuple isolated 
theorem positive integers 
positive integer depends structures similarity type set vertices satisfy conditions 
degree vertex 
vertex color 
tuple relation structure corresponding relation structure isolated tuples relations isolated color proof proof similar theorem value continue assume simplicity colored graphs structures arbitrary similarity type 
integer say vertex safe graphs tuples distance vertex graph 
observe color vertex different graphs safe 
turn implies vertices graphs colors 
duplicator maintains isomorphism invariant multiplicity invariant 
isomorphism invariant proof theorem 
multiplicity invariant call strong multiplicity invariant 
duplicator strategy keep picking vertex resp spoiler resp isomorphism invariant threatened 
isomorphism invariant threatened strong multiplicity invariant comes rescue just proof theorem 
ffl strong multiplicity invariant isolated vertices isolated structures gammai color gamma gamma gammai 
straightforward verify 
assuming invariants maintained rounds show maintain round 
proof theorem need analyze cases give details cases require new argument 
suppose spoiler picks vertex round distance gammai gamma previously chosen vertex picking corresponding vertex violate isomorphism invariant duplicator picks clearly maintains strong multiplicity invariant 
assume isomorphism invariant violated 
assumption vertex color graphs follows corresponding vertex close distance gammai gamma vertex picked 
show find cases depending distance gammai gamma follows gammai gamma safe 
edge unsafe 
third hypothesis theorem isolated gamma gammai gamma isolated isolated 
third hypothesis theorem edges color isolated 
arguing part fact proof theorem see vertex distance gammai gamma gammai gamma vertices gamma gammai gamma color gammai gamma color gamma gammai gamma isolated isolated 
ji ball gammai gamma gammai gamma vertices distance gammai gamma duplicator picks vertex follows immediately shown maintains strong multiplicity invariant isomorphism invariant trivially maintained 
assume strong multiplicity invariant isolated gamma gammai gamma isolated isolated 
strong multiplicity invariant vertices gammaj color isolated 
arguing part fact proof theorem see gammai gamma vertices gammaj gamma gammai gamma color gammai gamma color gamma gammai gamma isolated isolated 
ji ball gammai gamma gammai gamma vertices distance gammai gamma duplicator picks vertex maintaining strong multiplicity invariant 
suppose spoiler picked vertex ball gammai gamma assume safe duplicator trivially maintains isomorphism invariant picking vertex corresponds ball ball look exactly 
hand safe neighborhoods tree techniques similar proof theorem maintain invariants 
leaves case strong multiplicity invariant isolated immediate neighborhoods tree 
duplicator follow strategy proof theorem pick vertex ball gammai gamma gammai gamma gammai gamma color gammai gamma color show maintains strong multiplicity invariant isomorphism invariant clearly maintained 
note gamma gammai gamma isolated isolated isolated ii part fact multiplicity resp gammai gamma times multiplicity resp 
clearly ii imply strong multiplicity invariant maintained 
think theorem modification theorem allow small cycles long near edges appear structure 
proof theorem follows essentially outline proof theorem theorems theorems 
furthermore theorem natural variation theorem holds case built relations 
essential change proof take advantage fact forward edges theorem isolated follows immediately parts theorem 
addition properties gamma ffl fraction forward edges isolated 
modify proof theorem forward edge isolated addition properties demanded 
straightforward details left reader 
summary strong new condition guarantees duplicator winning strategy ehrenfeucht fraiss game 
gives greatly simplified proof directed reachability monadic np 
condition designed directed reachability question versatility shown fact proving connectivity monadic np proof different directed reachability 
furthermore slight variation condition allow small cycles long near edges appear structure leads new strengthened results descriptive complexity presence built relations 
acknowledgments authors grateful joe halpern kolaitis larry stockmeyer moshe vardi giving useful comments earlier version 
furthermore yuri gurevich suggesting define winning condition duplicator structures arbitrary languages restricting attention graphs 
af ajtai fagin 
reachability harder directed undirected finite graphs 
journal symbolic logic march 
ber berge 
graphs hypergraphs 
north holland new york 
beeri kanellakis bancilhon ramakrishnan 
bounds propagation selection logic programs 
proc 
th acm symp 
principles database systems pages 
ch chandra harel 
structure complexity relational queries 
journal computer system sciences 
cos cosmadakis 
logical reducibility monadic np 
proc 
th ieee symp 
foundations computer science pages 
dr de 
second order inductive definability finite structures 
zeitschrift fur mathematische logik und grundlagen der mathematik 
ehr ehrenfeucht 
application games completeness problem formalized theories 
fund 
math 
enderton 
mathematical logic 
academic press new york 
fag fagin 
generalized order spectra polynomial time recognizable sets 
karp editor complexity computation siam ams proceedings vol 
pages 
fag fagin 
monadic generalized spectra 
zeitschrift fur mathematische logik und grundlagen der mathematik 
fag fagin 
degrees acyclicity hypergraphs relational database schemes 
journal acm july 
fra fraiss 
sur quelques classifications des syst emes de relations 
publ 
sci 
univ 
er 

fsv fagin stockmeyer vardi 
monadic np vs monadic np 
information computation july 
gaifman 
local nonlocal properties 
stern editor logic colloquium pages 
north holland 
gj garey johnson 
computers intractability guide theory np completeness 
freeman 
han 
model theoretic methods study elementary logic 
addison henkin tarski editors theory models pages 
north holland 
imm immerman 
relational queries computable polynomial time 
information control 
imm immerman 
descriptive computational complexity 
hartmanis editor computational complexity theory proc 
symp 
applied math vol 
pages 
american mathematical society 
sch schwentick 
graph connectivity monadic np 
proc 
th ieee symp 
foundations computer science pages 
sho shoenfield 
mathematical logic 
addison wesley reading mass 
tur tur 
definability properties finite graphs 
discrete mathematics 
var vardi 
complexity relational query languages 
proc 
th acm symp 
theory computing pages 

