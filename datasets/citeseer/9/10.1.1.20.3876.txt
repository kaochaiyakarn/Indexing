tempo tracking tempogram representation kalman filtering ali cemgil bert kappen peter desain honing snn dept medical physics biophysics music mind machine group university nijmegen netherlands email kun nl kun nl submitted november formulate tempo tracking bayesian framework tempo tracker modeled stochastic dynamical system 
tempo modeled hidden state variable system estimated kalman filter 
kalman filter operates tempogram wavelet multiscale expansion real performance 
important advantage approach possible formulate line real time algorithms 
simulation results systematically collected set midi piano performances yesterday michelle beatles shows accurate tracking approximately beats 
important interesting subtask automatic music transcription tempo tracking follow tempo performance contains expressive timing tempo variations 
tempo fluctuations correctly identified easier separate continuous expressive timing discrete note categories quantization 
sense tempo carried beats tempo tracking related study beat induction perception beats pulse listening music see desain honing 
unclear precisely constitutes tempo relates perception structure 
tempo perceptual construct directly measured performance 
significant body research psychological computational modeling aspects tempo tracking 
early describes systematic study modeling human behavior tracking tempo fluctuations artificially constructed stimuli 
longuet higgins proposes musical parser produces metrical interpretation performed music tracking tempo changes 
knowledge meter helps tempo tracker quantize performance 
desain honing describe connectionist model quantization relaxation network principle steering adjacent time intervals integer multiples 
tempo tracker helps arrive correct interpretation performance 
models systematically tested empirical data 
quantizers play important role addressing difficult problem correct tempo interpretation defining results simpler quantization cemgil 
large jones describe empirical study tempo tracking interpreting observed human behavior terms oscillator model 
peculiar characteristic model insensitive evidence gathered material expected beats suggesting perception tempo change indifferent events interval 
discusses problems regarding phase adaptation 
class models prior knowledge form annotated score dannenberg puckette 
match known score incoming performance data 
puckette uses statistical learning algorithm train system multiple performances 
information hand tempo tracking stays non trivial problem 
attempts deal directly audio signal goto muraoka scheirer prior knowledge 
models assume constant tempo albeit timing fluctuations may fact tempo trackers beat trackers 
successful music steady beat popular music report problems data jazz music 
tempo track models assume initial tempo beat length known start tempo tracking process longuet higgins large jones 
research addressing arrive reasonable estimate 
longuet higgins lee propose model score data scheirer audio data 
complete model incorporate aspects 
formulate tempo tracking probabilistic framework tempo tracker modeled stochastic dynamical system 
tempo modeled hidden state variable system estimated kalman filtering 
kalman filter operates multiscale representation real performance call tempogram 
respect tempogram analogous wavelet transform vetterli 
context tempo tracking wavelet analysis related techniques investigated various researchers smith todd 
similar comb filter basis scheirer 
tempogram related periodicity transform proposed uses time localized basis 
kalman filters applied music domain polyphonic pitch tracking sterian audio restoration godsill rayner 
modeling point view framework discussed resemblance sterian views transcription model segmentation time frequency image 
outline follows consider problem tapping noisy introduce kalman filter extensions 
subsequently introduce tempogram representation extract beats performances discuss probabilistic interpretation 
discuss parameter estimation issues data 
report simulation results system systematically collected data set solo piano performances beatles songs yesterday michelle 
dynamical systems kalman filter mathematically dynamical system characterized set state variables set state transition equations describe state variables evolve time 
example perfect described dynamical system state variables beat period 
values state variables th step 
beat occurs 
period perfect constant 

vector notation letting 
write linear state transition model initial state 
system fully specified 
example clicks tempo beats minute 
sec 
click occurs time sec beats occur perfect period stays constant 
deterministic model realistic natural music performance tracking tempo presence tempo fluctuations expressive timing deviations 
tempo fluctuations may modeled introducing noise term corrupts state vector gaussian random vector mean diagonal covariance matrix tempo drift initial tempo quickly variance large 
hand constant tempo case 
music performance actual beat period 
observed directly 
example suppose expert tapping performance beat level 
task repeated piece observe time slightly different tempo track 
alternative suppose know score performance identify onsets coincide beat 
due small scale expressive timing deviations onsets noisy best observe noisy versions actual beats 
denote noisy beat contrast actual unobservable beat mathematically 
beat step get noisy observation process 
formulation tempo tracking corresponds estimation hidden variables observations upto th step 
note blind tempo tracking task score known noisy beat directly observed expert tapping score guide 
noisy beat induced events music 
section technique estimate noisy beat noisy period 
real performance 
random vector said gaussian mean covariance matrix probability density pj exp case write equations define linear dynamical system noises assumed gaussian relationships variables linear 
state vectors gaussian distributions 
gaussian distribution fully characterized mean covariance matrix context linear dynamical systems quantities estimated efficiently kalman filter kalman roweis ghahramani 
operation filter illustrated 
extensions basic model extended directions 
linearity constraint kalman filter relaxed 
tempo tracking extension necessary ensure period 
positive 
define state transition model warped space defined mapping log 
warping ensures perceptually plausible assumption tempo changes relative absolute 
example warping deceleration 

likelihood acceleration 

state space extended additional dynamic variables additional variables store information past states terms acceleration introduce inertia system 
inertia reduces random walk behavior state space renders smooth state trajectories 
result accurate predictions 
observation noise modeled mixture gaussians 
choice rationale follow tempo fluctuations observation noise variance broad 
broad noise covariance indicates observations reliable effect state estimates 
extreme case observations practically missing observations effect state estimates 
hand narrow filter sensitive outliers noise covariance regardless distance observation prediction 
outliers explicitely modeled mixture gaussians example narrow gaussian normal operation broad gaussian outliers 
switching mechanism implemented discrete variable indicates th observation outlier 
words different noise covariance depending value mathematically write statement jc 
observed define prior probability sum possible settings jc 
compare switching kalman filter standard kalman filter 
switch variable system robust outliers consequently realistic state estimates obtained 
review general classes switching kalman filters see murphy 
dynamical model tempo tracker jc 
take binary discrete switch variable 
note eq 
observable space dimensional includes contrast dimensional observable 
tempogram representation previous section assumed beat observed step real musical situation beat observed directly performance data 
sensation beat emerges collection events say single onsets 
example rhythm induces beats coincide onset 
section define probability distribution assigns probability masses possible beat interpretations performance 
bayesian formulation problem jt tj 
onset list 
context beat interpretation tuple local beat 
local log period 
term tj eq probability onset list tempo track 
observed tj function called likelihood 
second term eq prior distribution 
prior viewed function weights likelihood space 
reasonable assume likelihood tj high onsets performance coincide beats tempo track 
construct likelihood function having property propose similarity measure performance local constant tempo track 
define continuous time signal take exp gaussian function variance represent local tempo track pulse train dirac delta function represents impulse located coefficients positive constants constant 
see 
real time applications causal analysis desirable set zero 
sequence form infinite impulse response iir comb filters scheirer adopt 
define tempogram inner product tg dt 
tempogram representation interpreted response comb filter bank analogous multiscale representation wavelet transform correspond transition scaling parameters vetterli 
tempogram parameters simple interpretations 
filter coefficient adjust time locality basis functions 
basis functions extend infinity locality lost 
basis degenerates single dirac pulse tempogram effectively equal gives information local period 
variance parameter corresponds amount small scale expressive deviation onsets timing 
large tempogram gets smeared beat interpretations equally 
get spiky tempogram beat interpretations zero probability 
show tempogram obtained simple onset sequence 
define likelihood tj exp tg 
combined prior tempogram gives estimate beat interpretations 
model training section review techniques parameter estimation 
relationships variables graphical model 
graphical model directed acyclic graph nodes represent variables missing directed links represent conditional independence relations 
distributions specified far summarized table 
model distribution parameters state transition eq 
js switching observation eq 
js switch prior eq 
tempogram eq tj table summary conditional distributions parameters 
resulting graphical model shown 
example graphical model directed link encode js 
links missing 
principle jointly optimize model parameters 
approach computationally intensive 
expense getting suboptimal solution assume observe noisy tempo track observation effectively decouples model parts see fig 
kalman filter state transition model observation switch model ii tempogram 
train part separately 
estimation performance data studies score available extract performance matching notes coincide beat quarter note level bar note 
note beat take median onset times 
performance compute log extracted noisy beats 
denote resulting tempo track scores notes beat 
interpolate missing beats switching kalman filter parameters diag 
estimation state transition parameters estimate state transition model parameters em algorithm ghahramani hinton learns linear dynamics space :10.1.1.131.8274
em algorithm monotonically increases likelihood observed tempo track 
put way parameters adjusted way probability observation maximized predictive distribution 
likelihood simply predictive distribution evaluated observation see 
estimation switch parameters observation model gaussian mixture diagonal prior probability estimate jointly state transition parameters noise model totally independent tempogram representation 
observation noise model reflect uncertainty tempogram example expected amount deviations estimates due spurious local maxima 
estimate tempogram noise standard em methods sample tempogram sample posterior distribution tj 
note estimated step em algorithm finding parameters estimation tempogram parameters defined tempogram likelihood tj denotes tempogram parameters 
assume uniform prior posterior probability written jt tj tj normalization constant tj tj 
estimate tempogram parameters maximum likelihood approach 
write log likelihood observed tempo track log gjt log jt note quantity equation function parameters 
tempo tracks dataset complete data log likelihood simply sum individual log likelihoods 
log jt th performance corresponding tempo track 
evaluation tempo trackers described tested ad hoc examples 
validate tempo tracking models systematic data rigorous testing necessary 
tempo tracker evaluated systematically modulating tempo data instance applying instantaneous gradual tempo changes comparing models responses human behavior dannenberg 
approach evaluate tempo trackers systematically collected set natural data monitoring piano performances expressive tempo change free 
type data advantage reflecting type data expects automated music transcription systems deal 
approach adopted study 
data experiment invited play arrangements beatles songs michelle yesterday 
pieces relatively simple rhythmic structure ample opportunity add expressiveness fluctuating tempo 
subjects consisted professional jazz players pj professional classical performers pc amateur classical ac 
arrangement played tempo conditions repetitions tempo condition 
tempo conditions normal slow fast tempo musically realistic range judgment performer 
results twelve subjects subjects repetitions pieces performances 
performances recorded yamaha pro midi grand piano opcode vision 
able derive tempo measurements related musical structure beat bar performances matched midi scores structure matcher 
available honing 
midi data available url www kun nl mmm heading download 
kalman filter training results performances michelle training set yesterday test set 
find appropriate filter order dimensionality trained kalman filters orders rhythmic levels beat quarter note level bar note level 
shows training testing results function filter order 
extending filter order increasing size state space loosely corresponds past past 
bar level higher order filters merely results overfitting indicated decreasing test likelihood 
contrast beat level likelihood test set increases jump order 
effectively order corresponds memory store state information past bars 
words tempo fluctuations beat level structure higher dimensional state transition model produce accurate predictions 
tempogram training results tempogram model order iir comb basis 
choice leaves free parameters need estimated data coefficient comb filter width gaussian window 
obtain optimal parameter values maximization log likelihood equation michelle dataset 
resulting likelihood surface shown 
optimal parameters shown table 
non causal causal table optimal tempogram parameters 
initialization fully automated tempo tracker initial state estimated data 
tracking experiments initialized filter beat level computing tempogram seconds performance 
assuming flat prior compute posterior marginal jt jt 
note operation just equivalent summation dimension tempogram see 
beatles dataset observed performances piece log period arg max jt corresponds level estimate consistent 
michelle level beat level yesterday half beat eighth note level 
piece begins notes onset information prior knowledge half beat level reasonable solution 
yesterday test tracking performance corrected estimate beat level 
estimate similar procedure performances data set started beat chosen onset piece 
state variables set zero 
chosen broad initial state covariance 
evaluation tempo tracking performance evaluated accuracy tempo tracking performance complete model 
accuracy tempo tracking measured criterion max target true tempo track estimated tempo track 
window function 
results gaussian window function exp 
width window chosen sec corresponds roughly spread onsets mechanical means performance short rhythms cemgil 
checked intuitively measure similar normalized inner product tempogram calculation difference max operator merely avoids double counting 
example target ordinary inner product give beat correct 
proposed measure gives case 
tracking index roughly interpreted percentage correct beats 
example effectively means percent estimated beats near vicinity targets 
results test relative relevance model components designed experiment evaluate tempo tracking performance different conditions 
varied filter order enabled disabled switching 
purpose trained filters large small state space dimension beat level michelle dataset 
tested model causal non causal 
test tempogram necessary propose simple onset measurement model 
alternative model observation taken nearest onset kalman filter prediction 
case onsets interval prediction declare observation missing note implicit switching mechanism 
table show tracking results averaged performances yesterday dataset 
estimated tempo tracks obtained non causal tempogram kalman filtering 
case kalman smoothed estimates significantly different 
results suggest yesterday dataset higher order filter binary switching mechanism improve tracking performance 
presence tempogram tracking performance accurate consistent note lower standard deviations 
base line performance criteria compute best constant tempo track linear regression estimated tempo tracks 
case average tracking index obtained constant tempo approximation poor confirming need tempo tracking 
filter order switching tempogram tempogram table average tracking performance standard deviations yesterday dataset non causal tempogram 
denotes case switch prior 
denotes absence switching case 
repeated experiment causal tempogram computed tracking performance predicted filtered smoothed estimates table show results switching kalman filter 
results switching significantly different 
expect tracking index predicted estimates lower 
contrast non causal tempogram smoothing improves tempo tracking results comparable performance non causal tempogram 
causal filter order predicted filtered smoothed table average tracking performance yesterday dataset 
figures indicate tracking index followed standard deviation 
label non causal refers tempogram calculated non causal comb filters 
labels predicted filtered smoothed refer state estimates obtained kalman filter smoother 
naturally performance tracker depends amount tempo variations introduced performer 
example tempo tracker fails consistently subject tends quite tempo variation find tempo tracking performance significantly different different groups table 
consider predictions see performances professional classical predictable 
different tempo conditions table results similar 
expect slower performances predictions accurate 
potential reasons 
performance criteria independent absolute tempo window fixed 
second slower performances room adding expression 
non causal causal subject group filtered predicted filtered smoothed best const 
prof jazz amateur classical prof classical table tracking averages subject groups 
right column shows results obtained best constant tempo track 
label non causal refers tempogram calculated non causal comb filters 
labels predicted filtered smoothed refer state estimates obtained kalman filter smoother 
non causal causal condition filtered predicted filtered smoothed best const 
fast normal slow table tracking averages tempo conditions 
right column shows results obtained best constant tempo track 
label non causal refers tempogram calculated non causal comb filters 
labels predicted filtered smoothed refer state estimates obtained kalman filter smoother 
subject claimed heard beatles songs 
discussion formulated tempo tracking model probabilistic framework 
proposed model consist dynamical system kalman filter measurement model tempogram 
methods proposed literature viewed particular choices dynamical model measurement model bayesian formulation exhibits advantages contrast models tempo tracking 
components model natural probabilistic interpretations 
important practical consequence interpretation uncertainties easily quantified integrated system 
desired quantities inferred consistently 
example quantify distribution tempo deviations expressive timing actual behavior tempo tracker arises automatically priori assumptions 
contrast models invent ad hoc methods avoid undesired unexpected behavior real data 
additionally prior knowledge smoothness constraints state transition model particular choice measurement model explicit changed needed 
example state transition model audio midi measurement model needs elaborated 
advantage large class related models efficient inference learning algorithms understood ghahramani hinton :10.1.1.131.8274
appealing train tempo trackers different properties automatically data 
demonstrated model parameters estimated experimental data 
investigated potential directions basic dynamical model improved simplified 
tested relative relevance filter order switching tempogram representation systematically collected set natural data 
dataset consists polyphonic piano performances beatles songs yesterday michelle contains lot tempo fluctuation indicated poor constant tempo fits 
test results beatles dataset suggest high order filter improve tempo tracking performance beat level filters capture structure tempo deviations generate accurate predictions additional precision important tempo tracking 
indifference may due fact training criteria maximum likelihood testing criteria tracking index whilst related identical 
imagine scenarios accurate prediction crucial 
example real time accompaniment situation application needs generate events bar 
test results indicate simple switching mechanism useful 
tempogram gives robust local estimate beat tempo values correct beat unambiguously identified 
indifference switching artifact dataset lacks extensive 
switching noise model elaborated replace tempogram rhythm quantizer cemgil 
test relevance proposed tempogram representation tracking performance compared simpler onset alternative 
results indicate onset case tracking performance significantly decreases suggesting tempogram important component system 
noted choice comb basis set tempogram calculation arbitrary 
principle formulate richer tempogram model example including parameters control shape basis functions 
parameters model similarly optimized likelihood maximization target tempo tracks 
unfortunately optimization generic technique gradient descent requires computation tempogram step computationally quite expensive 
model adjustable parameters eventually overfit 
demonstrated model online filtering offline smoothing 
online processing necessary real time applications automatic accompaniment offline processing desirable transcription applications 
acknowledgments research supported technology foundation stw applied science division nwo technology programme dutch ministry economic affairs 
thom comments earlier versions manuscript ric ashley paul mmm group contribution design running experiment gratefully acknowledge northwestern university nijmegen university excellent performances 
cemgil desain kappen 
rhythm quantization transcription 
computer music journal 
dannenberg 
line algorithm real time accompaniment 
proceedings icmc san francisco 
pages 
dannenberg 
music understanding computer 
proceedings international workshop knowledge technology arts 
desain honing 
quantization musical time connectionist approach 
todd loy editors music connectionism pages 
mit press cambridge mass desain honing 
brief beat induction 
proceedings icmc san francisco 
ghahramani zoubin hinton parameter estimation linear dynamical systems 
crg tr 
technical report university 
dept computer science 
godsill simon rayner peter 
digital audio restoration statistical model approach 
springer verlag 
goto muraoka 
music understanding beat level real time beat tracking audio signals 
rosenthal david okuno hiroshi editors computational auditory scene analysis 
desain honing 
match evaluation different approaches score performance matching 
computer music journal 
honing 
environment analysing modifying generating expression music 
proceedings icmc san francisco 
pages 
kalman 
new approach linear filtering prediction problems 
transaction basic engineering pages 

wavelet transform analysis synthesis processing speech music sounds 
computer music journal 
large jones 
dynamics attending track time varying events 
psychological review 
longuet higgins lee 
perception musical rhythms 
perception 
longuet higgins 
perception melodies 
nature 

timing temporal tracking 
tno 
murphy kevin 
switching kalman filters 
technical report dept computer science university california berkeley 
oliver vetterli martin 

wavelets signal processing 
ieee signal processing magazine october 
roweis sam ghahramani zoubin 

unifying review linear gaussian models 
neural computation 
scheirer 
tempo beat analysis acoustic musical signals 
journal acoustical society america 

periodicity transforms 
ieee transactions signal processing 
smith leigh 
multiresolution time frequency analysis interpretation musical rhythm 
phd thesis university western australia 
sterian model segmentation time frequency images musical transcription 
phd thesis university michigan ann arbor 
todd neil 

auditory primal sketch multiscale model rhythmic grouping 
journal new music research 

interactive midi accompanist 
computer music journal 

synthetic performer context live performance 
proceedings icmc san francisco 
international computer music association pages 
puckette 
synthetic rehearsal training synthetic performer 
proceedings icmc san francisco 
international computer music association pages 
algorithm starts initial state estimate 
presence evidence state estimate gives rise prediction observable space beat observed state updated new evidence 
note uncertainty shrinks basis current state new prediction steps repeated evidence processed obtain filtered estimates jjj jjj case 
filtered estimates updated backtracking obtain smoothed estimates ijn ijn kalman smoothing 
operation kalman filter smoother 
system equations 
subfigure coordinate system represents hidden state space coordinate system represent observable space hidden space axes represent phase period 
tracker 
ellipse center correspond covariance mean hidden state estimate jjk jjk jjk jjk denote estimated mean covariance observations observable space vertical axis represents predictive probability distribution 
state estimate state predicted 
propagated measurement model obtain mixture gaussians mixing coefficients observation way mean prediction highly outlier 
broad gaussian active reflects fact observations expected noisy 
consequently updated state estimate different prediction 
uncertainty prediction higher observations obtained smoothed estimates jj jj obtained 
estimated state trajectory shows observation correctly interpreted outlier 
contrast switching kalman filter ordinary kalman filter sensitive outliers 
contrast updated state estimate way prediction 
consequently state trajectory estimated 
simply due fact observation model account presence outliers 
comparison standard kalman filter switching kalman filter 
tempogram calculation 
continuous signal obtained onset list convolution gaussian function 
different basis functions shown 
localized different 
tempogram calculated inner product 
due sparse nature basis functions inner product operation implemented efficiently 
simple rhythm tempogram 
axes correspond respectively 
bottom shows onset sequence triangles 
assuming flat priors curve axis marginal jt exp tg 
note jt peaks correspond quarter sixteenth note level dotted quarter half note levels original notation 
distribution estimate reasonable initial state 
kalman filter tempogram switch graphical model train test log likelihood 
beat level hidden state space dimension train test log likelihood 
bar level hidden state space dimension kalman filter training 
training set michelle test set yesterday 
log likelihood surface tempogram parameters michelle dataset 
