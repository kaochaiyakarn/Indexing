digital cameras extending dynamic range combining differently exposed pictures mann picard massachusetts institute technology ames street cambridge ma corresponding author currently university toronto contact info tel fax steve media mit edu toronto edu toronto edu mann www org bibtex info original appearances techreport mann author mann picard title digital cameras extending dynamic range combining differently exposed pictures number institution media lab perceptual computing section address boston massachusetts year note appears th annual conference cambridge massachusetts may pages everyday scenes far greater dynamic range recorded photographic film electronic imaging apparatus digital camera video 
set pictures identical exposure collectively show dynamic range single picture 
dark pictures show highlight details scene washed properly exposed picture light pictures show shadow detail appear properly exposed picture 
propose means combining differently exposed pictures obtain single picture extended dynamic range improved color fidelity 
set digital pictures may produce single picture practical purposes sense floating point image kind dynamic range accustomed seeing typical floating point representations opposed integer images generated 
method completely automatic requires human intervention requires knowledge response function imaging device 
works reliably images digital camera unknown response scanner unknown response scanning unknown film type 


advantage digital photography allows things traditional analog photography 
digital desirable desirable facilitates instant feedback ability rapidly transmit high quality world ease manipulation 
digital imaging imposes certain limitations ways think images 
ideally want bits mathematical parametric representation continuous underlying intensity variations projected image plane represented form allows easy transmission storage analysis 
spatial resolution digital images improved years approaching level image may regarded essentially continuous essentially free pixels 
high resolution digital images give spatial continuity analog photography ability view pictures right away transmit wireless links analyze computationally may pixels practical purposes assume image function real coordinates pixels represented array integers assume different values color channel 
called bit color known full color true color direct visual full true names imply 
particular images typically manipulated bit precision arithmetic 
simple manipulations image editing program photoshop quickly degrade quality images introducing gaps histograms grow successive computation 
purpose examine recovery true image real valued quantity light projected flat surface 
regard true image collection analog photometric quantities measured array linearized having floatingpoint precision essentially practical purposes 
course images stored computer digital 
floating point number digital 
double precision bit floating point number close analog spirit intent 
growing word size desktop computational hardware floating point arithmetic practical large images 
new dec alpha computer word size bits easily handle images double precision arrays 
double precision new 
years languages fortran supported floating point arithmetic widely scientific community floating point calculations supported popular image manipulation software photoshop live picture 
capturing images essentially unlimited dynamic range digitally represented behave analog images allows capture surpass benefits traditionally offered truly analog image formats film 

camera regard image collection photometric measurements camera array light meters 
traditional imaging measurements pixels light meter sensor element unknown nonlinearity followed quantization measurement having bit precision 

dynamic range amplitude resolution everyday scenes contain tremendous dynamic range 
example scene lit room window background window observe beautiful blue summer sky white clouds 
picture exposed indoor scene render window white blob room scarcely discern shape window see 
course exposed sky outside interior appear completely black 
cameras analog digital tend limited dynamic range 
possible extend dynamic range various means 
example case photographic film thicker tradeoffs thicker results increased scattering results decreased spatial resolution 
nyquist showed signal reconstructed sampling finite resolution domain space time assumed infinite dynamic range 
hand infinite spatial resolution limited dynamic range bit image depth curtis oppenheim showed obtain perfect reconstruction 
tradeoff image resolution image depth slightly different way image 
days digital image processing charles wyckoff formulated multiple layer photographic 
wyckoff film layers identical spectral sensitivities roughly equally sensitive wavelengths light differed sensitivities light bottom layer slow iso rating top layer fast iso rating 
picture taken wyckoff film record dynamic range capture subtle differences exposure 
furthermore wyckoff picture spatial resolution appears overcome resolution depth tradeoff different color layer specular density opposed diffuse density silver 
wyckoff printed greyscale pictures color fast yellow layer print blue medium magenta layer print green slow cyan layer print red 
result image similar data visualization systems display floating point arrays computer screen limited dynamic range 
wyckoff known pictures motion pictures nuclear explosions clearly see faint glow bomb just exploded appear blue exposed fast top layer details highlights explosion appeared white exposed layers details discernable primarily account slow bottom layer 

combining multiple pictures scene idea computationally combining differently exposed pictures scene obtain extended dynamic range proposed images assumed taken roughly position space possibly different camera orientations pan tilt rotation optical axis different zoom settings 
describe detail computational means combining differently exposed pictures floating point image array assume simpler case pictures taken camera fixed location space fixed orientation fixed focal length lens 
simpler case corresponds pictures differ exposure 
refer collection pictures differ exposure wyckoff set honor charles wyckoff exploit set pictures collectively 
photographers procedure called exposure bracketing trying variety exposure settings selecting exposure prefer produce wyckoff sets generally intent merely selecting best image set exploiting full potential value images collectively 

exposure bracketing digital images dynamic range scene exceeds range recording medium photographers tend expose areas interest scene 
example scene containing people usually exposed show detail fig 
expense details scene 
additionally case picture taken immediately afterward fig 
times exposure time surrounding contextual details scene show nicely 
ideally picture needed capture entire dynamic range scene wouldn need worry picture darken simply appropriate lookup operator 
lookup operator mean spatially invariant nonlinearity 
lookup operator continuous analog lookup table 
gamma correction example lookup operator 
due various noise sources quantization noise lookup operator able compensate mann family standing outside old building camera inside 
exposure selected people show nicely 
limited amount 
example recover detail faces people fig 

increased exposure caused information lost combined effect saturation noise 
similarly done recover shadow details darker portions fig 
areas pixel values uniformly zero 
slightly brighter areas variation pixels variation subject extreme quantization noise 
example dark areas pixel values fluctuate zero bit precision 
camera small number bits depth camera high spatial resolution may capture continuous tone image 
stat camera photo mechanical transfer pmt machine able capture images appear continuous tone due screen film record distinct levels 
possible film essentially unlimited spatial resolution recording screen lower dpi spatial resolution 
digital photography video applications spatial resolution lower 
luxury essentially infinite spatial resolution pmt systems liberty trade spatial resolution improved dynamic range 
propose exposure bracketing alternative tradeoff time axis exchanging reduced frame rate improved dynamic range reduced spatial resolution improved dynamic range 
particular image desired video camera digital video applications needed frames second camera capable producing frames second 

self calibrating camera numerical quantity appearing pixel image seldom linearly related quantity light falling corresponding sensor element 
case image scanned film density film varies nonlinearly quantity light exposed 
furthermore fact quite photographers desire nonlinear relationship nonlinearities tend image look better printed media limited dynamic range 
exposure increased factor compared fig 
result interior building nicely visible 
scanner introduce unknown nonlinearity 
propose simple algorithm finding pointwise nonlinearity entire process maps light projected point image plane pointwise value picture constant scale factor 
ignore section fact pixel assume finite number values fact finite number pixels image effects image noise 
select relatively dark pixel image observe location numerical value know actual quantity light gave rise call unknown quantity result unknown mapping applied unknown quantity light denote 

locate corresponding pixel image 
know times light gave rise 
kq 
convenience denote kq 
search image pixel numerical value note coordinates pixel 
call coordinates 

look coordinates image observe numerical quantity 
know times light fell 
kq 
convenience denote 
far kq 
search image pixel numerical value note coordinates 

continuing fashion obtain nonlinearity image sensor points kq 
construct points plot function quantity light measured arbitrary units 
illustrate process diagrammatically fig introduced plot numerical values image numerical values second image kq call range range plot axes range constant domain ratio camera calibrated may calibration curve combine sets pictures ones fig 

pictures calibrate camera need ones composite 
fact smaller value calibrate camera kq kq kq range range plot response curve procedure finding pointwise nonlinearity image sensor pictures differing exposures 
range range plot plot pixel values image corresponding pixel values call range range plot 
response curve points response curve pictures knowledge characteristics image sensor 
logarithmic exposure scale photographers samples fall uniformly log axis 
obtained sample points response curve fig 
general estimating function graph versus kq difficult problem 
place certain restrictions example suppose semi monotonic increases remains constant increasing 
response curve semi monotonic plot depicted fig 
impose picture lens cap subtracting resulting pixel value images 
step insure plot fig passes origin 
may willing place stronger restrictions response curve 
example commonly empirical law film ff fl gives rise canonical log density versus log exposure curve linear 
dmin minimum density ff subtracted suggested picture lens cap plot take form fl find film contrast parameter fl applying regression points known range range plot 

quantization noise practice pixel values quantized plot really staircase function 
quantized version continuous semi monotonic function 
addition quantization effects noise may due variety causes thermal noise image sensor grain film slight misregistration images slight changes camera position scene content lighting 
consider joint histogram images fig 
discrete equivalent practical situation violate assumption negative film sun picture sun rays concentrated film sufficiently long time burn hole negative film 
result print brightest object scene sun appears black 
cross histogram images figs 

cross histogram images image 
images depth bits cross histogram theta image regardless sizes images obtained 
bin count origin lower left corner indicates pixels black value zero location images 
cross histogram displayed image 
darker areas correspond greater bin counts 
non empty bins shown black 
ideally curve non empty bins due noise images curve 
log density certainty log density log response curves wyckoff set note log scale opposed scale fig response curve linear 
response curves corresponding different exposures depicted taken different films 
dashed line may thought longer exposure faster layer layer wyckoff film dotted line may regarded shorter exposure slow layer layer wyckoff film 
certainty functions calculated differentiating response curves 
hypothetical curves re aligned images combined 
response ideal composite indicated thin solid line 
exposure bracketing layers wyckoff film extend response indefinitely 
range range plot fig 
array pixel images assume distinct values 
due noise see fat ridge staircase 
ideally points staircase defined quantizing range range plot practice find considerable number non empty bins fig 


combining images different exposure point response curve fitting data range range plot fig shift response curve left right get curves exposures fig 

shadow areas areas low exposure quantity light scene pronounced effect dashed exposure shadow detail scene portion dashed line relatively steep 
highlight detail saturate exposure dotted exposure 
general parts film exposed crossover image corresponding pictures figs 

black denotes pixel locations fig 
certain images fig 
contribute composite 
white denotes pixel locations fig 
certain images contribute composite 
practice take weighted sum images abrupt depicted 
extremes greatly greatly detail lost longer distinguish small changes light level resulting changes film density small fall noise floor operating flat parts fig 
hand steep portions response curves correspond detail accurately recovered desirable operating points 
regions small changes light cause large changes measured value response function measurements highly quantized bit precision small differences measured quantities remain discernable 
tempted plot derivatives hypothetical response curves fig 
call certainty functions 
glance tempted composite differently exposed pictures manually combining light regions darker pictures dark regions lighter pictures manually selecting middle fig 
pasting top fig 

wish algorithm automatically combine images 
furthermore boundary fig 
light regions dark regions general smooth shape difficult trace hand 
pasting irregular region fig 
fig 
amounts choosing point composite source image higher certainty 
abrupt changes resulting suddenly switching image introduce unpleasant artifacts compute weighted average 
pixel composite shadow highlight transition region drawn input images weighting certainty functions 
provides gradual transition images shadow detail comes primarily lighter image highlight detail comes primarily darker image 
extended response image array pictures figs 
floating point array distinct values displayed conventional bit display device 
wyckoff composite derived fig 
fig 
reduced contrast quantized bit image depth 

dynamic range dynamic domain tekalp irani peleg mann picard proposed methods combining multiple pictures identical exposure differ camera position 
result increased spatial resolution 
images big fit screen look small movable viewport scrolling exploring part image domain time 
composite image floating point array deep conventional screen depths bits bits color channel constructed slider control allow user interactively look part image range time 
user slides control back forth depending area interest composite image 
control screen range scrolling window screen domain showing vast tonal range piece time 
course able obtain view fig sliding control left view fig sliding control right 
image big fit screen subsample domain fit screen 
analogously applied appropriate range subsampling quantization bits floating point composite image screen display print fig 
quantization applied nonlinearity restored appearance image familiar tonal scale photographers accustomed added appropriate amount noise dither worth mentioning final nonlinearity quantization selects tonal range interest 
regard derivative certainty function depicting wyckoff spectrum regions emphasized analogous conventional bandpass filter selects frequencies interest 
elements wyckoff set having equally spaced certainty functions identical shape analogous bank constant filters 
desired single print just try formulate super low contrast film image sensor 
superiority wyckoff composite lies ability control process going low contrast medium 
example apply homomorphic filtering operation dither perceivable effect bit image reducing wyckoff composite bits dither noticable improvement 
final composite bring improved details high spatial frequencies reducing unimportant changes density low spatial frequencies 

wyckoff analysis synthesis filterbanks regard wyckoff film exposure bracketing performing analysis decomposing light falling sensor wyckoff layers 
proposed algorithm provides synthesis reconstruct floating point image array dynamic range original light falling image plane 
analysis synthesis concept illustrated fig 
analysis synthesis concept suggests possibility wyckoff layer decomposition wyckoff filter treat shadows highlights image differently 
example wish sharpen highlights image affecting shadows 
wyckoff filter provides new kind filtering amplitude domain filtering opposed classic fourier domain spatial domain temporal domain spatiotemporal filters 
envision generalized nyquist theory reconstruction amplitude samples augment classic sampling theory 

concept part larger framework called description way scene responds light 
space possible photometric measurements taken possible photometric excitation 
regarding image size theta pixels point vector ir mn allows consider set differently exposed images prior nonlinearities quantization colinear vectors ir mn furthermore obtain multiple pictures scene differing lighting span subspace ir mn call subspace 
set pictures scene taken particular lighting span particular subspace synthesize pictures taken combination light sources 
extent multichannel image color having channels having channels collection vectors set multiple channel pictures differing lighting associate vectors 
call set vectors 
shown set call subspace spans useful space 
example set color pictures scene differing lighting taken white lights various places scene synthesize result having taken picture colored lights locations 

summary means combining multiple digital images differ exposure arrive extended response floating point image array 
method proceeds follows 
set pictures set pictures taken camera determine camera pointwise response function self calibration method section 
linearize images undo nonlinear response desired map response curves desired final response curve 

compute certainty function differentiating response function 
certainty function image appropriately shifting certainty function exposure axis 

compute weighted sum images weighting certainty functions 
composite may explored interactively quantized conventional display device 
furthermore regard wyckoff film exposure bracketing performing analysis decomposing light falling sensor wyckoff layers 
proposed algorithm provides synthesis floating point image array dynamic range original light falling image plane 
suggests possibility wyckoff filter example blur highlights image sharpening shadows 
wyckoff filters amplitude domain contrast fourier filters frequency domain spatiotemporal filters space time domains 

curtis oppenheim signal reconstruction fourier transform sign information technical report mit research laboratory electronics may 
wyckoff experimental extended response film tech 
rep 
boston massachusetts march 
wyckoff experimental extended response film newsletter june july 
mann compositing multiple pictures scene proceedings th annual conference cambridge massachusetts society imaging science technology may 
tekalp high resolution image reconstruction lower resolution image sequences space varying image restoration proc 
int 
conf 
acoust speech sig 
proc san francisco ca pp 
iii ieee mar 
irani peleg improving resolution image registration cvgip vol 
pp 
may 
mann picard virtual constructing highquality images video proceedings ieee international conference image processing austin texas nov 
jr image processing context visual model proc 
ieee vol 
pp 
july 
new language imaging photo electronic imaging vol 
pp 

www com pei mann html 
mann 
unpublished report available author 
submitted siggraph 
see example images org july 
wyckoff filters analysis combiner synthesis wyckoff set reconstruction light falling image sensor light falling image sensor properly exposed proper exposure layers wyckoff film decompose light falling film differently exposed images 
images may regarded filtered version light falling image sensor 
wyckoff filters act filterbank capture overlapping portions exposure spectrum perform analysis light falling image sensor 
set pictures obtain perfect reconstruction original light intensity falling image sensor 
