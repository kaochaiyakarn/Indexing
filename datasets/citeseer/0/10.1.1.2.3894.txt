packet pair bandwidth estimation stochastic analysis single congested node kang liu min dai loguinov texas university college station tx usa cs tamu edu min ee tamu edu city university new york new york ny usa gc cuny edu examine problem estimating capacity bottleneck links available bandwidth endto paths non negligible cross traffic conditions 
simple stochastic analysis problem context single congested node derive results allow construction asymptotically accurate bandwidth estimators 
develop generic queuing model internet router solve estimation problem assuming renewal cross traffic bottleneck link 
noticing renewal assumption internet flows strong investigate alternative filtering solution asymptotically converges desired values bottleneck capacity available bandwidth arbitrary including non stationary cross traffic 
methods simultaneously estimates types bandwidth provably accurate 
finish discussing impossibility similar estimator paths congested routers 
bandwidth estimation important mature area internet research :10.1.1.137.121:10.1.1.47.3588:10.1.1.36.7418
typical goal studies understand characteristics internet paths cross traffic variety router assisted measurements 
proposed techniques usually fall categories estimate bottleneck bandwidth deal available bandwidth :10.1.1.137.121:10.1.1.36.7418
recall bandwidth metric refers capacity slowest link path generally defined smallest average unused bandwidth routers path 
majority existing bottleneck bandwidth estimation methods justified assuming cross traffic path usually examined simulations experiments show realistic network conditions :10.1.1.137.121:10.1.1.36.7418
available bandwidth estimation crosstraffic essential usually taken account analysis analysis predominantly assumes fluid model flows implicitly requires models accurate non fluid cases 
simulations experiments verify proposed methods capable dealing bursty conditions real internet cross traffic 
understand reasons lack stochastic modeling field studies single node bandwidth measurement problem derives closed form estimator capacity available bandwidth average rate cross traffic link 
arbitrary cross traffic arrival process define asymptotic time average assume exists finite lim du 
notice existence require stationarity cross traffic impose restrictions arrival individual packets router 
definitions available bandwidth average cross traffic rate possible find serves purpose provides clean mathematically tractable metric 
half deals bandwidth estimation renewal cross traffic analysis train methods 
show certain conditions simplest cross traffic histogram methods commonly prior misled producing inaccurate estimates overcome limitation developing asymptotically accurate model approach eventually requires ergodicity cross traffic build model imposes restriction sampling process pasta principles suggested allows cross traffic exhibit arbitrary characteristics 
previous studies prove corresponding pasta estimators converge correct values show simultaneously measure capacity available bandwidth knowledge estimator measures link assumes non negligible non fluid cross traffic derivations applies non stationary 
note estimator measure multiple links inherent purpose measurement tool multi node paths understand associated stochastic models disseminate knowledge obtained process writing 
conclude discussing impossibility building asymptotically optimal estimator node case 
estimation may possible multi node paths results suggest provably convergent estimators exist context measurement 
problem deriving provably accurate estimator node case arbitrary cross traffic remains open hope initial direction stimulate additional research prompt prove disprove conjecture 
ii 
stochastic queuing model section build simple model router introduces random delay noise measurements receiver study performance packet pair bandwidth sampling techniques 
note depart common assumption negligible fluid cross traffic specifically aim understand effects random queuing delays bandwidth sampling process 
consider unloaded router cross traffic 
packet pair mechanism observation packets arrive bottleneck link spacing smaller transmission delay second packet link spacing link exactly 
practice packets flows queue probe packets increase spacing exit bottleneck link larger 
assume packets probe traffic arrive bottleneck router times 
inter arrival times random process xn determined server initial spacing 
assume bottleneck node delays arriving packets adding random processing time received packet remainder constant packet size probing flow arbitrarily varying packet sizes cross traffic 
furthermore strict requirement initial spacing xn long modeling assumptions satisfied 
means isolated packet pairs bursty packet trains probe path 
transmission delay application packet bottleneck link transmission capacity link 
assumptions packet departure times dn expressed recurrence dn 
max dn formula dependence dn departure time dn consequence fifo queuing packet depart packet fully transmitted 
furthermore packet start transmission fully arrived time 
value noise term proportional number packets generated cross traffic queued methods vary probing packet size exist :10.1.1.36.7418
times dn specify bit packet leaves router 
similarly times specify bit packet fully received packet ready queuing 
arrival departure fig 

departure delays introduced node 
time front packet final metric interest delay yn dn dn packets leave router 
various variables packet arrival departure schematically shown 
model appears simple leads fairly complicated distributions yn prior assumptions cross traffic 
examine special cases derive important asymptotic results process yn 
packet pair analysis iii 
renewal cross traffic start analysis common assumption queuing theory cross traffic arrives bottleneck link renewal process delays crosstraffic packets random variables 
follows subsections show modeling direction requires stationarity specifically ergodicity cross traffic 
assumption stationarity holds regular internet traffic apply different sampling methodology different analytical direction derive provably robust estimator capacity average cross traffic rate goal bottleneck bandwidth sampling techniques queue probe packets directly bottleneck link ensure spacing yn exit router 
practice rarely possible rate cross traffic non negligible 
certain difficulties estimation process assuming single congested node problem asymptotically tractable certain mild conditions cross traffic 
results 
generate measurements bottleneck capacity commonly derived server send packets initial spacing slower 
true unloaded links cross traffic probes may sent arbitrarily slower long packet arrives router departure time packet 
condition translates dn expands dn 
dn packet inter departure times yn bottleneck router yn dn dn 
notice random process defined arrival pattern cross traffic packet size distribution 
process key factor determines distribution sampled delays yn focus analyzing properties 
assume inter packet delays cross traffic independent random variables xi actual arrivals occur times 
arrival pattern cross traffic defines renewal process number packet arrivals interval 
common convention assume mean inter arrival delay xi mean arrival rate cross traffic packets second 
allow random packet sizes assume sj 
independent random variables modeling size packets cross traffic 
assume bottleneck link probed sequence packet pairs delay packets pair small keep rate higher delay pairs high link 
assumptions amount cross traffic data received bottleneck link probe packets interval cumulative reward process vn sj represents sequence number second packet pair 
assume general necessarily equilibrium process re write yn vn sj 
classical renewal theory concerned limiting distributions yn lead tractable results observation period process captured yn small 
define time average process wn average yi time wn yi 
result 
claim assuming ergodic cross traffic time average process wn converges lim wn xn sj snd snd mb mb mb mb mb rcv rcv fig 

single link simulation topology 
xn mean inter probe delay packet pairs 
proof process wn samples larger span limiting distribution demonstrate 
applying wald equation yn sj 
result holds sj independent stopping time sequence sj 
equation simplified noticing renewal function yn sj 
assuming stationary cross traffic expands yn xn sj 
assuming ergodicity cross traffic implies process yn obtain large number packet pairs limit wn 
notice second term strictly positive assumptions 
leads interesting observation filtering problem facing quite challenging sampled process yn represents signal corrupted non zero mean noise drastic departure classical filter theory deals zero mean additive noise 
interesting way noise zero mean send probe traffic xn infinitely fast crosstraffic bottleneck link 
case impossible xn positive case simplification explicitly want avoid 
analysis packet train probing shortly mean time discuss simulations provide intuitive explanation results obtained far 
simulations proceed estimation explain observations previous put context model 
simulations section network simulator topology shown fig 

source probe packets snd sends data receiver rcv routers 
speed access links mb delay ms frequency values ms mb frequency values ms mb fig 

histogram measured inter arrival times yn cbr crosstraffic 
bottleneck link capacity mb ms delay 
note cross traffic sources attached snd 
discuss simulation results obtained udp cross traffic 
case initialize sources snd cbr streams transmitting kb mb total cross traffic 
cbr flow starts random initial delay prevent synchronization flows uses byte packets 
probe flow snd sends data average rate kb probing duration results utilization bottleneck link 
second case lower packet size cross traffic bytes increase total rate mb demonstrate challenging scenarios packet loss bottleneck 
simulation results summarized fig 
illustrates distribution measured samples yn pair packets sent spacing xn results exclude packet pairs experienced loss 
capacity mb packet size bytes value ms fig 
shows samples located correct value ms mean sampled signal wn shifted ms case ms second 
employ tcp cross traffic generated ftp sources attached snd 
tcp flows different packet sizes bytes respectively 
histogram yn case shown fig 
different average cross traffic rates kb mb seen samples located ms majority mass histogram including peak modes located values higher ms recall wn measured signal tends 
cbr cross traffic estimate mean noise approximately ms case ms second 
naive estimates wn wn kb kb respectively 
likewise tcp case measured averages ms samples yn lead incorrect naive estimates kb kb respectively 
order understand value wn evolve frequency values ms kb frequency values ms mb fig 

histogram measured inter arrival times yn tcp crosstraffic 
run simulation mb total tcp cross traffic plot evolutions absolute error wn fig 

fig 
shows absolute error converges certain value samples yn providing poor estimate kb fig 
illustrates wn fact converges mean noise wn ms previous focused identifying peaks modes histogram collected bandwidth samples peaks estimate bandwidth figs :10.1.1.47.3588
show misleading distribution noise known priori 
example peak right side fig 
located ms kb slightly better estimate kb derived mean yn 
peak fig 
located ms leads worse estimate kb compared kb computed mean yn 
combat problems existing studies apply numerous empirical methods find mode correct :10.1.1.47.3588
may feasible solution multi hop networks keep mind possible modes measured histogram corresponds evidenced graphs fig 

packet train analysis topic debate prior methods offer benefits packet pair methods 
studies suggested packet train measurements converge available bandwidth sufficiently long bursts packets analytical evidence effect far 
studies employed packet train estimates increase measurement accuracy bottleneck bandwidth estimation clear samples benefit asymptotic convergence estimation process 
consider packet train method transmits probe traffic bursts packets averages interpacket arrival delays burst obtain individual question appears settled papers provide additional insight issue 
absolute error kb number samples average sample values ms number samples wn fig 

absolute error packet pair estimate tcp crosstraffic mb 
evolution wn 
samples 
define samples 
define 
reason excluding samples yn 
leading packets burst encounter large inter burst gaps front follow model developed far 
follows section derive distribution zk 
claim sufficiently large constant xn regenerative processes packet train samples converge gaussian distribution large zn xe sj xv ar sj sj xi denotes convergence distribution gaussian distribution mean standard deviation xi inter packet arrival delays cross traffic 
proof define sample version cumulative reward process sj 
process counting process timescale measured bursts packets 
determines amount cross traffic data received bottleneck link entire burst equation shows asymptotically interpreted reward rate reward renewal process number inter packet gaps packet train probe packets 
assuming regenerative sufficiently large 
applying regenerative central limit theorem constraining rest derivations section constant frequency values ms frequency values ms fig 

histogram measured inter arrival times zk packet trains cbr cross traffic mb samples zk burst number 
example xn assuming xi xe sj xv ar sj sj xi combining get 
notice mean distribution samples yn intuitively expected means measurement methods expectation 
second easy notice variance tends zero long ar xi finite 
claim ar xi finite variance packet train samples tends zero large proof sj finite depend independence sj xi ar xv ar sj xe sj ar xi tends 
result phenomenon longer packet trains produce narrower distributions centered 
cbr case studied fig 
clearly finite ar xi samples exhibit decaying variance increases 
example convergence packet trains shown fig 

discussion address observations previous 
noted packet pair histograms usually different modes histogram packet train samples unimodal increased readily follows gaussian shape 
previous papers noted packet train size increased distribution samples exhibits lower variance 
result follows discussion 
furthermore packet train histograms large tend single mode location independent burst size derivations provide insight process happens shows location single mode 
summary packet train samples represent limited reward rate asymptotically converges gaussian distribution mean yn 
possible infer characteristics xi observing variance applying result unknown parameters formula ar xi sj direction lead tractable results assume particular process 
asymptotically tend narrow gaussian distribution centered find evidence measure available bandwidth offer additional information value compared traditional packet pair samples yn 
iv 
arbitrary cross traffic section relax stationarity renewal assumptions cross traffic derive robust estimator assume arbitrary arrival process crosstraffic instantaneous rate time impose constraint process finite time average shown 
goal sampling process determine imply constant packet loss zero available bandwidth generally interested non trivial cases stochastic process may renewal regenerative superposition sources self similar 
furthermore packet arrival patterns current internet commonly exhibit nonstationarity due day night cycles routing changes link failure assumptions allow model wide variety non stationary processes broader commonly assumed traffic modeling literature 
notice probing traffic sample poisson sequence probes times average ti converges applying pasta principle 
tn lim lim du long delays ti ti exponential random variables 
order accomplish type sampling sender emit packet pairs exponentially distributed intervals 
assuming th packet pair arrives router time ti sample small segment allowing gi amount data queued probes gi ti xi ti du ti xi xi spacing packets th 
assuming yi th inter arrival sample generated receiver yi gi ti xi 
fixing value xi notice wn defined limit lim wn lim lim ti xi ti 
essence result similar earlier derivations requires weaker restrictions crosstraffic shows single node model completely tractable setting arbitrary cross traffic 
show extract 
capacity observe linear function slope intercept injecting different spacings xa xb compute unknown terms sets measurements ya yb 
accomplish define corresponding average processes 
simplest way obtain single measurement alternate spacing xa xb preserving pasta sampling property 
bit header field receiver unambiguously sort inter compute arrival delays sets ya yb averages 
samples collected receiver running averages produced 
subtracting able separate lim xa xb 
denote estimate time xa xa xb 
limit result 
claim assuming single congested bottleneck time average rate exists converges lim 
proof re writing lim xa xa xb xa xa xb obtained help 
result shows friendly restatement previous claim 
similar formula derived papers fluid assumption :10.1.1.6.5148
technical differences approach previous topp see 
table available bandwidth estimation error bottleneck capacity relative error mb model pathload spruce igi corollary assuming single congested bottleneck time average rate exists estimate cn converges capacity lim cn lim available bandwidth lim xa xa xb xa xb 
notice knowing estimate easy estimate mean rate cross traffic lim cn xa xb leads result 
corollary assuming single congested bottleneck time average rate exists converges available bandwidth lim xa xb 
simulations confirm results compare models igi ns simulations :10.1.1.6.5148:10.1.1.137.121
main theme bandwidth estimation heavily congested routers conduct simulations loaded bottleneck link fig 
utilization varying exact value changes depending interaction tcp cross traffic probe packets 
delays xa xb set maintain desired range link utilization 
define ea ec relative estimation errors respectively true available bandwidth path estimate measurement techniques true bottleneck capacity estimate 
table shows relative estimation errors ea spruce igi pathload 
pathload averaged low high values produced estimates 
igi case estimates available igi internal convergence algorithm 
note fed spruce igi exact bottleneck capacity model operated information 
table shows spruce performs better pathload heavily congested cases expected relative estimation error number samples ec relative estimation error number samples ea fig 

evolution relative estimation errors single congested link mb link utilization 
relative error number samples spruce relative estimation error number samples igi fig 

relative estimation errors ea produced spruce igi single congested link mb link utilization 
utilize known capacity information 
interestingly igi estimates worse pathload igi utilizes true capacity estimation algorithm 
similar result observed relatively small amount cross traffic link utilization 
examine models large number samples show asymptotic convergence estimation accuracy 
plot evolution relative estimation errors ec ea fig 

fig 
shows converges value close true value fig 
available bandwidth estimates quickly converge purpose comparison plot estimation errors ea produced spruce igi fig 

fig 
shows exact value samples spruce exhibits error 
furthermore igi estimates worse spruce illustrated fig 
plots evolution errors igi internal algorithm terminates 
better understand results study accuracy capacity information provided igi affects measurement accuracy 
analysis spruce igi bottleneck capacities internet paths generally known spruce igi may limited small number known paths methods obtain capacity measurements tools nettimer pathrate :10.1.1.47.3588
estimators usually accurate routers path highly utilized link utilization increases relative estimation error number samples estimation error spruce igi ratio estimated real fig 

relative capacity estimation error ec measured 
relative estimation errors ea spruce igi ratio results inaccurate 
natural question robust spruce igi inaccurate values provided estimation process 
examine issue discuss simulation results illustrate pitfalls estimators experience heavy loaded bottleneck links 
simulation topology shown fig 
single bottleneck link utilization kept tcp cross traffic sources 
fig 
plots evolution ec produced experiment 
shows minimum filtering sensitive random queuing delays front packet pair eventually converge completely wrong value error 
examine value supplied igi spruce affects accuracy 
plot relative estimation errors fig 
accuracy methods deteriorates large 
understand exact effect methods simple analysis 
igi sends packet trains zi interpacket spacing xi xi xj determine turning point packet train consists back back packets turning point th inter packet spacing xn receiving rate probe traffic starts match sending rate xn yi :10.1.1.6.5148
subsequently igi computes average cross traffic rate yi yi max estimates available bandwidth subtracting priori known value notice average cross traffic depends capacity value provided estimation algorithm :10.1.1.6.5148
dependency explains increased estimation inaccuracy illustrated fig 

similarly estimation accuracy spruce changes function example spruce provides mean ms simulation result ms cbr cross traffic mean ms simulation result ms tcp cross traffic fig 

convergence zero mean additive noise large xn cbr tcp cross traffic 
better estimates igi correct capacity value mb exhibits large estimation errors exceeds 
means accuracy spruce heavily dependent performance underlying bottleneck bandwidth estimation method 
better understand observation analyze spruce estimation process 
spruce collects individual samples ai ai yi yi th measured packet spacing receiver 
algorithm averages samples ai obtain running estimate available bandwidth ai yi 
qn limits substituting wn get lim 
brief analysis shows bandwidth estimation mechanism spruce requires sender set interpacket spacing possible known exactly cases correctly estimated initial spacing set converge notice estimation errors generally small link utilization increases deviation significant impact 
multiple links section extend single node model case multiple congested routers conjecture impossible derive closed form solution filters noise introduced cross traffic links toend path 
large inter probe delays consider original model router 
time assume probe packets queue bottleneck router 
means packet leaves snd snd mb mb snd mb cp mb rcv mb mb fig 

multi link simulation topology 
rcv rcv router packet arrives expected interpacket spacing xn source large compared transmission delay 
assumptions dn dn 
inter departure delays yn yn 
notice term inter arrival delay xn probe traffic second term modeled zero mean random noise 
explained intuitively noticing assumption large xn router delays probe packets average amount 
distance pair subsequent packets fluctuates mean xn 
inductive argument easy show 
claim initial spacing xn larger statistical sense queuing delays experienced packets router hop path mean sampled signal yn equal xn holds router 
confirm zero mean model holds practice run ns simulations utilization bottleneck link varying packet sizes cbr tcp cross traffic 
plots yn function xn different values xn shown fig 

figures show yn converges xn ms respectively time noise bottleneck router zero mean additive 
note similar results hold multiple congested routers different traffic patterns different packet sizes 
note point yn converges necessarily value available bandwidth suggested prior 
recursive model multi node paths assuming multiple congested routers path result longer holds 
better understand multi link effects topology fig 
bottleneck link capacity mb pre bottleneck link cp mb ftp sources attached snd snd transmission delay ms estimated number samples single congested link transmission delay ms estimated number samples congested links fig 

evolution estimated transmission delay single congested links 
links utilized cross traffic 
fig 
illustrates convergence process single node multi node cases 
fig 
shows estimates converge true value ms regardless number samples yi 
notice possible recursively extend original model multiple congested links input xn link output yn previous link 
model intractable show 
add index process random variable indicate local router path sender receiver 
assume queuing delay due cross traffic probe packets front packet inside router zero mean noise process router time define recursive model departure spacing th packet pair router cj transmission delay probe packets link arrival spacing probes router notice arrival spacing packets simply time packet spends buffer packets queue follow model developed earlier 
opposite holds packets queue router adds zero mean noise conjecture impossibility main difficulties situation stochastic mixture types noise 
time offer complete treatment problem show links follow model packets queue problem appears intractable 
assumptions leads rj ti capacity estimates kb bottleneck mb mb mb number samples fig 

evolution estimated bandwidth congested links 
rj cross traffic process router congested router case nc nc ti ti ti du 
poisson samples taken receiver lead obtaining time average mixed signal introduced routers appears impossible filter unknown cross traffic statistics main integral 
examine amount cross traffic congested links affects estimation accuracy earlier models developed 
set average crosstraffic rates routers vary value kb mb topology fig 
plot fig 
value cn computed crosstraffic simultaneously injected links cp mb mb 
illustrates estimates bottleneck bandwidth converge value significantly true capacity progressively worse increases 
vi 
examined problem estimating capacity available bandwidth single congested link showed simple stochastic analysis problem 
previous approaches estimation rely empirically driven methods queuing model bottleneck router specifically assumed non negligible non fluid cross traffic 
model provide simultaneous asymptotically accurate estimation presence arbitrary cross traffic 
analysis multi node cases suggests problem obtaining provably convergent estimates environments solution 
insight possibly explains lack analytical stochastic justification proposed methods 
knowing accurate estimation multi node case impossible potentially provide important foundation methods rely empirically optimized heuristics 
bj network probing packet trains swedish institute technical report march 
allman paxson estimating network parameters acm sigcomm august 
bolot packet delay loss behavior internet acm sigcomm september 
carter crovella measuring bottleneck link speed packet switched networks international journal performance evaluation 
dovrolis ramanathan moore packet dispersion techniques measure ieee infocom april 
downey pathchar estimate internet link characteristics acm sigcomm august :10.1.1.36.7418
bestavros byers measuring bottleneck bandwidth targeted path segments ieee infocom march 
hu steenkiste evaluation characterization available bandwidth probing techniques ieee journal selected areas communications vol 
august 
jacobson congestion avoidance control acm sigcomm 
jacobson pathchar tool infer characteristics internet paths ftp ftp ee lbl gov pathchar 
jain dovrolis available bandwidth measurement methodology dynamics relation tcp throughput acm sigcomm 
jain dovrolis pathload measurement tool available bandwidth passive active measurements pam workshop :10.1.1.137.121
kapoor chen lao gerla simple accurate capacity estimation technique acm sigcomm august 
keshav control theoretic approach flow control acm sigcomm 
lai baker measuring bandwidth ieee infocom :10.1.1.47.3588
lai baker measuring link bandwidths deterministic model packet delay acm sigcomm august 
liu ravindran liu loguinov single hop probing asymptotics available bandwidth estimation sample path analysis acm imc october 
mah pchar tool measuring internet path characteristics www employees org software pchar june 
bj new probing analysis method estimating bandwidth bottlenecks ieee globecom november 
pasztor veitch active probing packet acm 
pasztor veitch packet size dependence packet pair methods ieee ifip iwqos 
paxson measurements analysis internet dynamics ph dissertation computer science department university california berkeley 
ratnasamy mccanne inference multicast routing trees bottleneck bandwidths measurements ieee infocom march 
ribeiro riedi baraniuk cottrell pathchirp efficient available bandwidth estimation network paths passive active measurements pam workshop 
schulzrinne loss delay adjustment algorithm tcp friendly adaptation scheme ieee workshop network operating system support digital audio video nossdav 
strauss kaashoek measurement study available bandwidth estimation tools acm imc 
wade kara dew study transport protocol employing bottleneck probing token bucket flow control ieee iscc july 
wolff stochastic modeling theory queues prentice hall 
