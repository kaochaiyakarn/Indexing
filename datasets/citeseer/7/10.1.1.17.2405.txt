measuring bottleneck link speed packet switched networks robert carter mark crovella computer science department boston university st boston ma cs bu edu bu cs march quality available network connections large impact performance distributed applications 
example document transfer applications ftp gopher world wide web su er increased response times result network congestion 
applications document transfer time directly related available bandwidth connection 
available bandwidth depends things underlying capacity path client server limited bottleneck link amount tra competing links path 
measurements quantities available application current utilization connections calculated 
network utilization selection set alternative connections servers providing reduced response time 
dynamic server selection scheme especially important mobile computing environment set available servers frequently changing 
order provide measurements application level introduce tools bprobe provides estimate uncongested bandwidth path cprobe gives estimate current congestion path 
measures may provide application estimate available bandwidth server client enabling application level congestion avoidance 
discuss design implementation probe tools speci cally illustrating techniques achieve accuracy robustness 
validation studies tools demonstrate reliability face actual internet conditions give results survey available bandwidth random set www servers sample application probe technique 
conclude descriptions applications measurement tools currently development 
applications quality connections impact performance 
im portant characteristic network connection bandwidth available clients connection 
particular document transfer applications ftp gopher world wide web higher available bandwidth implies faster document transfer time 
available bandwidth depends things underlying capacity client server limited bottleneck link presence competing tra congestion 
technique minimize time document request document arrival begins eval uation quality set connections candidate servers 
application may retrieve document server highest quality connection 
context quality network connection determined estimate network utilization assess potential transfer time 
utilization turn depends bandwidth path limited bottleneck link presence tra competing path 
useful pieces information readily available applications 
order discover information developed tools bprobe measures uncongested bandwidth bottleneck link connection cprobe estimates current congestion bottleneck link path 
applications provided measurements current network state application level congestion avoidance possible 
application level congestion avoidance mean applications estimates tra volume actively avoid paths currently heavily loaded 
measurement bottleneck link speed involves sending series icmp echo packets source destination measuring inter arrival times successive packets 
certain conditions analysis distribution inter arrival times leads straightforward reliable calculation bottleneck link speed connection 
bprobe speci cally designed necessary conditions occur performs analysis required robust estimate bottleneck link speed 
method measurement competing tra cprobe relies echo packets 
estimate congestion elapsed time return rst series packets amount sent probe tool 
cprobe designed reliable estimate competing tra real network conditions 
sections motivate describe bprobe cprobe 
theory tools explain obstacles making reliable measurements practice 
explain probe tools designed overcome obstacles 
describe validation process compared measurements tools known link capacities local regional wide area networks 
results survey www servers discuss implications ndings replication server selection 
conclude discussion ongoing 
related author gives model packet travel links routers connection internet 
bandwidth bottleneck link studied comparing round trip times rtt adjacent packets sequence sent regular intervals 
rtt successive packets plotted rtt vs rtt 
inverse slope line tted data gives bandwidth intercept gives latency 
line tting done hand large number packets needed manual tting possible 
expanded version gives preliminary suggestions process determine makeup interfering tra :10.1.1.40.3609
obstacles exist automatic application idea real networks 
overcomes obstacles results robust procedure calculate bottleneck link speed minimal overhead 
author de nes notion packet pair back back packets travel source destination result acknowledgment packets returning 
calculation bandwidth returning acks similar network rate allocating servers ras assumed 
ras incoming stream packets served turn packet processed queue turn packets 
ect shares packet processor equally incoming lines 
actual bandwidth available source accurately measured inter arrival time packets source increased processing time packet competing input line 
contrast assume conditions prevalent current internet tractable require packets reordered transit 
treno tool pittsburgh supercomputer center emulates tcp connection including slow start necessary retransmissions 
set web server measures path back calling client 
scheme similar traceroute sends udp packets increasing ttl path server invoking client 
reports available bandwidth tcp nd path pre xes destination 
order get full ect tcp recommended tool run seconds continuous tra contrast cprobe tool measures estimated available bandwidth regard particular higher level protocol bprobe tool measures underlying bottleneck link speed 
addition nd measurement process typically faster seconds necessary treno reliably measure bandwidth available tcp 
measuring bandwidth congestion application level term base bandwidth connection mean maximum transmission rate achieved connection absence competing tra limited speed bottleneck link bottleneck link speed 
packets connections may share links connection want measure competing tra lowers bandwidth available application 
term available bandwidth refer estimated transfer rate available application instant 
words portion base bandwidth competing tra de ne utilization connection ratio available bandwidth base bandwidth percentage base bandwidth available application 
measure current utilization available applications informed resource allocation deci sions 
speci problem www server selection knowledge current network utilization allows better prediction information transfer time candidate servers 
objective mind set develop tools measure current utilization connection 
measurements necessarily done distance unknown environment 
refer source speed speed speed target path source target 
initially link speeds unknown 
measurement process probing tools probes 
design goals probes application level usable user program minimal impact network server probing rely cooperation network server robust perform properly varying conditions accurate possible providing timely information 
sections describes design validation bprobe cprobe 
bprobe measuring base bandwidth measurement theory discussion assume network 
path links 
set links path router examines destination address packet forwards appropriate outgoing link 
main requirement packets frequently reordered transit 
assume path stable whichwe mean path packets take instant change seconds 
internet routing table updates infrequent reasonable assumption 
assume bottleneck directions link assumption relaxed di erent design 
recall output bprobe measurement base bandwidth connection speed bottleneck link 
situation 
order compute utilization useful know minimum speed links path source target 
method bprobe send sequence icmp echo packets source target measure inter arrival times returning packets 
illustrates journey pair packets round trip path source target back 
packets depart source host inter departure gap measured 
packets ow intermediate routers inter packet gap may change packets ow links various source network target inter arrival time bottleneck link flow packets source target back 
inter packet gap stretched bottleneck link 
inter arrival time measured source calculate bottleneck link speed 
capacities 
general size gap varies inversely capacity link 
shows gap packets stretched packets ow bottleneck link return trip packets ow bottleneck link gap unchanged 
packets return source gap inter arrival time re ects speed bottleneck link 
essential idea probe packets caused travel queued pair bottleneck link packets intervening inter packet spacing proportional processing time required bottleneck router process second packet pair 
known ect illustrated familiar diagram shown adapted van jacobson 
addition bolot describes basic ect keshav similar method networks rate allocating servers 
goal bprobe tool create condition reliable measurements 
words packets probe tool queued bottleneck link inter arrival time pairs queued endpoint path estimate base bandwidth bottleneck link 
ideal conditions receiver information measure bottleneck link speed follows trailing edge rst pair packets marks time router started processing second packet pair trailing edge second packet records time router nished processing packet 
packet size inter arrival time gap estimate base bandwidth gap probe packets bottleneck link bls follows minimum packet spacing bottleneck link illustration packet ow bottleneck link 
spacing preserved higher speed links time process bytes link speed estimate delta ideal case probe packets queued router 
bls bytes second bytes gap seconds illustrated shows situation probe packets queued router 
obstacles measuring base bandwidth practice contrast network architecture assumed experimental environment current internet ideal behavior easily achieved 
problems arise practice queuing failure probe packets may queue bottleneck link 
competing tra competing tra path may intervene probe packets 
probe packet drops packets sent probe may dropped 
downstream congestion congestion routers downstream bottleneck may invalidate results 
ofthese problems cause spurious estimates base bandwidth 
major obstacle implementation set inter arrival time measurements probe tool decide result valid bandwidth estimates 
challenge start intuitive idea captured design accurate robust low impact tool measure bandwidth 
solutions problems 
solutions implementation problems bprobe cprobe built top icmp echo mechanism 
icmp echo client send packets host receive replies installing new software remote site ords wide utility tools 
principal techniques attack problems 
multiple packets varying sizes second tool uses careful ltering process discards inaccurate measurements 
queuing failure rst problem overcome client sending probe packets may happen send data fast cause queuing bottleneck router 
order ensure queuing senda number packets packets varying sizes 
larger packets naturally take processing time routers increase possibility queuing 
want large packet negotiate round trip path 
upper limit packet size vary path path packets varying size 
currently probe runs distinct phases phase packets successively larger sizes 
rst phase sends number packets currently smallest size currently bytes 
phase uses larger packets process continues reach maximum packet size test client send approximately bytes 
way adapt maximum feasible size connection 
competing tra second problem interference tra sharing link path 
ideal case non probe packets intervene 
intervening packets cause increase inter arrival time underestimate bottleneck link speed 
illustrated shows non probe packet queued 
resulting inter arrival time measures processing time bytes packet unknown number bytes contained intervening packet 
estimated link speed underestimate 
solution problem fold 
sending large number packets increase likelihood pairs disrupted competing packets 
pairs disrupted number probe packets traffic 



time process bytes 
bytes link speed estimate delta competing packets intervening probe packets cause underestimate link speed 
intervening bytes vary pair pair 
results di ering bandwidth estimates may ltered determine correct estimate 
explain ltering process 
measure increase packet size alternating factors 
ensures packet sizes integer multiples 
simply doubled packet size bandwidth estimated packet size intervenes probe packets size bandwidth estimated packets size intervene probe packets size 
clear discussion ltering method easily result erroneous nal estimate 
alternating increments diminishes probability bad estimate 
probe packet drops third problem addressed dropped probe packets 
packets simply lost large packets cause bu er ow dropped 
large packets fragmented increases likelihood dropped packets due fragment loss 
aside ect fragmentation large packets problem tools 
avoid problem sending packets varying sizes 
sending packets size serves probe tolerant packet losses regardless cause 
downstream congestion fourth problem occurs queuing occurs return trip passing bottleneck link 
goes client server back bottleneck link congestion intermediate servers downstream bottleneck invalidate estimate 
consider pair packets inter packet gap properly set bottleneck link 
packets subsequently get queued inter packet gap reset measuring wrong link 
subsequent queuing alleviate problem ltering 
pairs may fact measure wrong link pairs queuing erroneous estimates ltered 
time bottleneck link speed estimates bps bprobe experiments local kbps hosts filtering process di cult problem addressed probe identi cation estimates determine base bandwidth discarded due lack queuing subsequent queuing interference competing tra phase probe packets results inter arrival measurements 
sets measurements input ltering process 
packet size intelligent guesses protocol headers link level headers trailers pair packets generates raw estimate bandwidth assuming queuing de ned 
example shows raw estimates invocations probe tool 
data points belonging invocation shown plotting numeral representing invocation point 
abscissa data point bandwidth estimate ordinate increases packet size 
measurements rst invocation occur bottom line segments graph second higher lines 
invocation packet size increasing bottom top 
notice clustering estimate values packet size increases shows general larger packet sizes yield consistent results 
multi phase variable packet size design probe results correlation correct estimates lack correlation incorrect estimates 
example suppose intervening packets size probe packet sizes probe phases andp 
estimates produced packet sequences andp underestimate base bandwidth important characteristic estimates di er 
hand sequences run run run run run produce agreeing correct estimates 
incorrect estimates produced sequence correlated correct estimates uncorrelated 
properties data evident seek exploit non linear ltering 
tested ltering methods rely computing error interval estimate subjecting intervals set operations explained 
error interval expanded necessary satisfactory estimate speed bottleneck link determined 
intersection ltering method nds overlaps estimate intervals computes intersection idea want nd estimate occurs sets 
observed larger packets provide better estimates start intersecting estimates largest packets iteratively intersect estimates derived successively smaller packets 
union ltering method combines overlapping intervals set union selects interval sets contribute 
methods produce interval nal result midpoint returned nal estimate 
methods illustrated sets estimates combined union intersection 
top gure histograms representing sets 
horizontal axis gives intervals estimated bottleneck bandwidth increasing right vertical axis gives number measurements interval 
lower portion gure represents histograms resulting combination union intersection operations 
union result height histogram bar number sets contribute interval notation 
example fourth interval total measurements originate sets 
case interval members set interval midpoint interval resulting estimate bottleneck bandwidth 
experience union dispersion estimates intersection wehave adopted ltering method currently bprobe 
validation bprobe validate base bandwidth probe tool performed sets experiments 
tested bprobe xed host hosts local network regional network wide area network 
networks maps link capacities determine bottleneck link speed target servers 
able compare results tool known bottleneck link speeds 
local validation tested probe set hosts local network connected ethernet connected kbps lines 
minute period days ran probe tool recorded bandwidth estimate 
results tests summarized presents histograms bprobe bandwidth estimates classes 
gures histogram bins labeled bottleneck link speeds bits second 
shows histogram number measurements number measurements number measurements number measurements bandwidth estimate bandwidth estimate filtering process union intersection operators set set union set set intersection set set local kbps hosts bottleneck link speed histogram bprobe results local kbps hosts estimated bottleneck link speeds kbps hosts shows histogram estimated bottleneck link speeds ethernet mbps hosts 
gures show majority estimates closely clustered expected values expected host sets di er orders magnitude 
regional validation set tests performed nearnet regional network site belongs 
able add third category bottleneck capacity 
regional network sets hosts bottleneck link capacities kbps kbps mbps ethernet 
measurements periodically days results histograms bottleneck link speed estimates 
shows histogram bottleneck bandwidth estimates hosts known kbps bottleneck 
histogram bandwidth estimates probes hosts shows avery tight grouping estimates 
consistent underestimate nd estimates theoretical capacity estimates theoretical capacity estimates theoretical capacity 
hosts bottleneck gives histogram probes hosts 
picture little clear case appear minor peaks data 
nd estimates close rated capacity 
particular nd estimates local ethernet hosts bottleneck link speed histogram bprobe results local ethernet hosts kbps hosts nearnet bottleneck link speed histogram bprobe results nearnet kbps hosts hosts nearnet bottleneck link speed histogram bprobe results nearnet hosts ethernet hosts nearnet bottleneck link speed histogram bprobe results nearnet ethernet hosts kb hosts bottleneck link speed histogram bprobe results kbps hosts rated capacity estimates rated capacity estimates rated capacity 
shows histogram regional hosts connected ethernet 
probes ethernet hosts resulted tight grouping comparable results kbps hosts 
mbps hosts nd estimates mbps capacity estimates mbps capacity estimates mbps capacity 
wide area validation nal validation test done set hosts regional network baltimore washington metropolitan area 
hosts regional net approximately hops away test client including mci backbone hops 
able obtain capacity maps independently verify capacity bottleneck selected hosts 
shows histogram bandwidth estimates probes kbps hosts 
histogram shows tight grouping estimates near known bottleneck speed 
shows histogram bandwidth estimates probes hosts 
case regional case nd minor peaks main peak expected value 
suggest explanation discussion section 
shows histogram bandwidth estimates probes ethernet hosts 
nd fair amount serious underestimates bulk data clustered known value 
hosts bottleneck link speed histogram bprobe results hosts ethernet hosts bottleneck link speed histogram bprobe results ethernet nodes summary discussion relative error values sets hosts table presents quantitative view validation results 
columns show percentages error relative rated capacity bottleneck link measurements particular subset hosts 
entry table gives percentage bandwidth estimates fall agiven relative percentage rated capacity 
example bandwidth estimates local kbps hosts kbps 
evident systematic underestimation error due unaccounted link level encapsulation overhead 
practice signi cant problem 
example addressed table commonly available capacities round bandwidth estimates nearest value 
results connections regional wide area levels surprising 
contrast single large peaks histograms link capacities nd multiple peaks histograms figures 
immediate suggestion peaks correspond individual hosts represent underlying hardware di erences 
case 
bottleneck link speed estimates particular host 
hypothesis consistent cross tra consisting small packets nearly equal size cause ect 
tra generated telnet sessions example 
competing tra result underestimation bottleneck bandwidth explained section 
source cross tra regular resulting underestimates produced bprobe agree defeat ltering process 
resulting estimate bottleneck link speed host underestimate 
measured statistics estimates cases fairly accurate 
relative error network rated capacity 
hosts local kbps mbps regional kbps mbps mbps wide area kbps mbps mbps table measurements bprobe accuracy local regional wide area host sets 
results sets experiments convince accuracy probe tool 
di erent classes hosts able accurately measure base bandwidth links bprobe 
move local regional wide area hosts tool shows minor loss estimate accuracy 
considering stated goals nd bprobe provide accurate base bandwidth estimates spite di cult environment measures operates explicit cooperation network servers provides reliable estimates excessive 
current time reasonable concern probe impact network 
current implementation consumes network bandwidth 
approaches development believe achieve nearly accuracy reliability fewer packets second anticipated base bandwidth estimate path cached redundant measurements path unnecessary 
survey bottlenecks www servers demonstration bprobe surveyed set randomly selected www servers get idea distribution base bandwidth connections servers www 
servers chosen uniformly list obtained 
previously performed similar survey primarily concerned distribution hops latency www servers 
latest survey gathered statistics addition bandwidth estimates 
set servers presents distribution hops measured traceroute gives distribution latencies measured ping 
discussed striking di erence distributions implications replica placement server selection 
particular lack measures suggests hops bad predictor latency bad metric distance internetwork 
needed dynamic measurement conditions 
observation motivated design bprobe cprobe 
shows histogram bottleneck link speed estimates survey www servers 
notice distinct peak mbps 
higher estimates survey run machine mbps local network 
bprobe measures bottleneck link readings higher expected 
concentration estimates appears mbps 
inspecting data nd servers surveyed bottleneck bandwidth estimates greater mbps 
words servers reachable ethernet speeds 
nearly servers surveyed bottleneck link speed half ethernet speed nearly exhibit bottleneck ethernet speed 
restrict histogram estimates smaller kbps 
range includes servers low speed modem bottleneck aswell low capacity connections 
servers bottlenecks range 
clear peak kbps value wehave established common bottleneck speed validation experiments 
peak appears near isdn rate kbps 
gives estimates range kbps mbps region includes connections fractional values 
region includes servers surveyed 
implications distribution replication server selection 
assume uniform distribution copies popular documents set servers clear measurement ofthe histogram hops www servers histogram latencies www servers www servers bottleneck link speed www survey results histogram bottleneck link speeds www servers www servers zoom bps bottleneck link speed www survey results subset servers bottleneck link speeds kbps www servers zoom bps bottleneck link speed www survey results subset servers bottleneck link speeds kbps mbps bottleneck prime importance replicas 
distribution choosing server random gives better chance getting slow link 
clearly available bandwidth give better performance 
precise evaluation amount improvement gained dynamic server selection policies focus current 
cprobe measuring available bandwidth previous section described bandwidth probing tool gives fairly reliable estimate bottleneck link speed path hosts internet 
consider estimating available bandwidth 
measure available bandwidth developed tool called cprobe 
cprobe technique straightforward bouncing short stream echo packets target server recording time receipt rst packet receipt packet measure presence competing tra bottleneck link 
dividing number bytes sent time yields measure available bandwidth avail represents actual throughput achieved probe bytes 
long send higher rate bottleneck link speed measure bprobe ect occur 
additional time lag rst packet represents delay due intervening non probe bytes competing tra 
utilization bottleneck link computed ratio available bandwidth measured cprobe bottleneck link speed estimated bprobe practice discovered complication testing cprobe 
occasionally sending host momentarily delayed due operating system ects delaying returning ow 
resulted unusually long delay pair packets caused overestimate competing tra delay wrongly attributed entirely tra addition scheduling ects receiving side cause inter packet time unrealistically short 
eliminate kinds erroneous readings discard highest lowest inter arrival measurements calculating avail 
improves accuracy measurements signi cantly 
order tolerate packet drops possible re ordering packets invalidate inter arrival time measurements results separate packet streams calculating available bandwidth 
case bprobe ensure cprobe results valid 
validated individual inter arrival measurements packet tracing tool running local ethernet 
experimental set consisted probe client probe target host running packet trace tool hosts ftp sessions run provide background load 
varying background load ran repetitions probe tool 
compared probe measurements packet inter arrival times log packet traces 
probe measurements elapsed time packet transfers generally accurate relative packet trace measurements 
compared cprobe estimate available bandwidth derived packet trace log 
log calculated time di erence rst reply divided sent duplicating calculation done cprobe 
measurements quite accurate seen results table 
quarters measurements actual value actual value 
course results limited local area network control cross tra measure probe non probe packets 
local network validation di cult 
relative error percentage measurements table quantities cprobe available bandwidth estimates 
evaluating cprobe design goals nd operates relying support servers network impact network great measurement bandwidth quite accurate 
open question predictive ability measurements available bandwidth provided cprobe 
measurements reliably predict available bandwidth 
far degree accuracy 
directions plans extend directions 
primary interest bprobe cprobe addition ping gather current information state network information input dynamic server selection algorithms 
plan evaluate contribution measurement techniques combinations determine selecting server dynamically 
currently building version mosaic www browser uses bprobe tool inform user relative expected transfer speeds links web page 
hypertext anchor color coded measure current network state 
instance faster expected transfers coded green slower ones red 
browser extension considering support multiple urls link document 
list alternate servers input dynamic server selection 
represents step way support replication browser list replicas 
particularly attractive loaded sites 
plan package probe tools daemon placed strategically network allow probing conditions remote parts network 
allow measurement link part paths providing con rmation probe estimates 
introduced validated tools useful measuring network conditions application level bprobe uses echo packets measure bottleneck link speed paths hosts internet cprobe measures presence competing tra bottleneck link 
validation results accurate reliable measurements bottleneck link speed real network conditions 
example application tools study measure base bandwidth set www servers 
results survey illustrate potential performance improvements dynamic measurement current network conditions bprobe cprobe 
jean bolot :10.1.1.40.3609
characterizing packet delay loss internet 
journal high speed networks 
jean bolot 
packet delay loss behavior internet 
proceedings sigcomm pages 
acm sigcomm august 
pittsburgh supercomputer center 
psc treno server 
available www psc edu treno info html november 
mark crovella robert carter 
dynamic server selection internet 
third ieee workshop architecture implementation high performance computer systems pages connecticut august 
van jacobson 
congestion avoidance control 
proceedings sigcomm symposium architectures protocols pages stanford ca august 
srinivasan keshav 
control theoretic approach control 
proceedings sigcomm 
acm sigcomm 
net genesis 
comprehensive list sites 
available www com cgi comprehensive april 

