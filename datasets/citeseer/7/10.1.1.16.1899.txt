competitive theory practice portfolio selection allan borodin bor cs toronto edu department computer science university toronto toronto canada ran el yaniv cs technion ac il department computer science technion israel institute technology haifa israel vincent vincent cs toronto edu department computer science university toronto toronto canada editor unknown portfolio selection problem clearly fundamental problems field computational finance 
set say stocks may cash natural online problem determine portfolio th trading period sequence prices equivalently relative prices preceding gamma trading periods 
growing interest growing skepticism concerning value competitive theory online portfolio selection algorithms 
competitive analysis worst case perspective perspective inconsistent widely accepted analyses theories statistical assumptions 
competitive framework surprisingly permit non trivial upper bounds relative performance cbal opt optimal offline constant rebalancing portfolio 
impressive preliminary experimental results showing certain algorithms enjoy respectable competitive worst case performance perform quite historical sequences data 
algorithms emerging competitive theory directly related studies information theory computational learning theory algorithms pioneered information theory computational learning communities 
goal try better understand extent competitive portfolio algorithms learning 
doing discuss simple strategies adapt data sequence 
mixture theoretical experimental results 
inclusive study performance existing new algorithms respect standard sequence historical data cited studies 
furthermore experiments historical data sequences 
conclude great potential portfolio selection algorithms motivated competitive considerations attempt learn statistical properties data 

concerned portfolio selection ps problem defined follows 
assume market securities 
securities stocks bonds currencies commodities trading day price vector ith period price value jth security local currency called cash dollars 
analysis convenient relative prices prices 
define gamma relative price jth security corresponding ith period 
notice investment jth security just ith period yields gamma delta dx dollars 
denote market vector relative prices corresponding ith day 
components non negative require component non zero 
portfolio allocation money investment market 
portfolio specified proportions current dollar wealth invested securities return portfolio market vector delta compound return sequence portfolios market sequence delta ps algorithm deterministic randomized rule specifying sequence portfolios 
alg deterministic respectively randomized ps algorithm expected return respect market sequence denoted alg 
mainly interested online ps algorithms algorithms decide portfolio market history far 
obvious goal design algorithms maximize alg 
basic ps problem described ignores important factors transaction commissions buy sell spreads risk tolerance control 
briefly consider issue transaction costs section 
absence transaction costs consider randomized ps algorithm mixture deterministic algorithms turn finite mixture realized initially dividing wealth deterministic algorithms see example 
simple strategy advocated financial advisors simply divide amount cash available buy hold portfolio securities 
advantage minimizing transaction costs takes advantage natural tendency market grow 
addition classical algorithm due markowitz mar choosing weightings portfolio minimize variance target expected return 

greatly simplifying nature market assuming ratio opening price st day opening price th day 
assuming trader buy sell opening price 
try compensate incorporating bid ask spreads transaction costs 
alternative approach portfolio management attempt take advantage volatility exhibited price fluctuations actively trade day day basis 
active trading lead returns dramatically outperform performance best security 
example consider class constant rebalanced algorithms 
algorithm class denoted cbal specified fixed portfolio maintains constant weighting value securities 
trading period cbal portfolio balanced 
constant rebalanced algorithms motivated factors 
shown optimal offline algorithm class cbal opt lead exponential returns dramatically outperform best stock see 
cov 
second dubious assumption stock movements independent show cbal maximizes expected return better online trading strategy ct 
third class cbal algorithms simple comparative study online algorithms tractable 
objective studying portfolio selection problem arrive online trading strategies guaranteed sense perform 
difficulty comes trying design evaluate portfolio selection algorithms rigorous manner choice performance measure 
mainly focus competitive analysis framework performance online portfolio selection strategy compared benchmark algorithm input 
reasonable benchmark return provided best stock 
active strategies optimal algorithm complete knowledge provide returns extreme reasonable approach doomed viewed comparison 
specifically section prove basic result ordentlich cover oc online algorithm competing optimal offline algorithm called opt best competitive number trading days number stocks market sequences ratio optimal offline return online return worthwhile mention classical influential approach portfolio problem 
approach problem broken stages 
uses statistical assumptions historical data create model stock prices 
model predict price movements derive optimal trading strategies 
approach notoriously difficult statistical assumptions especially underlying assumption stock price behavior modeled manageable parametric statistical models parameters change little smoothly time 
technical difficulties encountered traditional approach motivates competitive analysis line research followed 
approach coming competitive analysis start minimal assumptions derive algorithms worst case perspective add statistical distributional assumptions necessary obtain analytical results suggest heuristic improvements initial algorithms 
may approach fruitful interesting results proven 
particular cover universal portfolio algo 
markets foreign exchange trading period daily dynamically determined new clock events price ticks 
rithm cov proven possess important theoretical properties suggestive experimental results motivated algorithm 
consider analyses online strategies portfolio management comparative models corresponds benchmark offline algorithm bah opt buys best portfolio hindsight cbal opt fixed optimal portfolio opt true optimum algorithm 
mainly concerned competitive analyses cbal opt say portfolio selection algorithm alg competitive cbal opt supremum market sequences ratio cbal opt alg equal looking alg competitive ratio equivalently measure degree universality alg 
cover cov say alg universal log cbal opt gamma log alg sense daily averaged regret experienced investor uses universal online algorithm approaches zero time goes 
clearly rate regret approaches zero corresponds competitive ratio alg universal competitive ratio note logarithm return called growth rate 
finance average growth rate called internal rate return 
motivation measuring performance universality corresponds minimization regret logarithmic utility function see 
hand obscures convergence rate prefer competitive ratio 
competitive ratio ps algorithm cbal opt bounded polynomial fixed number stocks shall say algorithm competitive 
competitive ps algorithm universal strong sense 

classes ps algorithms order measure performance online algorithm useful examine offline version problem 
basic starting point competitive analysis 
interesting classes offline ps algorithms 
buy hold bah algorithms simplest portfolio selection policy buy hold bah invest particular portfolio sit entire duration investment 
cash portfolio market 
optimal offline algorithm bah opt invests stock best performing stock relevant period 
bah takes advantage natural tendency market grow 
bah transactions twice minimizing commissions 
investors probably consider successful able achieve return bah opt 

apparently commercial selling investment tools universal portfolios see www com 
constant rebalanced cbal algorithms constant rebalanced cbal algorithm cbal associated fixed portfolio operates follows trading period trades rebalance portfolio fraction invested ith stock 
compared buy hold strategy cbal strategy take advantage market fluctuations achieve return greater return bah opt 
easy see return cbal opt bounded return bah opt bah strategy thought extremal cbal algorithm 
empirically shown real market sequences return cbal opt dramatically outperform best stock see table 
markets true presence modest commission costs 
example cover cg cover cov consider case stock cash 
consider market sequence cbal delta delta delta market return cbal exponential best stock moving 
assumption daily market vectors identically independently distributed motivating reason considering cbal algorithms 
theorem cover thomas ct distribution 
cbal performs sense expected return best online ps algorithm 
proof arg max bx fb gamma portfolio sequence generated online algorithm 
assumption assumption cbal opt randomized ss algorithm note general may depend market sequence past state history length time algorithm state 
ut theorem tells sufficient look best online algorithm set cbal algorithms provided market generated source 
keep mind assumption hard justify 
alternative statistical market theories empirical evidence see gre bck 
switching sequences extremal algorithms consider sequence stock indices mg sequence prescribes portfolio management policy switches entire wealth stock stock algorithm generating sequences deterministic randomized 
ordentlich cover oc introduce switching sequence algorithms called extremal strategies 
depicts randomized switching sequence algorithm stocks produced necessarily finite memory stochastic automaton suggested singer sin 
interpretation automaton state portfolio stock changes state probability gamma simple example generally fixed probability fl change state equal probability fl gamma enter remaining states clear markov chain stationary distribution expected return converge equal started equal probability state return cbal investment strategies switching sequences may speculative theoretical perspective motivated 
particular market sequence true optimal algorithm called opt switching sequence 
example singer sin consider market sequence starting switching sequence returns 
contrast mixture buy holds go bankrupt returning cbal cbal cbal opt 
basic properties section derive basic properties concerning online offline ps algorithms 
kelly sequences kelly horse race market vector stocks vector form stock retains value stocks crash 
clearly exactly kelly market vectors 
set length kelly market sequences stocks 
clear context omitted 
kelly market sequences length kelly sequences introduced kelly kel model horse race gambling 
show view cbal mixture switching sequences 
kelly sequences derive lower bounds online ps algorithms see 
lemma 
simple somewhat surprising useful lemma due ordentlich cover oc 
lemma alg online algorithm 
alg proof sketch proof case 
proof induction base case notice alg specify portfolio gamma kelly market sequence case length 
possible kelly sequences gamma delta gamma delta alg alg gamma 
induction hypothesis states lemma holds gamma days depicts computation tree node expands tree possible kelly market vectors 
proof complete add returns corresponding possible kelly vectors day 
ut lemma permits relate online switching sequences shown lemmas 
lemma alg online ps algorithm 
exists algorithm alg mixture switching sequences equivalent terms expected return alg kelly market sequences 
proof fix lemma alg alg probability distribution 
sequence kelly market vectors denote sk switching sequence index stock relative price alg alg delta sk mixture switching sequences assigns weight alg sequence sk clearly kelly market sequence alg alg 
lemma extended way 
lemma alg cbal constant rebalanced algorithm known achieve return cbal market sequence method 
mixture alg cbal delta sk 
assuming transaction costs simple transaction cost model fixed percentage commission 
proof prove consider 
return cbal kelly market sequence cbal gives weight sk alg arbitrary market sequence alg sk ij delta cbal theorem mixture cbal algorithms emulate mixture bah algorithms 
ii mixture ss algorithms emulate cbal algorithm mixture 
proof part theorem trivial cbal extremal simply bah invests entire wealth stock 
part ii restatement lemma 
note mixture ps algorithms de randomized partitioning initial wealth 
lemma competitive ratio invariant scaling relative prices 
particular invariant scaling day independently assume loss generality relative prices proof consider ratio return algorithms days aff bfi cfl dffi ff fi fl ffi multiply relative prices st day respectively nd day delta delta obtain aff delta bfi delta cfl delta dffi delta ff delta fi delta fl delta ffi delta delta delta delta delta ut lemma game opt sufficient prove lower bounds kelly market sequences 
proof arbitrary market sequence 
lemma scale day independently market vector im maximum relative price day say max equals 
consider kelly projection market market vector max max algorithm alg alg alg opt satisfies commissions opt opt 
ut lower bound proof technique lemma describe general lower bound proof technique due cover ordentlich 
lemma portfolio selection lower bound opt optimal offline algorithm class offline algorithms cbal opt class constant rebalanced portfolios 
opt lower bound competitive ratio online algorithm relative opt proof lemma 
clearly maximum element set smaller weighted average elements set 
qk alg alg alg 
max opt alg qk delta opt alg alg delta opt alg opt ut 
optimal bounds bah opt opt cases lemma provides means easily proving lower bounds ps commissions 
example consider ps game bah opt 
market sequence bah opt invests entire wealth best stock 
bah opt lower bound competitive ratio investment algorithm problem 
tight bound algorithm invests initial wealth stocks achieves competitive ratio similarly kelly market sequence opt 
kelly sequences length km opt lower bound competitive ratio online algorithm opt 
case cbal achieves optimal bound 
despite exponential tight lower bound perform significantly better opt 
herbster warmuth hw singer sin uses parameter measuring switching frequency input 
market sequence define number switches optimal offline switching sequence example letting market sequence gamma delta gamma delta gamma delta gamma delta gamma delta gamma delta gamma delta gamma delta low switching frequency market sequence gamma delta gamma delta gamma delta gamma delta gamma delta gamma delta gamma delta gamma delta maximal switching frequency 
able obtain better bounds market sequence happens small switching frequency 
singer achieves static adaptive fl algorithm 
case algorithm defined stochastic automaton switches state probability fl amount time algorithm presently state competitive ratio opt attained algorithm market sequence switches delta delta small excellent competitive ratio bound necessarily exponential unfortunately empirical observations true markets suggest number switches actual markets general large lower bound technique section easy derive lower bound delta gamma gamma delta delta gamma number kelly sequences exactly switches 
fixed fl switching sequence algorithm equivalent uniform cbal deduce competitive bound uniform cbal 

perform cbal opt comparison cbal opt received considerable attention literature 
best known results summarized table 
lower bound technique section establish ordentlich cover oc lower bound 
lemma immediate useful 
lemma consider kelly market sequence stocks 
represent sequence mg cbal algorithm 
suppose sequence occurrences stock say kelly sequence type nm 
sequence type nm return cbal sequence delta delta delta nm return cbal depends type 

absence transaction costs simply determined stock having best relative price 
transaction costs easily seen necessarily case 

essentially algorithm provides compromise buy hold strategy rebalancing strategy particular adaptive compromise rule independent data 
course compromise applied generally approach dealing transaction costs 

nyse data discussed section number switches stocks days trading 
pair stocks kin arc pairs studied singer sin switches 
development section gives alternative informative proof determines optimal portfolio kelly sequence type nm 
apply lemma class cbal algorithms obtain lemma alg online ps algorithm 
lower bound competitive ratio alg cbal opt sigman nm proof consider case 
clearly gamma delta length kelly sequences having type gamma sequence cbal opt mixture switching sequences min max analysis ordentlich cover provide matching upper bound market sequence length showing optimal bound competitive ratio context known duration approximation appears table 
note asymptotically fixed number stocks theta gamma 
source lower gamma gamma delta gamma oc upper known oc upper gamma table best known results cbal discussion follows immediately cbal finite mixture competitive relative cbal opt competitive ratio cbal cbal opt grow exponentially experimental point view uniform cbal having weight stock reasonable albeit naive choice 
cover universal portfolio selection algorithm universal portfolio algorithms cover cov special cases class weighted algorithms denote algorithms assumptions distribution stock prices distributions exist 
cover ordentlich oc prove algorithms performs cbal opt online trading strategy 

gamma function defined gamma gammat gamma dt 
shown gamma gamma gamma 
integer gamma 
note gamma intuitive understanding weighted algorithms cover ordentlich emphasized blum kalai bk 
algorithms parameterized distribution set portfolios cover ordentlich show result wealth wealth cbal observation interesting definition see terms sequence adaptive portfolios depending market sequence progressively give weight better performing constant rebalanced portfolios 
observation shows return weighted algorithms equivalent algorithm 
mixture specifies randomized trading strategy sense independent stock market data 
course composite portfolio determined mixture depend market sequence cover ordentlich analyze instances called uni uses uniform distribution equivalently dirichlet distribution simply called dir uses dirichlet distribution 
prove uniform algorithm uni competitive ratio gamma gamma gamma bound tight 
somewhat surprisingly contrast see discussion concerning algorithms sections bound extracted uni adversary kelly market sequences fact kelly sequence fixed stock wins day 
case easily seen return cbal gammab days db cover ordentlich show dir algorithm competitive ratio gamma gamma gamma gamma gamma bound tight achieved kelly sequences 
date best competitive bound cbal opt achieved online algorithm ps game unknown horizon 
fixed constant gap optimal lower bound fixed horizon upper bound provided dir unknown horizon 
instructive consider elegant proof universality uni slightly inferior bound due blum kalai bk 
gamma dimensional simplex portfolio vectors distribution recall return weighted alg weighted average returns cbal 
market sequence length cbal cbal opt 
say near day cbal delta cbal 
example suppose uniform mixture separate accounts controlled constant rebalancing portfolios cbal cbal initially composite portfolio 
day price relatives composite portfolio 

see web page www cs cmu edu slides 
equivalently cbal cbal days cbal cbal delta denote dimensional volume 
uniform distribution probability near pr near gamma gamma gamma gamma delta gamma gamma gamma fraction initial wealth invested cbal near cbal opt attaining ratio competitive ratio achieved delta gamma expert advice algorithm algorithm proposed helmbold takes different approach 
developed online regression framework motivation best weighted combination experts case stocks 
combination portfolio 
algorithm tries move cbal opt portfolio update function minimizes objective function form log delta gamma distance dissimilarity measure distributions portfolios learning rate parameter 
competitive bound proven helmbold weaker bound obtained uni simpler implement significantly outperforms uni new york stock exchange data see table 
note competitive bound helmbold requires value quite small particular proof set lb logm lb lower bound price relative algorithm degenerates uniform cbal universal algorithm 
easy see increases decreases think small order achieve universality 
small learning rate proof sufficient universal 
case day price relatives stocks identical 
helmbold show eliminate assumption lower bound price relatives apply standard doubling trick derive algorithm assume known horizon expect identical uniform cbal 
combines small learning rate reasonably stable market price erratic expect performance similar uniform cbal confirmed experiments 

portfolio selection algorithms section discuss online portfolio selection algorithms 
delta algorithm new algorithm suggested goal exploiting rationale constant rebalancing algorithms 
algorithms adaptations known prediction algorithms 
delta algorithm introduce new online ps algorithm called delta 
algorithm parameters corr informally delta corr operates follows 
risk parameter controlling fraction stocks value algorithm willing trade away day 
stock risk proportion weight climbing value sufficiently anti correlated stock 
anti correlated risk amount spread falling stocks proportional correlation coefficient algorithm takes parameters 
window length specifies length history calculating new portfolio 
take advantage short term movements price relatives small window 
corr correlation threshold determines stock sufficiently anti correlated stock case weighting stock changed 
describe delta corr update rule 
days passed form complete window length algorithm uses uniform portfolio 
day update portfolio definitions gamma define lx log matrix contain log price relatives current window time 
matrix compute empirical correlation coefficient cs th th stocks 
compute mx average log price relative stock current time window 
define notion stock having claim stock claim ae cs corr mx mx 
correlation coefficient normalized covariance covariance divided product standard deviations cor cov std std cov mean mean 
claim ae 
new portfolio specified terms claims gamma claim delta gamma gamma delta delta gamma theoretical analysis delta algorithm reach stage 
sections experimental studies performance delta algorithm 
relation discrete sequence prediction portfolio selection briefly explore established relation portfolio selection problem prediction discrete sequences 
discuss known prediction algorithms ps problem 
simply put standard worst case prediction game log loss measure special case ps game adversary limited generating kelly market vectors 
mentioned section cover ordentlich showed ps algorithms uni dir obtain worst case behavior kelly market sequences 
imply ps problem reducible prediction problem see examples prediction algorithms competitive cbal opt ps context competitive prediction game 
development concepts entropy kl divergence 
dm probability distribution entropy measured bits defined gamma log log base see ct 
known easy prove distribution dm log relative entropy kl divergence measure distance distributions 
distributions kl divergence dkl jjq jjq log log 
known hard prove jensen inequality dkl jjq called information inequality ct 
convention log log 
kl divergence measured bits logarithm base 
brief description prediction problem 
comprehensive survey online prediction see mf 
online prediction problem online player receives sequence observations gamma symbols alphabet size time instance player generate prediction unseen symbol prediction general probability distribution jx gamma alphabet 
gives confidence player possible outcomes 
receiving player incurs loss loss function 
concentrate log loss function gamma log 
total loss prediction algorithm respect sequence 
competitive analysis online ps algorithms customary measure worst case competitive performance prediction algorithm respect comparison class offline prediction strategies 
consider comparison class constant predictors correspond class constant rebalanced algorithms ps problem competitive ratio strategy respect comparison class maxx gamma inf 
complete equivalence competitive analysis online prediction algorithms log loss measure respect offline constant predictors competitive analysis online ps algorithms respect offline constant rebalanced algorithms allowable market vectors kelly sequences 
see consider binary case consider kelly market sequence represents kelly market vector corresponds kelly market vector gamma delta corresponds gamma delta 
note ease exposition consider binary case stock indices 
cbal constant rebalanced algorithm portfolio gamma 
return cbal gamma gamma 
type zeros ones base logarithm return dividing get log log log gamma gamma log gamma log gamma gamma log delta gamma log gamma delta gamma log log gamma log log gammad kl hi jj gamma gamma dkl delta non negative optimal offline choice constant rebalanced portfolio cbal opt maximizes log case vanishes 
consider competitive ratio obtained algorithm alg cbal opt 
expression log return cbal opt get log cbal opt alg log cbal opt gamma log alg gamma log alg goal establishing competitiveness algorithm bound ratio 

common term literature regret 
jensen inequality gamma log alg gamma log gamma gamma gamma log gamma gamma gamma log gamma log gamma log gamma log gamma gamma gamma dkl gamma jj gamma gamma entropies gamma gamma log alg dkl gamma jj gamma putting log cbal opt alg dkl gamma jj gamma gamma nh bound nice intuitive interpretation view ps game prediction game 
prediction game online player generate prediction ith bit binary sequence revealed online 
kl divergence term bound measures bits total redundancy inefficiency prediction 
second entropy term measures predictable sequence order prove competitive ratio cbal opt sufficient prove dkl gamma jj gamma log nh expression reduces log reduces log gammab summation kl divergence terms expressed logarithm iff gamma 
define online prediction algorithm probability product corresponding input sequence prove competitive ratio sufficient prove log log log nh gamma delta clearly entire consideration valid binary prediction algorithm respect offline class fixed predictions difference prediction game consider loss ps game look returns simply negative losses 
similar development established 
add beta prediction rule consider method predicting st bit binary sequence frequency zeros ones appeared including th round 
maintain counts 
records frequency zeros records frequency ones including round counts online algorithm predicts st bit probability fi fi parameter beta non negative real 
rule called prediction rule 
instance fi called laplace law succession see mf ct case fi known optimal distributional distribution free worst case settings mf 
distributional setting rule derived bayesian parametric prediction framework assuming dirichlet prior see ct 
case possible outcomes add beta rule fi mfi jm ps problem prediction algorithm add beta rule straightforward manner 
assume price relatives normalized everyday largest price relative equals 
market vector xm consider kelly projection components zero component arg maxx normalized equal way apply prediction algorithm discrete sequences 
round algorithm yields prediction symbols 
ps algorithms blatantly ignore information stock market vectors tries predict winning stock 
rest section consider ps algorithms derived add beta rule 
algorithm prediction ps online algorithm consider called fi stands markov order zero 
algorithm simply uses add beta prediction rule kelly projections market vectors 
prediction game equivalently ps kelly markets show algorithm fi fi gamma competitive achieves identical competitive ratio uni uniform weighted ps algorithm cover ordentlich see section 
sketch analysis case target competitive ratio 
observation return fi kelly sequences type 
result shown induction length market sequence 
fact straightforward calculate probability product respect market sequence type explicitly calculating sequence contains zeros followed ones equals 

log gamma delta nh gamma delta see ct 
simplify discussion randomly choose stocks achieve maximum price relative stock 
log log log log log nh inequality development follows fi algorithm competitive prediction game restricted ps kelly sequences hard prove tight lower bound competitive ratio kelly sequence ones zeros 
quite easily generalize arguments possible prove similar involved analysis add rule achieves competitive ratio gamma universal dir algorithm general ps problem 
see merhav feder mf 
despite fact algorithm competitive online prediction game competitive universal unrestricted ps game offline constant rebalanced portfolios 
case shown market sequences form gamma ffl market sequence easy see competitive ratio omega gamma cover cg show naive learning algorithm universal assumption set possible market vectors bounded 
doing illustrate algorithm blackwell bl theorem avoids potential pitfalls naive counting scheme 
algorithm surmise deficiency algorithm ps game attributed fact ignores useful information market vectors 
consider algorithm called fi attempts record information past 
fi algorithm fi uses add beta rule maintains counters follows log assume price relatives normalized day maximum 
clearly reduces prediction game 
algorithm competitive 
shown sequences form tn sufficiently large clear behavior sequence similar cbal competitive 
hindsight experiments show tends perform uniform cbal reflecting fact markets geometric averaging crude 
prediction algorithms lempel ziv trading suspect non competitiveness add beta variants due fact ignore dependencies market vectors record statistics 
attempt examine possibility consider trading algorithm lempel ziv compression algorithm zl 
lempel ziv lz compression algorithm works follows 
compressing sequence finite alphabet algorithm maintains dictionary subsequences phrases 
step algorithm parses phrase encoded smallest subsequence current point sequence appear dictionary 
clearly subsequence form phrase dictionary symbol 
algorithm encodes new phrase 
suppose algorithm encodes position say binary dictionary sends encoding symbol central result algorithm distributional setting compression rate bits symbol guaranteed approach optimal rate entropy source stationary ergodic source see zl ct 
lz algorithm considered context prediction see langdon lan rissanen ris 
feder fed feder gutman fg consider worst case competitive performance algorithm context gambling 
feder shows lz algorithm universal respect offline class finite state prediction machines 
describe lz prediction algorithm 
binary case algorithm maintains times binary tree trie records phrase dictionary counters hold statistics input 
initial tree contains root left right leaves 
left child node corresponds parsing right child corresponds parsing 
node maintains counter 
counter leaf set 
counter internal node maintained equals sum right left child counters 
algorithm computes phases phase previously parsed prefix processed 
process prefix just parsed input algorithm starts traversing tree starting root 
node prediction zero zero left counter divided sum zero counters 
reaching leaf tree enlarged making leaf internal node adding leaf sons new internal node 
counters updated appropriately 
ps algorithm lempel ziv lz prediction algorithm applied kelly projections market vectors 
nemesis sequence gamma ffl easy see lower bound competitive ratio lz omega gamma lz competitive definition universal 
portfolio selection function algorithm phd thesis ordentlich suggests algorithm generalization algorithm fi 
case algorithm chooses portfolio gamma optimal constant rebalanced portfolio time components tracks optimal offline algorithm far second may viewed greedy algorithm viewed kind function algorithm see 
ordentlich shows sequence gamma ffl produces competitive ratio omega gamma algorithm 
slightly improve ordentlich lower bound omega gamma 
concatenate gamma gamma delta delta gamma gamma delta delta ordentlich sequence theta entire input sequence remains length 
yields additional factor omega gamma 
remains open question ordentlich algorithm competitive universal 
omega gamma lower bound shows algorithm competitive uni dir 

experimental results consider data sets test suites algorithms considered relevant literature 
data set stock market data cover cov cover ordentlich helmbold blum kalai bk singer sin 
data set contains daily prices stocks new york stock exchange nyse year period july rd dec st 
second data set consists stocks toronto stock exchange tse year period jan th dec st 
stocks chosen traded trading days period third data set consists stocks composing dow jones industrial average thirteen month period days june st august th final data set intra day trading foreign exchange fx market 
specifically data covers bid ask quotes usd japanese yen usd german marks dm year period oct st sep th 
explained section interpret data price relatives stocks yen dm 
table summarize essential properties data sets 

experiments ordentlich function algorithm requires computing cbal opt portfolio day tick market 

helmbold data set originally generated hal stern 
know criteria choosing particular set stocks 

data provided steve 

data downloaded yahoo adjusted dividends splits 

data purchased olsen group www olsen ch 
data set market duration dates assets ticks remarks nyse new york years stocks daily prices stock exchange tse toronto years stocks daily prices data stock exchange set includes tse stocks traded day djia dow jones months stocks daily prices adjusted industrial average dividends splits fx foreign exchange year currencies intra day bid usd vs yen ask price ticks usd vs dm table summary data sets experiments goal experiments expand results reported literature try better understand observed performance existing algorithms new algorithms introduced section 
fi fi algorithms chose fi optimal choice context universal prediction 
discussed section competitive bound requires small chose 
delta corr arbitrarily tried settings parameters largest risk factor large window second small risk factor smaller aggressive window 
noted parameter choices running experiments attempt compute offline optimal near optimal settings try learn adaptively set parameters 
experiments nyse data stocks sample positive return entire year sample 
returns ranged low high bah opt 
running online algorithms pairs stocks determined cbal opt stock traded cash bond 
bond result return period time covered data 
results summarized table 
stocks benefited active trading strategy cash see table 
winning strategy remaining stocks buy hold stock 
stock bah cbal opt weight stock kin ark table stocks benefited active trading strategy 
cash replaced annualized bond stocks returns bold table benefited active trading 
interesting note cbal opt stocks comprised portfolio just stocks 
portfolio return table 
stock weight comm metals kin ark mei table cbal opt portfolio nyse data 
stocks ones benefited active trading cbal opt bond 
interesting note return cbal opt remaining stocks respectable 
beats bah opt entire stocks 
pairs stocks looking individual pairs stocks finds different story 
just stocks benefiting paired finds possible pairs half cbal opt return best stock 
fact encouraged consideration competitive online algorithms sample indicate stock pairings benefit frequent trading 
course argued identifying profitable pair real problem 
contributions put performance uni perspective 
way compare performance naive general algorithm rebalancing portfolio 
abbreviate uniform cbal algorithm uniform buy hold denoted algorithms give reasonable realistic benchmarks compare online algorithms certainly expect online algorithm perform relative uniform bah reasonable expect performance relative algorithms considered naive strategies 
half stock pairings cbal opt advantage cbal 
finding small learning rate substantial say advantage confirm observations section 
previous expositions highlighted combinations stocks returns impressive outperformed uni significantly outperformed best stock 
said contrast delta performs remarkably better naive algorithm better pairs 
fact delta better cbal opt third time pairs 
stock bah cbal opt wt cbal opt wt dupont kin arc sears alcoa mmm kodak gm ford ge dow chem clark ibm coke exxon amer brands jnj mei hp gulf comm metals morris table return cbal opt traded cash bond 
stock weight wt cbal opt 
example dupont balanced cash respectively bond return cbal opt respectively 
returns beat holding stock bold 
cases active trading beneficial 
stocks algorithms exercised portfolio stocks 
order get data detect possible biases sample split equal time periods 
algorithms run segments 
addition algorithms run reverse sequence see perform falling market 
data set ubah cbal opt delta entire period period period period period period period period period period period table returns stocks data set ubah cbal opt delta entire period period period period period period period period period period period table returns stocks reverse experiments tse djia fx data tse djia fx data quite different nature nyse data 
particular stock money nyse data stocks tse data lost money 
best return bah opt worst return pure gold minerals 
stocks having non zero weight cbal opt including 
djia evenly split stocks money lost money 
best return phillip morris worst return hewlett packard 
cbal opt sample actively trade just simple algorithm buying holding phillip morris stock 
fx data provided different form bid ask quotes occur opposed say closing daily prices 
interpreted tick price average value 
ask bid 
tick represents currency merged ticks blocks block shortest number ticks currency traded 
ignored bid ask nature prices information derive induced seemingly realistic transaction cost trading currency point time 
assuming transaction costs yen decreased return dm increased return 
noted differences prices consecutive ticks usually quite small frequent trading context small transaction costs spreads poor strategy dramatically confirmed experiments 
worth observing particular fx data cbal opt simply bah opt 
table reports returns various algorithms data sets transaction costs 
transaction costs see simple learning algorithms quite aggressive strategies delta lz excellent fantastic returns 

portfolio selection commissions bid ask spreads algorithmic portfolio selection commissions studied 
commission models 
simple models flat fee model proportional fixed rate model 
example full service broker charge negotiable commission 
hand major online trading discount brokers trade offer essentially flat fee kinds transactions essentially large volume trades reducing commission rate negligible 
markets foreign exchange fx explicit commissions large volume trades 
effect similar complicated proportional commission model essentially exists markets obtained due buy sell bid ask spreads 
current reality emerging internet trading services effect commissions traders significant bid ask spreads remain 
data fx market contains bid ask spreads 
want view bid ask spreads transaction costs define transaction rate ask bid ask bid 
resulting induced transaction costs quite non uniform time ranging mean transaction rate 
obviously bid ask spreads reflections transaction volume liquidity financial instrument 
table presents returns various algorithms data sets different transaction costs 
nyse tse data sets fixed transaction cost rates small full service 
fx data artificially introduced fixed rate costs original bid ask spreads 

see www com 
ubah delta delta dir nyse theta nyse theta nyse tse tse tse djia djia djia fx fx fx fx bid ask lz uni cbal opt nyse nyse nyse tse tse tse djia djia djia fx fx fx fx bid ask table returns various algorithms different data sets different transaction costs 
note uni dir cbal opt approximated 
returns beat ubah bold 
ubah delta delta dir nyse nyse nyse tse tse tse djia djia djia fx fx fx fx bid ask lz uni cbal opt nyse nyse nyse tse tse tse djia djia djia fx fx fx fx bid ask table returns trading occurs periodically 
algorithms may suggest new portfolio day trading occurs just period 
daily data period days interpreted trading month 
fx data trading occurs time ticks 
returns beat ubah bold 
ubah delta delta dir nyse nyse nyse tse tse tse djia djia djia fx fx fx fx bid ask lz uni cbal opt nyse nyse nyse tse tse tse djia djia djia fx fx fx fx bid ask table returns algorithms run compressed data set 
stock data data sets compressed factor 
interpreted observing trading month 
fx data data compressed factor bring number trades line data sets 
returns beat ubah bold 
simple important model fixed rate transaction costs difficult extend competitive analysis results reflect costs 
particular blum kalai bk extend proof uni competitiveness model transaction costs 
suppose transaction rate cost buy sell stock costs alternatively say transaction costs selling commission rate blum kalai prove uni competitive ratio upper bounded gamma gamma gamma delta generalizing bound equation section 
proof section obtain bound cbal cbal near obtain somewhat weaker competitive ratio delta gamma blum kalai bk helmbold singer sin experimental results indicate transaction costs significant clearly algorithm cbal actively trading possible obtain reasonable returns algorithms uni 
nyse data beat market presence transaction costs 
experiments indicate transaction costs may problematic previous results theoretical competitiveness say uni suggests 
algorithms lz delta algorithm exceptionally returns transaction costs disastrous returns unreasonable costs 
experimenting portfolios containing stocks nyse data blum kalai achieve returns uni cbal opt rebalancing monthly days 
lead tables provide experimental results nyse tse djia data sets trading takes place days 
reasonable ways apply various algorithms context 
periodic trading reported table maintain virtual shadow portfolio vector algorithm trading day trade days 
compressed data reported table blum kalai compress price relatives days bn days multiplying price relatives day period 
experimental results encouraging clear transaction costs significant factor 
instance transaction costs online algorithms beats ubah tse data set periodic trading compressed data 
fx data similar results trading ticks 
number chosen number trades matched compressed nyse data 
results encouraging lz able beat ubah transaction rates bid ask spread 
appendix cumulative return graphs data sets 
stock market data compare behaviour ubah trivial market index 
informed singer experimental results adaptive fl algorithm correct particular results transaction costs encouraging reported sin 
cbal opt best non trivial online algorithm daily trading monthly trading 
worth noting cbal opt plot represents return portfolio maximizes return final day 
graphs best online algorithm exactly tracks returns represented single plot occurs 
true tse daily monthly trading data djia daily trading 
interesting encouraging observation full service commission rate online algorithms beats market data sets tse compressed market data 
specifically beats ubah nyse fx data sets lz beats ubah djia data set 

concluding remarks theoretical experimental point view clear competitive approach portfolio selection just emerge 
contrast related topic sequence prediction better developed practice closely follow theory 
course significant differences sequence prediction special case portfolio selection second transaction costs alternatively bid ask spreads reality having significant impact 
terminology metrical task systems competitive analysis see bb cost change states portfolios addition loss profit state 
hand ps algorithms applied area expert prediction 
specifically view expert stock log loss prediction exponentiated generate stock price 
applying ps algorithm prices yields portfolio interpreted mixture experts 
see example ordentlich kalai chen blum rosenfeld 
previously suggested useful online algorithm beat market algorithm able consistently equal times surpass performance uniform buy hold 
absence transaction costs online algorithms discussed able beat market nyse stock data 
true data sets 
furthermore modest transaction costs introduced algorithms suffered significant catastrophic losses data sets 
phenomena striking delta algorithm lz algorithm practical algorithm universal prediction setting 
trading day lz delta algorithms clearly sensitive transaction costs recipes disaster context transaction costs 
positive results obtained algorithms constrained trade frequently open question online portfolio selection algorithm consistently beat ubah 
note tse data challenging data set online algorithms 
compressed tse data online algorithm matched performance ubah transaction costs 
suspect tse data especially problematic large number stocks stocks having non zero weight cbal opt 
sense portfolio selection problem misnomer portfolio man agement problem appropriate name 
choosing selecting subset stocks manage may real challenge 
immediate direction research consider learn rebalance 
plan augment various portfolio selection algorithms learning component determines invoke rebalancing 
important investigate extent various algorithmic parameters adaptively learned 
generally want understand extent competitive theory online algorithms predict performance regard real stock market data real transaction costs 
particular theory learn focus promising subset stocks 
talking theory completely disregards feedback market successful algorithm 
theory influence practice interesting theoretical questions need answered 
conclude questions theoretical interest 

competitive ratio ordentlich function algorithm 

competitive ratio lempel ziv ps algorithm 

online algorithm considers kelly projection market input sequence competitive universal 
general classes online algorithms proven competitive non competitive 

define portfolio selection learning algorithm 
sense argue uni dir learning algorithms 
true learning ps algorithm attain worst case competitive bounds uni dir 

extent utilize side information defined cover ordentlich ps learning algorithms 
see cross barron cb 

determine optimal competitive ratio cbal opt opt context fixed commission rate 
develop competitive bounds context bid ask spreads 

continue study portfolio selection algorithms context short selling 
see vovk watkins vw 

consider benchmark algorithms basis competitive theory 

experimental results suggest may advantageous trade periodically especially presence transaction costs see tables 
diluted ps modelled optimized online manner 
acknowledgments avrim blum adam kalai charles rackoff rob schapire manfred warmuth constructive comments 
steve providing tse data 
bl blackwell analog minimax theorem vector payoffs 
pacific math pp 
borodin el yaniv online computation competitive analysis 
cambridge university press bb blum burch line learning metrical task system problem 
proceedings th annual conference computational learning theory colt pages 
appear machine learning 
bk blum kalai universal portfolios transaction costs 
machine learning pp 
bck bollerslev chou arch modeling finance selective review theory empirical evidence 
journal econometrics 
kane marcus investments 
richard irwin 
cg empirical bayes stock market portfolios 
advances applied mathematics pp 
cover ordentlich universal portfolios side information 
ieee transactions information theory vol 

cov cover universal portfolios 
mathematical finance ct cover thomas elements information theory 
john wiley sons 
cb cross barron efficient universal portfolios past dependent target classes dimacs workshop line decision making july 
fed feder gambling finite state machine ieee trans 
inform 
theory vol 
pp 
sept 
fg feder gutman universal prediction individual sequences ieee trans 
inform 
theory vol 
pp 
sept 
gre green econometric analysis collier mcmillan helmbold schapire singer warmuth line portfolio selection multiplicative updates 
mathematical finance vol 
pp 
hw herbster warmuth tracking best expert 
machine learning vol 
pp 
kalai chen blum rosenfeld line algorithms combining language models 
proceedings international conference acoustics speech signal processing icassp 
kel kelly new interpretation information rate 
bell sys 
tech 
journal laplace law succession universal encoding ieee trans 
infor 
theory 
vol 
january 
lan langdon note lempel ziv model compressing individual sequences 
ieee trans 
inform 
theory vol 
pp 
mar markowitz portfolio selection efficient diversification investments 
john wiley sons mf merhav feder universal prediction 
ieee trans 
inf 
theory ordentlich universal investment universal data compression 
phd thesis stanford university 
oc ordentlich cover cost achieving best portfolio hindsight 
accepted publication mathematics operations research 
conference version appears colt proceedings title line portfolio selection 
ris rissanen universal data compression system 
ieee trans 
inform 
theory vol pp 

sin singer switching portfolios 
international journal neural systems zl ziv lempel compression individual sequences variable rate coding 
ieee trans 
inform 
theory vol pp 

vw universal portfolio selection vovk watkins universal portfolio selection colt 
appendix cumulative return graphs nyse data daily rebalance days ubah cbal opt cbal opt ubah nyse data monthly rebalance months ubah cbal opt cbal opt ubah return history nyse data traded daily monthly 
ubah return graphs 
algorithm best performing online algorithm 
see mitigating effect trading monthly presence transaction costs 
note cbal opt plot tracks performance single portfolio maximizes return final day 
tse data daily rebalance days ubah cbal opt cbal opt ubah tse data monthly rebalance months ubah cbal opt cbal opt ubah return history tse data traded daily monthly 
transaction costs market prevented online algorithms beating ubah 
note cbal opt plot tracks performance single portfolio maximizes return final day 
djia data daily rebalance days ubah cbal opt cbal opt ubah djia data monthly rebalance months ubah lz cbal opt cbal opt ubah lz return history djia data traded daily monthly 
see mitigating effect trading monthly presence transaction costs 
online algorithm lz able beat ubah 
note cbal opt plot tracks performance single portfolio maximizes return final day 
fx data bid ask constant rebalancing time ticks return ubah cbal opt cbal opt ubah fx data bid ask rebalance rebalance time ticks ticks compressed ubah cbal opt cbal opt ubah return history fx data traded tick ticks 
see mitigating effect reduced trading presence transaction costs 
online algorithm performs better ubah constant rebalancing plotted 
data compressed online algorithm able beat ubah 
note cbal opt plot tracks performance single portfolio maximizes return final data tick 

