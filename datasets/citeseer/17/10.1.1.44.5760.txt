fl kluwer academic publishers boston 
manufactured netherlands 
universal portfolios transaction costs avrim blum avrim cs cmu edu adam kalai cs cmu edu school computer science carnegie mellon university pittsburgh pa 
constant rebalanced portfolio investment strategy keeps distribution wealth set stocks period period 
line investment strategies competitive best constant rebalanced portfolio determined hindsight cover helmbold cover ordentlich cover ordentlich ordentlich cover cover 
universal algorithm cover cover provide simple analysis naturally extends case fixed percentage transaction cost commission answering question raised cover helmbold cover ordentlich cover ordentlich ordentlich cover cover 
addition simple randomized implementation significantly faster practice 
conclude explaining algorithms applied problems combining predictions statistical language models resulting guarantees striking 

constant rebalanced portfolio crp investment strategy keeps distribution wealth set stocks period period 
proportion total wealth stock period 
line investment strategies competitive best crp determined hindsight cover helmbold cover ordentlich cover ordentlich ordentlich cover cover 
specifically daily performance algorithms market approaches best crp market chosen hindsight lengths markets increase bound 
example useful crp consider market just stocks helmbold ordentlich cover 
price stock remains constant price stock alternately halves doubles 
investing single stock increase wealth factor 
crp increase wealth exponentially 
period trades stock equal worth stock 
alternate periods total value change factor increasing total worth factor periods 
extend model adding fixed percentage commission cost transaction common financial modeling davis norman 
fully define commission model addition specifying cost transaction specify crp pays overhead 
section give natural properties specification analysis 
blum kalai properties satisfied optimal investor simultaneously rebalance portfolio pay transaction costs sale stock 
section new simpler analysis implementation cover universal algorithm cover 
lines reasoning argument foster vohra 
show argument extends case commission section 
previous bound market assets periods performance ratio wealth universal wealth best crp gamma presence commission wealth universal wealth best crp gamma ratio decreasing function average period ratio gamma increases increases bound 
example best crp half times period years making factor year 
cover raises question possible achieve exponential growth rate best crp presence commission cover ordentlich analysis answers question 
consider universal algorithm cover ordentlich better guaranteed ratio gamma semi constant rebalanced portfolios may may rebalance period suggested investment strategy presence commission helmbold 
section show exponential wealth semi constant rebalanced portfolio general achieved knowledge market 
section results universal algorithm various commissions real world stock data 
section explain stock market algorithms problems combining predictions language models prior knowledge optimal mixture 

notation definitions mainly notation cover 
price relative asset nonnegative ratio closing price opening price period 
market assets trading takes place periods market performance expressed price relative vectors xn ij nonnegative price relative th stock th period 
portfolio simply distribution wealth stocks 
represent distribution wealth element gamma dimensional simplex fi note learning multiple instance examples fi fb crp investment strategy particular portfolio crpb redistributes wealth period proportion money th stock investment portfolio period price relatives increases wealth factor delta periods wealth achieved crpb sn delta 
commission consider extension model case fixed percentage commission 
simplicity assume commission charged purchases sales explain section assumed loss generality 
need specify investor target distribution wealth pays transaction costs period 
model investor pay transaction costs selling stock 
comparing best crp natural assume crp investor optimal trades rebalance portfolio pay transaction costs 
example suppose commission purchase 
say period investor stock stock investor wishes rebalance portfolio start period 
optimal investor sell stock cover upcoming transaction costs 
stock stock cash 
trades stock stock get stock pays transaction costs 
better naively tries rebalance stock sell worth stock pay transaction costs leaving stock 
analysis need know specifics optimal 
sake completeness look compute optimal costs 
say start dollar distributed rebalance optimally respect commission 
know largest amount rebalancing ff easy 
order achieve ff dollars distributed sell difference stock ffb buy 
optimality requires ff solution ff gamma ffb ffb gamma algorithmically solve equation determine interval ff checking critical points ff determined interval blum kalai reduces linear equation 
reasonable commission costs easily approximate optimal described paying transactions proportionally stock ff gamma gamma optimal rebalancing stock bought sold single rebalance 
line guarantees hold class crp investors optimally rebalance respect commission 
analysis natural properties optimal rebalancing 
costs paid changing distribution costs paid changing 
cost dollar changing distribution distribution gamma ff ffb ffc simply moving ff fraction money 

investment strategy invests initial fraction ff money investment strategy initial gamma ff money achieve ff times wealth plus gamma ff times wealth 
fact may better occasionally saving commission cost instance strategy says sell stock strategy says buy 
model assumes commission buying selling 
alternatively imagine having commissions buy sell buying selling experiments 
theoretical results hold buy sell dollar single stock transferred gamma sell buy gamma dollars different stock required property 
analysis commission section give simple analysis universal algorithm cover commission 
get bearings consider easier question 
suppose just want strategy competitive respect best single stock 
words want maximize worst case ratio wealth best stock 
case strategy simply divide money stocks sit 
times money best stock 
note deterministic strategy achieves expected wealth randomized strategy just places money random stock 
consider problem competing best crp 
cover universal portfolio algorithm similar 
splits money evenly lets sit crp strategies 
transfer money strategies 
likewise achieves expected wealth randomized note learning multiple instance examples strategy invests money random crp 
particular bookkeeping works follows definition 
universal universal portfolio algorithm universal time specified fi bs gamma gamma fi gamma gamma equal uniform distribution portfolios 
consider distribution 
form cover defines algorithm 
notes cover ordentlich wealth universal eb fi wealth crpb holdings portfolio represent actual amount wealth stock vector elements necessarily add 
equation seen easily rewrite definition period holdings universal eb fi holdings crp theorem cover ordentlich wealth universal wealth best crp gamma gamma gamma gamma markets stocks periods 
proof 
mentioned wealth universal simply expected wealth random crp 
idea argument portfolios near perform similarly large fraction portfolios near optimal portfolio 
say hindsight optimal crp particular market 
mean say near portfolios perform nearly gamma ff fi single period gain crpb gamma ff times large single period gain crpb gamma ff fraction distributed exactly compiled periods wealth crpb gamma ff wealth crpb prove theorem show sufficiently large volume portfolios sufficiently near easy compute set near portfolios shrunken simplex fffi translated origin gamma ff gamma gamma ff fig gamma fig ff gamma gamma fi blum kalai particular ff get ratio ff gamma gamma ff gamma gamma wealth universal compared best crp ff gamma gamma fraction portfolios perform gamma ff gamma best crp 
get better bound consider ff random variable defined gamma ff min fb equations wealth universal wealth best crp eb fi gamma ff ll compute quantity exactly starting application identity non negative random variables eb fi gamma ff fi gamma ff dx probability integral exactly gamma gamma making change variable repeating integration parts yields gamma gamma dx gamma gamma gamma dy gamma gamma fi fi fi fi gamma gamma gamma dy gamma gamma gamma dy gamma gamma gamma gamma dy gamma gamma 
gamma 
gamma dy gamma gamma 
randomized approximation implementation cover ordentlich space time requirements grow gamma universal algorithm simply weighted average 
suggests obvious randomized approximation 
choose portfolios uniformly random 
invest fraction note learning multiple instance examples money sit 
transfer 
best constant rebalanced portfolio achieves wealth times large universal algorithm chebyshev inequality guarantees gamma ffl ffi random portfolios probability gamma ffi approximation achieves wealth gamma ffl times large universal algorithm 
market commission determine hindsight optimal crp helmbold estimate worst case grows gamma experiments stock market data cover helmbold ratio various combinations stocks making approach especially efficient 
observation implement universal algorithm cover ordentlich 
case improvement grows worst gamma 
analysis commission section introduce slight modification universal universal competitive presence fixed commission 
importance section introducing new algorithm showing trivial extension universal theoretically competitive presence commission 
start th period universal computes weighted average weight particular crpb proportional wealth accumulated gamma periods gamma gamma 
universal similar 
start th period universal computes weighted average weight particular crpb proportional wealth accumulated gamma periods including commission costs gamma gamma 
formally definition 
universal universal portfolio commission algorithm time specified fi bs gamma gamma fi gamma gamma equal uniform distribution portfolios notice defining distribution wealth held day 
exact amount determined rebalancing optimally respect transaction costs 
notice universal algorithm maintains period distribution wealth algorithm splits money evenly independent random crp investors transfer money limit goes infinity 
zero commission case algorithm achieves expected wealth random crp 
universal algorithm may better lower commission costs due offsetting trades blum kalai way collection investors operating save commission occasionally trading 
application third property section 
theorem presence commission wealth universal wealth best crp gamma gamma gamma gamma markets stocks periods 
proof 
need modify equations previous proof 
discussed equation changes equality inequality wealth universal eb fi wealth crpb helps 
properties section gamma ff single period profit crp single period profit crp gamma ff gamma cff see note crpb starts gamma ff crpb wealth pay cost rebalance crpb pays additional cff fraction rebalance crpb terms stated properties third property implies crpb earns investor gamma ff times money begins distributed ends distributed words extra stock gamma ff hurt 
secondly note investor pays commission naive investor property 
second property implies commission cost changing cff involves moving ff fraction portfolio 
crpb worse gamma ff gamma cff times investor starts ends period distribution 
easy establish gamma cff gamma ff ff see lemma littlestone 
combining wealth crpb gamma ff wealth crpb previous proof replace final guarantee 
algorithm implemented randomized way universal 

semi constant rebalanced portfolios helmbold idea semi constant rebalanced portfolio proposed strategy presence transaction costs 
note learning multiple instance examples portfolio may rebalanced subset periods 
instance may prefer rebalance transaction costs outweigh benefits rebalancing 
show strategy guarantee exponential growth rate best hindsight commission 
cover ordentlich consider set market sequences length stocks period stock relatives ffl small ffl fx ffl ffl ng markets period stocks crashes stays 
clearly choose random element non anticipating investment strategy strategy knowledge achieve expected wealth ffl chosen hindsight better 
strategy initially divide money parts rebalance market switch 
market switches times strategy achieves wealth choose random market hindsight gamma gamma gamma hindsight strategy expected performance ffl gamma times large expected performance non anticipating strategy 

experiments nyse data section results show examples performance universal algorithm commission varied years nyse data 
thorough experiments see cover helmbold 
tried universal algorithm various transaction costs 
case commission commission performed sets stocks 
performance course better smaller transaction costs 
rebalancing beneficial especially larger commissions 
chose rebalance monthly 
practice way select rebalance choose period length gives best result past data 
aside algorithm helmbold usually outperformed universal algorithm theoretical guarantees performance commission 
shows achieved universal algorithm different sets stocks rebalancing occurs monthly 
compare best crp average value stocks 
commission charged purchases sales get amazing gains wealth blum kalai time days market exxon average stock universal optimal crp dollars wealth time days market alcoa average stock universal optimal crp 
performance universal different sets stocks 
compare best crp hindsight average stock price 
commission charged transactions rebalancing monthly 
corresponds model 
dollars wealth commission market vary commission average stock universal optimal crp dollars wealth commission market vary commission average stock universal optimal crp 
performance universal varying commission rates 
commission charged transactions 
notice large commissions better rebalancing monthly 
note learning multiple instance examples commission setting set stocks doing significantly better average 
shows stocks vary commission costs 
strategy investing best stock form crp best crp best stock course average stock 
commission costs get prohibitively large best crp exactly commission strategy investing single stock 
best crp performance plateaus 
universal algorithm hand initially divides money 
commission increases poorly 
time investments worse valuable 
result universal algorithm increasing fraction total holdings rebalance smaller percentage holdings 

application statistical language modeling analogies universal compression universal algorithm cover cover 
portfolio algorithm helmbold finding best mixture predictive models warmuth helmbold 
analogy stocks language models shows universal algorithm applied language models predictors 
analogy general kelly analogy kelly covers price relatives probabilities just 
statistical language model probability distribution sequences words 
language model generally represented conditional probability distribution word seen previous words jh gamma gamma gamma common way combine various language models linearly interpolate 
mixture language models example unigram model bigram model trigram model wjh wjh wjh wjh similar crp 
consider analogy language models stocks 
price relative ij corresponds conditional probability jh gamma portfolio corresponds daily mixture language models 
words feed probabilities portfolio algorithm price relatives predict word linear combination predictions models coefficients weights recommended portfolio algorithm 
nice property probability combined language model algorithm assigns sequence hn wn simply value holdings corresponding portfolio algorithm 
blum kalai log probability assigned observed sequence common measure language model performance 
leads algorithm 
language models pm sequence words hn wn universal invests money portfolios observing price relatives ij jh gamma universal language model predicts jh gamma ij jh gamma theorem sequence words hn wn language models log probability assigned hn universal algorithm log probability assigned hn best mixture minus gamma log follows directly observation wealth portfolio algorithm exactly probability assigns word sequence 
impressive shows mixture parameters learned fly line guarantees 
furthermore amortized cost gamma log bits word small overhead gets large 
helps explain relationship portfolios weighted average type algorithms making predictions expert advice cesa bianchi foster vohra haussler warmuth vovk vovk 
acknowledgments anonymous referees helpful comments 
research supported part nsf national young investigator ccr foundation nsf graduate fellowship 
cesa bianchi freund helmbold haussler schapire warmuth 
expert advice 
annual acm symposium theory computing pages 
cover 
universal portfolios 
math 
finance january 
cover ordentlich 
universal portfolios side information 
ieee transactions information theory march 
cover ordentlich 
cost achieving best portfolio hindsight 
department statistics technical report nsf stanford university 
cover 
universal data compression portfolio selection 
proceedings th ieee symposium foundations computer science pages oct 
davis norman 
portfolio selection transaction costs 
mathematics operations research november 
markowsky wegman 
learning probabilistic prediction functions 
proceedings th ieee symposium foundations computer science pages oct 
foster vohra 
randomization rule selecting forecasts 
operations research 
note learning multiple instance examples foster vohra 
regret line decision problem 
workshop may 
haussler kivinen warmuth 
tight worst case loss bounds predicting expert advice 
technical report ucsc crl university california santa cruz november 
helmbold schapire singer warmuth 
comparison new old algorithms mixture estimation problem 
proceedings eighth annual workshop computational learning theory pages 
helmbold schapire singer warmuth 
line portfolio selection multiplicative updates 
machine learning proceedings thirteenth international conference 
kelly 
new interpretation information rate 
bell sys 
tech 
journal 
kivinen warmuth 
exponentiated gradient versus gradient descent linear predictors 
technical report ucsc crl university california santa cruz june 
littlestone 
mistake bounds logarithmic linear algorithms 
technical report ucsc crl university california santa cruz 
ordentlich 
cover 
online portfolio selection 
proceedings th annual conference computational learning theory del italy 
vovk 
aggregating strategies 
proceedings third annual workshop computational learning theory pages 
morgan kaufmann 
vovk 
game prediction expert advice 
proceedings th annual conference computational learning theory pages 
acm press new york ny 
