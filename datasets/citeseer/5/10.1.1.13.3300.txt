journal artificial intelligence submitted published monte carlo methods tempo tracking rhythm quantization ali cemgil bert kappen nn geert university nijmegen nl ez nijmegen netherlands kun nl kun nl probabilistic generarive model timing deviations expressive music performance 
structure proposed model equivalent switching state space model 
switch variables correspond discrete note locations musical score 
continuous hidden variables denote tempo 
formulate known music recognition problems tempo tracking automatic transcription rhythm quantization filtering maximum posteriori map state estimation tasks 
ex act computation posterior features map state intractable model class introduce monte carlo methods integration optimization 
compare markov chain monte carlo mcmc methods gibbs sampling simulated annealing iterative improvement sequential monte carlo methods particle filters 
simulation results suggest better results sequential methods 
methods applied online batch scenarios tempo tracking transcription potentially useful number music applications adaptive automatic accompaniment score typesetting music information retrieval 

automatic music transcription refers extraction human readable interpretable description recording musical performance 
traditional music notation description lists pitch levels notes corresponding timestamps 
ideally recover score directly audio signal 
representation surface structure music useful music information retrieval music ir content description musical material large audio databases 
operating sampled audio data polyphonic acoustical signals extraction score description challenging auditory scene analysis task gardner scheirer 
focus subproblem music ir assume exact timing information notes available example stream midi events digital keyboard 
model tempo tracking transcription midi music representation useful broad spectrum applications 
example automatic score typesetting 
musical instruments digital interface 
standard communication protocol especially designed digital instruments keyboards 
time key pressed midi keyboard generates short message containing pitch key velocity 
computer tag received message timestamp real time processing recording file 
ai access foundation morgan kaufmann publishers 
rights reserved 
cemgil kappen musical analog word processing 
score typesetting applications provide means automatic generation conventional music notation midi data 
conventional music notation onset time note implicitly represented cumulative sum durations previous notes 
durations encoded simple rational numbers quarter note eighth note consequently events music placed discrete grid 
basic task midi transcription associate onset times discrete grid locations quantization 
music performed mechanical precision identification correct association 
due fact musicians introduce intentional unintentional deviations mechanical prescription 
example timing events deliberately delayed pushed 
tempo fluctuate slowing accelerating 
fact deviations natural aspects expressive performance absence music tends sound dull mechanical 
hand deviations accounted transcription resulting scores poor quality 
robust fast quantization tempo tracking important requirement interactive performance systems applications listen performer generating accompaniment improvisation real time raphael thom 
models useful systematic study characterization expressive timing principled analysis existing performance data 
theoretical perspective simultaneous quantization tempo tracking chicken egg problem quantization depends intended tempo interpretation tempo interpretation depends quantization 
apparently human listeners resolve ambiguity cases effort 
persons musical training able determine beat tempo rapidly 
unclear precisely constitutes tempo relates perception beat structure pitch style music tempo perceptual construct directly measured performance 
goal understanding tempo perception stimulated significant body research psychological computational modeling aspects tempo tracking beat induction see desain honing large jones 
papers assume events onset list 
attempts deal directly audio signal goto muraoka scheirer dixon 
class tempo tracking models developed context interactive performance systems score 
models prior knowledge form annotated score dannenberg puckette 
raphael lb demonstrated interactive real time system follows solo player schedules accompaniment events player tempo interpretation 
tempo tracking crucial quantization uniquely quantize onsets having estimate tempo beat 
converse quantization help identification correct tempo interpretation noted desain honing 
defines correct tempo results simpler quantization 
schema fully implemented practice due computational complexity obtaining perceptually plausible quantization 
monte methods fol tempo rhythm quantization quantization methods proposed literature estimate tempo simple heuristics longuet higgins pressing lawrence assume tempo known constant desain honing goto asoh 
approach transcription tempo tracking probabilistic bayesian modeling perspective 
cemgil 
introduced probabilistic approach perceptually realistic quantization 
assumed tempo known estimated external procedure 
tempo tracking introduced kalman filter model cemgil kappen desain honing 
approach modeled tempo smoothly varying hidden state variable stochastic dynamical system 
current integrate quantization tempo tracking 
basically model balances score complexity versus smoothness tempo deviations 
correct tempo interpretation results simple quantization correct quantization results smooth tempo fluctuation 
essentially similar model proposed raphael 
raphael uses inference technique applies small models continuous hidden state dimensional 
severely restricts models consider 
current survey general widely state ofthe art techniques inference 
outline follows section propose probabilistic model timing deviations expressive music performance 
model define tempo tracking quantization inference posterior quantities 
turn model switching state space model computation exact probabilities intractable 
section introduce approximation techniques simulation markov chain monte carlo mcmc sequential monte carlo smc doucet de freitas gordon andrieu de freitas doucet jordan 
approaches provide flexible powerful inference methods successfully applied di verse fields applied sciences robotics fox burgard thrun aircraft tracking gordon salmond smith computer vision isard blake econometrics tanizaki 
simulation results 

model assume recording exact onset times key presses performance 
denote observed onset times yl yk 
yk compactly yo access musical notation piece know initial tempo started performance 
allowed freely change tempo introduce expression 
onset time information yo wish find score track tempo fluctuations zo refine meaning 
problem apparently ill posed 
allowed change tempo arbitrarily possible assign correct score performance 
words performance yo represented suitable combination arbitrary score arbitrary tempo trajectory 
fortunately bayes theorem provides elegant principled guideline formulate problem 
onsets yo best score tempo trajectory zo derived posterior distribution cemgil kappen ffl yo yo ki yi zo ffl zo quantity proportional product likelihood term yo ki yi prior term ffl 
rhythm transcription tempo tracking prior encodes background knowledge nature musical scores tempo deviations 
example construct prior prefers simple scores smooth tempo variations 
likelihood term relates tempo score actual observed onset times 
respect likelihood model short time expressive timing deviations motor errors introduced performer 
locations trajectory graphical model square oval nodes correspond discrete continuous variables respectively 
text refer continuous hidden variables rk ak dependence deterministic 
ff hidden onsets observed 
score prior define score introduce sequence quantization locations quantization location specifies score time th onset 
ff denote interval quantization locations consecutive onsets ck example consider conventional music notation jq encodes score corresponding quantization locations 
monte methods fol tempo rhythm quantization simple way defining prior distribution quantization locations ck specifying table probabilities ck mod fraction 
example wish allow scores sixteenth notes triplets define table probabilities states mod 
technically resulting prior periodic improper principle unbounded normalize distribution 
number states mod large may difficult estimate parameters prior reliably 
situations propose generic prior follows define probability th onset gets quantized location ck exp number significant digits binary expansion mod 
example positive parameter penalize quantization locations require bits represented 
assuming quantization locations onsets independent priori increasing ck prior probability sequence quantization locations oc exp 
assume 
check prior prefers simpler notations vj generalize prior subdivisions triplets appendix formally distribution prior score ffl ffl relationship ffl deterministic degenerate ffl exp tempted specify prior directly get rid entirely 
simpler approach easy devise realistic priors 
example consider sequence note durations 
assuming factorized prior ff penalizes short note durations rhythm relatively high probability quite uncommon conventional music 
tempo prior represent tempo terms inverse period denote example tempo beats minute bpm corresponds seconds 
onset tempo changes unknown amount assume change iid af 
assume order gauss markov process tempo hk 
denote scalar multivariate gaussian distribution mean vector covariance matrix jv rpi exp 
cemgil kappen eq 
defines distribution tempo sequences tempo sequence ideal intended time rk onset tk tk hk noise term rk denotes amount accentuation deliberately playing note ahead back time causing tempo changed 
assume rk iv qr 
ideal onsets observed noisy onsets related yk noise term models small scale expressive deviations motor errors timing individual notes 
assume gaussian distribution parameterized 
initial tempo distribution specifies range reasonable gaussian broad variance 
assume uninformative fiat prior 
conditional independence structure graphical model 
table shows possible realization model 
note model particular instance known switching state space model known conditionally linear dynamical system jump markov linear system switching kalman filter see bar shalom li doucet andrieu murphy 


table possible realization model 
clarity assume 
sections refer zk refer tempo trajectory 
definition compactly represent eq 
eq 
extensions zk zk possible extensions basic parameterization 
example represent period logarithmic scale 
warping ensures positivity perceptually plausible promotes equal relative changes tempo absolute scale cemgil :10.1.1.20.3876
resulting model monte methods fol tempo rhythm quantization nonlinear approximated fairly extended kalman filter li 
simple random walk model tempo fluctuations eq 
realistic 
expect tempo deviations structured smoother 
dynamical system framework smooth deviations modeled increasing dimensionality include higher order inertia variables cemgil :10.1.1.20.3876:10.1.1.20.3876
example consider model hl hd 
hd choose particular parameterization wish interpret slowly varying average tempo temporary change tempo model useful situations performer fluctuates constant tempo random walk model sufficient case forgets initial values additional state variables 
ad act additional memory elements choosing parameter matrix noise covariance matrix model rich range temporal structures expressive timing deviations score prior improved richer model example allow different time signatures alternative rhythmic subdivisions introduce additional hidden variables see cemgil 
appendix markov chain raphael 
potentially extensions easier capture additional structure musical rhythm weak positions followed strong positions hand number model parameters rapidly increases cautious order avoid overfitting score typesetting need quantize note durations associate note offsets quantization locations simple way accomplishing define indicator sequence identifies yk onset offset 
redefine observation model ul af af rag rag observation noise associated offsets typical model rag rag cx offsets effect tempo process observed extension requires just simple lookup principle allow arbitrary long intervals onsets ffk drawn infinite discrete set 
subsequent derivations assume number possible intervals fixed priori estimate observation virtually infinite number choices ff zero probability easy identify candidates significant probability mass conceptually listed extensions easy incorporate model introduces fundamental computational difficulty basic problems quantization tempo tracking cemgil kappen problem definition model define rhythm transcription quantization map state estimation problem ffl kp ffl zo tempo tracking filtering problem argmax ffl zk quantization problem smoothing problem wish find score onsets performance 
useful offline applications score typesetting 
real time interaction need online estimate tempo beat zk 
information carried forth filtering density eq 

definition best tempo maximum somewhat arbitrary 
depending requirements application features filtering density 
example variance ei zk estimate amount confidence tempo interpretation ffl estimate score tempo pair far 
unfortunately quantities eq 
eq 
intractable due explosion number mixture components required represent exact posterior step see 
example calculate exact posterior eq 
need evaluate expression kp yo ffl zo ffl ffl yo ffl normalization constant yo ei yo ffl 
trajectory integral zo computed stepwise kalman filter see appendix 
find map state eq 
need evaluate yo independently exponentially trajectories 
consequently quantization problem eq 
solved approximately 
accurate approximation wish exploit inherent independence structure exact posterior 
unfortunately integrated coupled general ffl possess conditional independence structure markov chain facilitate efficient calculation 
consequently resort numerical approximation techniques 

monte carlo simulation consider high dimensional probability distribution monte methods fol tempo rhythm quantization 



example demonstrating explosion number components represent exact posterior 
ellipses denote conditional marginals rk yo 
show period logarithmic scale log 
toy example assume score consists notes length 
start unimodal posterior ro yo gaussian centered 
assume score consist quarter notes 
predictive distribution rl bimodal modes centered respectively shown dashed contour line 
observation yl observed shown dashed vertical line predictive distribution updated yield sl ic 
numbers denote respective log posterior weight mixture component 
predictive distribution lc step modes component ic 
number components grows exponentially cemgil kappen normalization constant known evaluated particular suppose want estimate expectation function distribution denoted dxf mean 
intractable integration approxi mated average find points 
generated independently sampling shown approaches infinity approximation exact 
generating independent samples difficult task high dimen sions usually easier generate dependent samples generate making 
somewhat surprising correlated provided ergodicity conditions satisfied eq 
remains valid estimated quantities converge true values number samples goes infinity 
sequence dependent samples generated markov chain stationary distribution 
chain defined collection transition proba bilities transition kernel lx 
definition kernel implicit sense defines procedure generate metropolis algorithm metropolis ulam metropolis rosenbluth rosenbluth teller teller provides simple way defining ergodic kernel desired stationary distribution 
suppose sample 
candidate generated sampling symmetric proposal distribution xl example gaussian centered 
candidate accepted sample 
lower probability accepted probability 
algorithm initialized generating sample arbitrary proposal distribution 
transition kernel hard assess time required converge stationary distribution practice run simulation large number samples obtained see roberts rosenthal 
choice proposal distribution critical 
poor choice may lead rejection candidates resulting slow convergence stationary distribution 
large class probability models full posterior intractable efficiently compute marginals form xl 
xk xk xk exactly 
case apply specialized markov chain monte carlo mcmc algorithm gibbs sampler 

initialize sampling proposal xl 
fori monte methods fol tempo rhythm quantization sample xk contrast metropolis algorithm new candidate vector gibbs sampler uses exact marginal proposal distribution 
step sampler updates coordinate current state xk new candidate guaranteed accepted 
note principle don need sample sequentially choose randomly provided slice visited equally limit 
deterministic scan algorithm 
provides important time savings type models consider 
simulated annealing iterative improvement shift focus sampling map state estimation 
principle samples generated sampling algorithm metropolis hastings gibbs estimate map state 
posterior concentrated map state sampler may visit samples obtained stationary distribution 
case problem simply reformulated sample distribution concentrated local maxima ofp 
class distributions pp sequence exponents pl called cooling schedule annealing schedule owing inverse temperature interpretation pj statistical mechanics name simulated annealing sa aarts van laarhoven 
pj cx sufficiently slowly cascade mcmc samplers stationary distribution pp guaranteed limit converge global maximum ofp 
unfortunately convergence result hold cooling schedule go slowly fact logarithmically infinity 
practice faster cooling schedules employed 
iterative improvement ii aarts van laarhoven heuristic simulated annealing algorithm fast cooling schedule 
fact pj cx eventual advantage greedy algorithm converges iterations local maximum 
restarting times different initial configurations hopes find different local maxima eventually visit map state 
practice ii heuristic may find better solutions sa limited computation time 
implementation point view trivial convert mcmc code sa ii code 
example consider gibbs sampler 
implement sa need construct cascade gibbs samplers stationary distribution exact time slice marginal distribution sa just samples actual temperature marginal ix raised power pj 
switching state space model map estimation solve rhythm quantization problem need calculate map state posterior eq 
ffl oc ffl kp yo ffl zo cemgil kappen combinatorial optimization problem seek maximum function ly associates number discrete configurations feasible visit exponentially configurations find maximizing configuration resort stochastic search algorithms simulated annealing sa iterative improvement ii 
due strong relationship gibbs sampler sa ii review gibbs sampler switching state space model 
important observation conditioned model linear state space model integration zo computed analytically kalman filtering equations 
consequently sample integrate analytical marginalization called rao blackwellization casella robert improves efficiency sampler see doucet de freitas murphy russell 
suppose switch variable distinct states wish generate samples trajectories 
naive implementation gibbs sampler requires step run kalman filter times observation sequence yo compute proposal fk result algorithm time complexity nk prohibitively slow large 
carter kohn proposed time efficient deterministic scan gibbs sampler circumvents need run kalman filtering equations step observation sequence yo see doucet andrieu murphy 
method observation proposal distribution factorized product terms depend past observations observations contribution computed priori backward filtering pass 
subsequently proposal computed samples generated forward pass 
sampling distribution ly yl yo term proportional joint prior second term decomposed yo zk ffl yo zk iyi iz ffk yo terms unnormalized gaussian potentials integral evaluated analytically 
term yk iz unnormalized gaussian potential computed backwards filtering 
second term just filtering distribution scaled likelihood computed forward filtering 
outline algorithm see appendix details 

initialize sampling proposal ffl 
fork monte methods fol tempo rhythm quantization compute yk ff compute proposal ffk ffk yo zk yk sample ffi kl resulting algorithm time complexity important saving terms time 
space complexity increases expectations computed backward pass need stored 
step gibbs sampler generates sample single time slice certain types sticky models dependence ffk ffk strong sampler may get stuck configuration moving rarely 
due fact singleton flips low probability configurations due strong dependence adjacent time slices 
example consider quantization model configurations ffk ffk 

updating single slice may difficult move configurations 
consider intermediate configuration 

duration ffk ffk increases quantization locations ck shifted 
may correspond score heavily penalized prior blocking path 
allow sampler move freely allow global jumps sample slices jointly 
case proposal distribution takes form ffk ffk lp yo zk yk similar slice case terms integral unnormalized gaussian potentials zk representing contribution past observations 
ffk states resulting time complexity generating samples practice kept small 
remedy metropolis hastings algorithm heuristic proposal distribution yo circumvent exact cal obvious construct shortcoming gibbs sampler related mcmc methods algorithm standard form inherently offline need access observations yo start simulation 
certain applications automatic score typesetting batch algorithm feasible 
scenarios require real time interaction interactive music performance tempo tracking online methods 
sequential monte carlo sequential monte carlo particle filtering powerful alternative mcmc generating samples target posterior distribution 
smc especially suitable application dynamical systems observations arrive sequentially 
cemgil kappen basic idea smc represent posterior xo time extend representation possibly weighted set samples lx rt observation available time common practice importance sampling 
importance sampling consider high dimensional probability distribution unknown normalization constant 
suppose proposal distribution close high probability regions distributions fairly overlap 
generate independent samples particles proposal zi approximate zs zi importance weights 
interpret tion factors compensate fact sampled incorrect distri bution 
approximation eq estimate expectations weighted averages yv normalized importance weights 
sequential importance sampling wish apply importance sampling dynamical model xo 
principle naively apply standard importance sampling arbitrary proposal distribution 
finding proposal distribution hard 
key idea sequential importance sampling sequential construction proposal distribution possibly available observations xo yo monte methods fol tempo rhythm quantization sequentially constructed proposal distribution compute importance weight recursively yk yo zo zo xi yo xi 
yo wi xo ly sequential update schema potentially accurate naive importance sampling step generate particle fairly accurate proposal distribution takes current observation account 
natural choice proposal distribution filtering distribution ix xk case weight update rule eq 
simplifies wi fact provided proposal distribution constructed sequentially past sampled trajectories updated filtering distribution optimal choice sense minimizing variance importance weights doucet godsill andrieu 
note eq 
identical proposal distribution gibbs sampling eq 
introduce discount factors wk compensate sampling wrong distribution 
selection unfortunately sequential importance sampling may degenerate fact shown variance increases practice iterations algorithm particle probability mass computation time wasted updating particles negligible probability 
avoid undesired degeneracy problem heuristic approaches proposed literature 
basic idea duplicate discard particles normalized importance weights 
selection procedure deterministic stochastic 
deterministic selection usually greedy chooses particles highest importance weights 
stochastic case called resampling particles drawn probability proportional importance weight 
recall normalized weights tts 
interpreted discrete distribution particle labels 
smc switching state space model sis algorithm directly applied switching state space model sampling directly ff 
approximation quite poor cemgil kappen outline algorithm 
ellipses correspond zk ffi yo 
vertical dotted lines denote observations yk 
particles low likelihood discarded 
parents 
conditionals step surviving particles linked high dimensional 
particles may needed accurately represent posterior 
similar mcmc methods introduced previous section efficiency improved analytically integrating sampling fact form rao blackwellization reported give superior results compared standard particle filtering sampled jointly chen liu doucet 
improvement surprising importance sampling performs best sampled space low dimensional 
algorithm intuitive interpretation terms randomized breadth tree search procedure new step expand kernels obtain new kernels 
consequently avoid explosion number branches select branches proportional likelihood see 
derivation technical details algorithm appendix tree search interpretation immediately suggests deterministic version gorithm selects replacement branches highest weight 
refer method greedy filter gf 
method known split track filter chen liu closely related multiple hypothesis tracking mht bar shalom fortmann 
problem greedy selection schema gf loss particle diversity 
particles initialized different locations different initial mainly due discrete nature state space particles identical steps consequently results improved increasing number particles particles say real time application gf may viable choice 
monte methods fol tempo rhythm quantization hypothetical situation particles optimal 
obtain eventually higher likelihood configuration interchanging particles 
smc estimation map trajectory mcmc smc sampling method 
comments section eventual suboptimality estimating map trajectory particles arg max ff apply 
hypothetical situation shown 
obvious solution employ sa trick raise proposal distribution power fk proposal peaked time slice 
consequently particles identical time algorithm eventually degenerates greedy filtering 
algorithm estimating map trajectory set smc samples proposed literature godsill doucet west 
algorithm relies observation particles 
sampled forward pass left discrete distribution defined discrete support xi xk xk denotes support filtering distribution time cartesian product sets 
formally set distinct samples time ji distribution xl markovian original state transition model markovian posterior represented exactly xi consequently find best map trajectory arg maxp xl algorithm analogous viterbi algorithm hidden markov models rabiner :10.1.1.131.2084
idea carry directly case applies rao blackwellization 
general subset hidden variables integrated time slices posterior fl coupled fi fk ji 
employ chain approximation run viterbi cemgil kappen guarantee find arg maxp fl 
hand drawn discrete set particles identical usually small cardinality compared number particles consequently feasible employ sa ii reduced state space possibly proposal distribution extends time slices 
slight abuse notation symbol xk set general element argument density means xk cemgil kappen practice finding map solution particle set propose find best trajectory kl apply iterative improvement starting initial configuration 
simulations compared inference methods terms quality solution exe cution time 
tests carried artificial real data 
true notation true measure quality solution terms log likelihood difference log yo ffl true true yo il ffl terms edit distance true edit distance gives simply number notes quantized wrongly 
artificial data clave pattern synthetic example repeating son clave pattern 


fluctuating tempo 
repeat pattern times obtain score 
rhythms usually hard transcribe difficult track tempo experienced human listeners 
onsets absent prominent beat locations standard beat tracking algorithms usually loose track 
score generated observation sequences sampling tempo model eq 

parameterized observation noise variance ff qa qb 
formulation variance depends length interval consecutive onsets longer notes score allow tempo timing fluctuation 
tests clave example prior model reflects true source statistics generic prior model defined section 
example cases sampled score clave pattern 
due generic prior capture exact source statistics relatively broad noise model map trajectory ff identical true original clave pattern 
th example defined ground truth ffl highest likelihood solution sampling technique independent run 
definition ground truth introduces bias exercise realistic discriminative various methods compared dataset essentially shorter sequences exact map 
noise covariance parameters qa qb 
identity matrix 
monte methods fol tempo rhythm quantization trajectory computed exhaustive enumeration 
wish stress main aim simulations synthetic dataset compare effectiveness different inference techniques postpone actual test model simulations real data 
tested mcmc methods gibbs sampling gibbs simulated annealing sa iterative improvement ii time slice optimal proposal sweeps 
onset yk optimal proposal computed fixed set 

shows typical run mcmc 
similarly implemented smc particles 
selection schema random drawing optimal proposal computed time slices 
special case greedy filtering gf selected switch maximum probability 
example run shown 
observe average smc results superior mcmc 
observe increasing number sweeps mcmc improve solution significantly 
hand increasing number particles improve quality smc solution monotonically 
results suggest sampling time slices jointly exception sa big effect 
gf outperforms particle filter particles draws randomly proposal 
suggests pf small number particles may desirable hybrid selection schema selects particle maximum weight automatically randomly selects remaining 
compare inference methods terms execution time quality solutions measured edit distance 
suggests slice proposal justified 
comparable computational effort smc tends outperform mcmc methods 
real data beatles evaluate performance model polyphonic piano performances 
invited play beatles songs michelle yesterday 
pieces relatively simple rhythmic structure ample opportunity add expressiveness fluctuating tempo 
original score shown 
subjects different musical edu cation background professional jazz players professional classical performers amateur classical 
arrangement played tempo conditions repetitions tempo condition 
tempo conditions normal slow fast tempo musically realistic range judgment performer 
details reported cemgil :10.1.1.20.3876
preprocessing original performances contained errors missing notes additional notes original score 
errors eliminated matching tech nique desain fz honing dynamical programming 
visual inspection resulting dataset suggested matching errors interpret outliers 
remove outliers extended quantization model state switching observation model discrete space consists ff 
simple cemgil kappen particle filtering clave example particles 
circle denotes mean cu cu log 
diameter particle proportional normalized importance weight generation 
denote true pairs modulated tempo deterministically cu sin rc observation noise variance 
monte carlo methods tempo tracking rhythm quantization lo gibbs sweep 
gibbs 
sa ii gf desired typical runs gibbs sampling simulated annealing sa iterative improvement tt clave example 
algorithms initialized greedy filter solution 
annealing schedule sa linear pl proceeding deterministically cx 
sa tt converge configuration reinitialize particle filter particle draws randomly proportional optimal proposal 
sharp drops likelihood correspond 
see sweep greedy filter solution slightly improved tt 
consequently sampler 
likelihood sa drops considerably mainly due high temperature consequently stabilizes suboptimal solution 
gibbs sampler explore support posterior able visit map state run 
cemgil kappen lo gibbs ii gf slice slice likelihood difference gibbs gf pf edit distance 
mcmc results sweeps axe omit ted 
comparison inference methods clave data 
squares ovals denote median vertical bars correspond interval quantiles 
tested mcmc methods gibbs sa ii independently shown left right 
smc methods greedy filter gf particle filter pf 
tested filters particles independently shown left right 
monte carlo methods tempo tracking rhythm quantization lu sa sa pf 
pf pf 
gf 
gi pf pf 
pf flops log scale comparison execution time terms floating point operations 
methods number denotes number slices optimal proposal distribution 
particle filter pf second number denotes number particles 
dashed lines merely connect related methods 
outlier detection mechanism switch ik binary indicator variable specifying onset yk outlier 
assume indicators independent priori uniform prior 
observation model rik score known unknown discrete quantities indicators io greedy filtering followed iterative improvement find map state indicators io eliminated outliers studies 
performances outliers notes 
resulting dataset downloaded url www 
san 
kun 
nl cemgil 
parameter estimation trained tempo tracking models different dimensionality denotes dimension hidden variable models transition matrix form eq 

true score known quantization location onset yk clamp discrete variables model 
consequently estimate observation noise variance transition noise variance transition matrix coefficients data 
optimized parameters expectation maximization em linear dynamical systems shumway stoffer ghahramani hinton perfor 
took ri ri 
cemgil kappen yesterday training data 
similarly score prior parameters estimated frequency counts score yesterday 
tests carried michelle 
results show result typesetting performance tempo tracking 
due fluctuations tempo quality automatically generated score poor 
quality significantly improved model 
shows tempo tracking examples michelle dataset different background training 
observe cases results satisfactory 
give summary test results michelle data terms loglikelihood edit distance function model order number particles inference 
ll shows median likelihood test data increasing model order 
suggests higher order filter able capture structure expressive timing 
data see somewhat monotonic increase likelihood solutions particles 
edit distance original score estimates ll 
pieces arranged piano due onsets associated quantization location 
consequently rue original score effectively zero 
cases typically corresponding inter onset interval yk yk small correct quantization ffk identified tempo estimate completely wrong 
consequence edit distance remains small 
task slightly challenging exclude onsets rue edit distance calculation 
observe extra prediction ability obtained higher order model directly translate better transcription 
errors models 
hand variance edit distance higher order models smaller 
suggests higher order models tend robust divergence original tempo track 

discussion switching state space model joint rhythm quantization tempo tracking 
model describes rhythmic structure musical pieces prior distribution quantization locations 
representation easy construct generic prior prefers simpler notations learn parameters data set 
prior quantization locations translates non markovian distribution score timing deviations introduced performers tempo fluctuation motor errors modeled independent gaussian noise sources 
performer specific timing preferences captured parameters distributions 
model formulated rhythm quantization map state estimation problem tempo tracking filtering problem 
introduced markov chain 
maximum likelihood parameters model dimension 
prior 
remaining set 
monte carlo methods tempo tracking rhythm quantization michelle original score typesetting processing model 
due fluctuations tempo quality score poor 
typesetting tempo tracking quantization particle filter 
results typesetting scores 
cemgil kappen professional jazz amateur professional classical 
filter temporarily loses track 
tracking twice rate original tempo 
examples filtered estimates ak beatles data set 
circles original denote mean pl denote mean yo obtained mc 
interesting note different timing characteristics 
example classical uses lot tempo fluctuation professional jazz 
jazz slows dramatically piece amateur constantly accelerates 
tracking quantization results satisfactory 
filter loses track notes dramatically slows 
filter loses track catches 
filter jumps metrical level twice fast original performance 
translate duplication note durations 
monte carlo methods tempo tracking rhythm quantization oo model dimension likelihood 
dashed horizontal line shows median likelihood original score michelle model 
model dimension edit distance smc results test data performances michelle 
model show results obtained particles 
show median best particle denote median applying iterative improvement 
vertical bars correspond interval quantiles 
cemgil kappen monte carlo mcmc sequential monte carlo smc approximate respective distributions 
quantization model propose similar raphael 
transcription raphael proposes compute zo uses message tion scheme essentially analogous rao blackwellized particle filtering 
prevent number kernels explosion uses deterministic selection method called thinning 
advantage raphael approach joint map trajectory computed exactly provided continuous hidden state dimensional model parameter regime keeps number propagated gaussian kernels limited small thinning eliminate kernels 
disadvantage number kernels varies depending features filtering distribution difficult implement scheme real time 
importantly simple extensions increasing dimensionality introducing nonlinearities transition model render approach quickly invalid 
contrast monte carlo methods provide generic inference technique allow great flexibility models employ 
tested method challenging artificial problem clave example 
smc outperformed mcmc terms quality solutions measured terms likelihood edit distance 
propose smc problems 
finding map quantization propose apply iterative improvement ii smc solution reduced configuration space 
correct choice score prior important performance system 
music pieces tend certain vocabulary certain motives times piece 
rhythmic structure depends musical genre composer 
difficult devise general prior model large spectrum styles 
genre expect simple prior capture structure sufficient transcription 
example beatles dataset estimated prior counting original score yesterday 
statistics fairly close michelle 
results test set partially accounted fact pieces similar structure 
conditioned score tempo tracking model linear dynamical system 
optimized tempo models em varied dimension tempo variables test results suggest increasing dimensionality improves likelihood 
increase likelihood dataset translate directly better quantization results measured edit distance 
observe models trained training data fail consistently subjects especially professional classical 
interestingly train custom models specifically optimized subjects improve results significantly test cases 
observation suggests kind multimodality parameter space modes correspond different performer regimes 
kalman filter able capture structure expressive timing deviations 
averaged subjects details tend wiped suggested quantization results vary significantly models different dimensions 
monte carlo methods tempo tracking rhythm quantization related problem edit distance measure average model likelihood desired score original score michelle may lower likelihood solution inference method 
cases increasing likelihood may decrease edit distance 
test cases observe solutions higher likelihood original notation notes wrong 
cases tempo trajectory solution correspond half twice original tempo consequently note durations halved doubled notes notated half notes half notes quarters 
considering fact model self initializing tempo assume broad uncertainty priori results satisfactory practical application perspective 
potential shortcoming model takes timing information onsets account 
reality believe pitch melodic grouping articulation duration note onsets offsets dynamics louder softer provide useful additional information tempo tracking quantization 
current model assumes onsets equally relevant estimation 
probably general true example kick drum provide information tempo flute 
hand simulations suggest limited model obtain quite satisfactory results simple piano music 
somewhat surprising smc basically method samples filtering distribution outperforms mcmc method sa specifically designed finding map solution observations 
intuitive explanation relatively poorer mcmc results mcmc proceeds proposing global solution tries improve local adjustments 
human transcriber hand listen shorter segments music gradually write score 
respect sequential update schema smc natural rhythm transcription problem 
similar results smc outperforms mcmc reported literature called growth monte carlo generating self avoiding random walks liu chen 
large class dynamical prob lems including rhythm transcription sequential updating preferable batch methods 
note theoretical convergence results sa require logarithmic cooling schedule 
cooling schedule fast meet requirement careful interpreting poor performance negative sa result 
maintain richer neighborhood structure configuration space block proposal distribution slower cooling schedule sa results improved significantly 
mcmc methods modified operate sequentially example see pasula russell peres 
family inference methods switching state space models rely deterministic approximate methods 
family includes variational approximations ghahramani hinton expectation propagation heskes 
remains interesting open question deterministic approximation methods provide advantage terms computation time accuracy particular quantization problem switching state space models 
potential application deterministic approximation techniques mcmc schema designing proposal distributions extend time slices 
schema circumvent burden computing optimal proposal distribution exhaustively allowing global moves sampler 
cemgil kappen current results suggest superiority smc problem 
important advantage smc essentially anytime algorithm faster computer increase number particles additional computational power 
computing time short decrease number samples 
features smc attractive real time applications easily tune quality computation time tradeoff 
motivated practical advantages smc positive simulation results implemented prototype smc method real time 
current computer system mhz laptop pc running ms windows allows particles delay busy passages 
expect significantly improve efficiency translating matlab constructs native code 
method tempo tracker automatic interactive performance system quantizer automatic score typesetting program 
acknowledgments research supported technology foundation stw applied science division nwo technology programme dutch ministry economic affairs 
associate editor daphne koller anonymous reviewers comments helped significantly improve article 
ashley peter desain honing paul suggestions contributions data collection 
gratefully acknowledge northwestern university nijmegen university excellent performances 
appendix generic prior model quantization locations traditional western music notation note durations generated recursive subdivisions starting note convenient generate quantization locations similar fashion regular subdivisions 
decompose quantization location integer part fraction cj mod 
defining prior fraction 
set fractions generated recursively subdividing unit interval 
si denote subdivision schema si finite sequence arbitrary integers usually small primes 
choice particular depends mainly assumed time signature 
generate set fractions follows iteration divide unit interval sl intervals equal length append endpoints resulting intervals set iteration subdivide intervals generated previous iteration si equal parts append resulting endpoints note procedure generates regular grid neighboring grid points distance li si 
denote iteration number endpoint inserted depth respect 
number denoted 
easy see definition coincides number significant bits represent mod 
example consider subdivision 
iteration unit interval divided sl equal intervals resulting endpoints monte carlo methods tempo tracking rhythm quantization inserted depths 
second iteration new endpoints inserted assigned depth 
define distribution quantization locations exp ad ck mod wish consider time signatures different subdivision schemata interpret hidden indicator variable define prior 
case prior multinomial mixture 
details empirical results justifying choice see cemgil 
appendix derivation pass kalman filtering equations consider gaussian potential mean covariance defined domain indexed 
zi exp dx potential normalized 
exponent eq 
quadratic form potential written exp lu logz htk lh denote potential canonical form notation refer canonical parameters 
consider gaussian potential xl canonical representation xx models variables interacting find desired quantities applying basic operations defined gaussian potentials 
multiplication conditioning marginalization 
multiplication gaussian potentials index set follows directly eq 
ha ka ga hb ha ka ga gb domain ba overlaps subset potentials extended appropriate domain appending zeros corresponding dimensions 
cemgil kappen marginalization operation xl xl hi klk gt lk rl xh initial constant term qs xx 
conditioning operation xl hi gl 
kalman filter recursions suppose linear model subject noise zk yk constant matrices af af model encodes joint distribution zl yl zl zl yl ttp rpl ic iv log ctr ctr log rl yl yl forward message passing suppose wish compute likelihood yl 
za zl zl compute integral starting zl proceeding 
define forward messages 
fz dz monte carlo methods tempo tracking rhythm quantization gl ckl yk lz fz gk kl forward recursion lo wp tp hl ki hl ctr ik ctr gkl log ll hk kk gk hk kk log xml gk ll gkl log backward message passing compute likelihood starting yg 
yl case backward propagation summarized klk tk kl recursion lk ki ik lk lk ki gl lk ct ik hlk ki ctr klk cemgil kappen yk klk mi kalman smoothing suppose wish find distribution particular observations yl just combine forward backward messages yk zk yl yl zk yk cl hlk klk appendix rao blackwellized smc switching state space model 
index particles 
index states 
denote unnormalized filtering distribution time yo zk observed gaussian potential parameters wk jf note normalization constant isthe similarly denote filtered distribution slice conditioned ff lp denote normalization constant li 
li 
joint proposal li ff ff ffl outline algorithm initialize 

qs monte carlo methods tempo tracking rhythm quantization fork fori compute li eq 
gk 
select tuple qk tl note procedure built resampling schema eliminating particles small importance weight 
sampling jointly equivalent sampling single resampling weights check optimal proposal distribution eq weight step yo aarts van laarhoven 

statistical cooling general approach combinatorial optimization problems 
philips journal research 


kant critique pure quantification 
proceedings international computer music conference pp 
aarhus denmark 
international computer music association 
andrieu de freitas doucet jordan 

mcmc machine learning 
machine learning appear 
bar shalom fortmann 

tracking data association 
academic press 
bar shalom li 

estimation tracking principles techniques software 
artech house boston 


midi traditional musical notation 
proceedings aaai workshop artificial intelligence music formal models composition performance analysis austin texas 
carter kohn 

markov chain monte carlo conditionally gaussian state space models 
biometrika 
casella robert 

rao blackwellisation sampling schemas 
biometrika 
cemgil desain kappen 

rhythm quantization transcription 
computer music journal 
cemgil kappen 

rhythm quantization tempo tracking sequential monte carlo 
dietterich becker ghahramani 
eds advances neural information processing systems 
mit press 
cemgil kappen desain honing 

tempo tracking tempogram representation kalman filtering 
journal new music research 
chen liu 

mixture kalman filters 
statist 
soc 
cemgil kappen dannenberg 

line algorithm real time accompaniment 
proceedings icmc pp 
san francisco 
desain honing 

quantization musical time connectionist approach 
todd loy 
eds music connectionism pp 

mit press cambridge mass desain honing 

brief beat induction 
proceedings icmc san francisco 
dixon 

beat tracking musical knowledge 
horn 
ed proceedings ecai european conference artificial intelligence amsterdam 
doucet andrieu 

iterative algorithms state estimation jump markov linear systems 
ieee trans 
signal processing 
doucet de freitas gordon 
eds 

sequential monte carlo methods practice 
springer verlag new york 
doucet de freitas murphy russell 

rao blackwellised particle filtering dynamic bayesian networks 
uncertainty artificial intelligence 
doucet godsill andrieu 

sequential monte carlo sampling methods bayesian filtering 
statistics computing 
fox burgard thrun 

markov localization mobile robots dynamic environments 
journal artificial intelligence research jair 
ghahramani hinton 

variational learning switching state space models 
neural computation 
ghahramani hinton 

parameter estimation linear dynamical systems 

tech 
rep university 
dept computer science 
godsill doucet west 

maximum posteriori sequence estimation monte carlo particle filters 
annals institute statistical mathematics 
gordon salmond smith 

novel approach nonlinear non gaussian bayesian state estimation 
iee proceedings part radar signal processing vol 
pp 

goto muraoka 

music understanding beat level real time beat tracking audio signals 
rosenthal okuno 
eds computational auditory scene analysis 


probabilistic method tracking 
ph thesis school computer science carnegie mellon university pittsburgh pa goto asoh 

learning quantization estimation onset times musical score 
proceedings th world multi conference systemics cybernetics informatics sci vol 
pp 

desain honing 

match evaluation different approaches score performance matching 
computer music journal 
heskes 

expectation propagation approximate inference dynamic bayesian networks 
proceedings uai 
isard blake 

contour tracking stochastic propagation conditional density 
eccv pp 

large jones 

dynamics attending track time varying events 
psychological review 
liu chen 

theoretical framework sequential importance sampling 
doucet de freitas gordon 
eds sequential monte carlo methods practice pp 

springer verlag 
monte carlo methods tempo tracking rhythm quantization longuet higgins 

mental processes studies cognitive science 
mit press cam bridge 

pasula russell peres 

decayed mcmc filtering 
proceedings ual metropolis rosenbluth rosenbluth teller teller 

equations state calculations fast computing machines 
journal chemical physics 
metropolis ulam 

monte carlo method 
journal american statistical assoc jj 
murphy 

dynamic bayesian networks representation inference learning 
ph thesis university california berkeley 
pressing lawrence 

transcribe comprehensive program 
proceedings international computer music conference pp 
tokyo 
computer music association 
rabiner 

tutorial hidden markov models selected applications speech 
proc 
ieee 
raphael 

mixed graphical model rhythmic parsing 
proc 
th conf 
uncertainty artif 
int 
morgan kaufmann 
raphael 
lb 
probabilistic expert system automatic musical accompaniment 
journal computational graphical statistics 
roberts rosenthal 

markov chain monte carlo practical implications theoretical results 
canadian journal statistics 
scheirer 

tempo beat analysis acoustic musical signals 
journal acoustical society america 
shumway stoffer 

approach time series smoothing forecasting em algorithm 
time series analysis 
tanizaki 

nonlinear non gaussian state space modeling monte carlo techniques survey comparative study 
rao 
eds handbook statistics vol 
stochastic processes modeling simulation 
north holland 
thom 

unsupervised learning interactive jazz blues improvisation 
proceedings aaai 
aaai press 


interactive midi accompanist 
computer music journal 
puckette 

synthetic rehearsal training synthetic performer 
proceedings icmc pp 
san francisco 
international computer music association 
gardner scheirer 

structured audio creation transmission rendering parametric sound representations 
proc 
ieee 

