design issues layered quality adaptive internet video playback reza rejaie amy reibman labs research menlo park ca 
reza research att com labs research florham park nj 
amy research att com 
design ecient unicast internet video playback applications requires proper integration encoding techniques transport mechanisms 
mutual dependency encoding technique transport mechanism design applications proven challenging problem 
presents architecture allows joint design transport aware video encoder encoding aware transport 
argue layered encoding provides maximum exibility ecient transport video streams internet 
describe line layered encoding techniques achieve robustness imprecise knowledge channel behavior bandwidth loss rate maximizing eciency transport mechanism 
prototyped client server architecture describe key components transport mechanism design issues 
describe encoding speci information utilized transport mechanisms ecient delivery stored layered video despite variations channel behavior 
design ecient unicast internet video playback applications requires proper integration encoding techniques transport mechanisms 
mutual dependency encoding technique transport mechanism design applications proven challenging problem 
encoding techniques typically assume speci channel behavior loss rate bandwidth encoder designed maximize compression eciency expected channel bandwidth including sucient amount redundancy cope expected loss rate 
channel behavior diverges expected behavior quality delivered stream lower expected 
shared nature internet resources implies behavior internet connections substantially vary unpredictable changes existing trac course session 
requires internet transport mechanisms incorporate type congestion control mechanism 
pipeline pre encoded stream congestion controlled connection video playback applications able eciently operate expected range connection behaviors 
means video playback applications quality adaptive cope long term variations bandwidth loss resilient robust range potential loss rates 
rejaie reibman argue layered encoding promising approach internet video playback 
layered encoders structure video data layers importance lower layers important higher layers 
structured representation allows transport mechanisms accommodate variations available bandwidth anticipated loss rate enabling simpler joint designs encoder transport mechanisms 
transport mechanisms easily match compressed rate average available bandwidth adjusting delivered quality 
second transport mechanisms repair missing pieces di erent layers prioritized fashion di erent time scales 
short timescales round trip times rtt lost packets layer recovered lost packet higher layers 
allows transport mechanisms control observed loss rate layer 
crucial total channel loss rate distribution layers known priori expected change transmission 
long timescales minutes server patch quality delivered stream transmitting pieces layer delivered initial transmission 
longer timescales server send extra layers improve quality previously transmitted stream constrained available bandwidth client server 
allows adjustment quality cached stream proxy 
prototyped client server architecture playback layered video internet 
congestion control cc module determines available bandwidth bw network feedback client acknowledgment loss recovery lr module utilizes portion available bandwidth bw lr repair packet losses observed loss rate remains tolerable rate encoding scheme 
server observes remaining losses repaired uses remaining portion bandwidth bw qa perform quality adaptation qa adjusting delivered quality number transmitting layers 
qa lr mechanisms depend parameters speci encoding tightly coupled 
collective performance qa lr mechanisms determine perceived quality video playback 
key component architecture bandwidth allocator ba divides total available bandwidth qa lr modules information depends speci encoding client status 
describes ongoing integrate transport aware encoding encoding aware transport internet video playback 
consider coupled design encoder transport designed knowledge expected behavior 
transport aware encoding main design choices trade layered encoding describe encoding schemes customized available knowledge regarding employed transport mechanism regarding expected channel rate loss rate 
design encoding aware transport mechanisms focus design strategies ba qa lr modules directly ected details deployed layered encoding scheme 
design issues layered quality adaptive internet video playback buffer cong re org 
buffer display internet ack repair adapt 
bw allocator stored media client buffer state decoder bw qa bw lr bw bw ack fig 

client server architecture rest organized follows 
section review related 
natural ordering encoding transport consider transport aware encoding layered video encoder section 
section address various components transport mechanism examine design tradeo includes bandwidth allocation section loss recovery section quality adaptation section 
section concludes addresses plans 
related traditionally video encoders designed transport xed rate channels xed known channel bandwidth losses 
creates bit stream poor quality transported network di erent bandwidth loss rate 
higher loss rate lower bandwidth produce potentially signi cant visual artifacts propagate time 
transport networks encoder design change cognizant fact bit stream may deal varying channel bandwidth non zero loss rate 
years classes solutions proposed encoding transmitting video streams network follows layer encoding layer video encodings mpeg mpeg main pro le trade compression resilience errors achieved judiciously including intra blocks temporal prediction 
choice blocks code blocks sequence optimized channel loss rate known priori 
rejaie reibman transport mechanisms gracefully adjust quality layer stream available channel bandwidth 
common solution deploy encoding speci packet dropping algorithm 
algorithms server discards packets contain lower priority information drops frames mpeg streams match transmission rate channel bandwidth 
range channel rates algorithms useful usually limited delivered quality may noticeably degraded 
ects content encoding speci multiple description coders approach multiple description md video encoder 
md coders typically robust uncertainties channel loss rate time encoding 
require similar network support adapt varying channel bandwidth 
multiple encodings alternative cope variations channel behavior maintain versions stream encoded di erent network conditions 
server switch di erent encodings response changes network conditions 
limitations approach inability improve quality transmitted portion stream inability system quickly respond sharp decreases available bandwidth 
layered encodings hierarchical encoding organizes compressed media layered fashion importance layer important higher layers important lower layers 
lower important layers received base quality video displayed higher important layers received better quality video displayed 
layered structure encoded stream allows server ectively cope uncertain channel behavior 
summary layered encoding advantages layered video allows easy ective rate matching 
server match bandwidth delivered stream available network bandwidth changing number layers transmitted 
relaxes need knowing exact channel bandwidth time encoding helps decouple transport encoding design 
second layered video allows unequal error protection applied transport stronger error correction applied important layers 
ectively expected loss rate known time compression 
layer video important layer layered video equally susceptible losses discrepancies actual loss rate assumed time encoding accommodated transport mechanism 
third layered encoding allows server improve quality portion stream 
call quality patching 
essence layered structure allows server deliver di erent portions various layers arbitrary order reshape stream delivery uncertain channel 
quality delivered stream smoothed various timescales 
illustrates layered encoding reshape design issues layered quality adaptive internet video playback stream transmission network 
server adjusts number layers long term changes available bandwidth 
total loss rate randomly distributed active layers 
server prioritize loss recovery retransmitting losses layer layer extra bandwidth available time server add fourth layer alternatively transmit missing segments layer 
shows layered encoded stream reshaped stream delivery network 
layer layer layer layer time bandwidth available bandwidth playback quality fig 

flexibility layered encoding transport aware layered encoding section consider best create video bit stream stored media server 
argued earlier layered equivalently scalable encoder produce better bit stream layer encoder values channel bandwidth loss rate known time encoding 
despite advantages inherent layered video system performance requires careful design 
background layered video encoders show incorporating time encoding information possible channel bandwidth loss rate generate best bit stream storage 
discuss information needs shared encoder transport improve quality delivered video 
layered coding background basic methods create layered video bit stream dimensional wavelets adding layering traditional dct video coder inter frame temporal prediction 
drawbacks quite poor compression performance sequences complex motions poor video rejaie reibman quality temporal sub bands lost due motion blurring 
reasons focus family layered dct temporally predictive video coders 
family coders research standardized coders 
coders frames predicted previous frames dct coecients coded layered fashion 
important aspects coders followings dct coecients partitioned layers partitioning done frequency domain spatial domain quality snr domain enhancement layer information uses temporal prediction lower layer base information predict higher layer enhancement information bandwidth allocated layer bandwidth redundancy layer layers created 
decisions ect compression eciency layered coder ect robustness packet loss 
knowledge expected bandwidth loss rates time transport large impact best choice codec design 
standardized layered encoders produce layers interest having layers lead standard mpeg finely granular scalability fgs 
bit stream structure mpeg fgs highly robust exible changes available bandwidth 
robustness comes signi cant penalty eciency compression video quality rate increases 
standardized approaches layered encoding markedly improve compression eciency sacri ce robustness 
design layered encoder underlying assumptions regarding nature transport channel 
speci cally layered coder assumes transport mechanism initially attempt send important information available bandwidth loss recovery applied important parts important parts 
implicitly requires bu ering client transport 
exact bandwidth loss rate experienced time transport typically known time encoding assumptions 
general assumptions implicit design layered video encoder 
explicit 
consider rst bandwidth consider loss rate 
incorporating bandwidth knowledge knowledge available time encoding regarding expected range operating bandwidths better 
focus knowledge design issues layered quality adaptive internet video playback available bandwidth impacts prediction strategy encoder 
available bandwidth known range rmin rmax di erent prediction strategies useful depending expected behavior bandwidth range 
consider case bandwidth nearly close rmax best design rely heavily prediction enhancement layers improve compression eciency 
essentially strategy layer encoder 
design su er small degradation bandwidth dips slightly rmax environment probability larger degradations small 
second consider case bandwidth usually near rmin better quality rate higher 
best design temporal prediction base layer rate rmin temporal prediction higher layers 
strategy mpeg fgs 
design robust variations bandwidth rmin rmax ecient rates near rmax third suppose little knowledge bandwidth lies range rmin rmax 
case best algorithm judiciously choose prediction strategy macro block video balance compression eciency rates near rmax robustness rates near rmin 
illustrates concepts sequence hall monitor scalable video coder 
coder exibility di erent methods prediction di erent layers allows mimic layer video coder mpeg fgs video coder appropriate restriction prediction methods 
results obtained creating single bit stream illustrated curve successively discarding enhancement layer bit planes decoding remainder 
axis shows decoded bit rate axis shows psnr resulting decoder reconstruction bit planes discarded 
shown performance loop encoder loss top dotted line 
provides upper bound performance scalable coders 
gure curve labeled fgs uses prediction strategy mpeg fgs coder optimal available bandwidth usually near rmin curve labeled layer loss uses layer prediction strategy optimal available bandwidth usually near rmax curve labeled drift controlled coder optimized provide performance range rates 
fgs coder performs poorly higher rates 
layer decoder drift su ers db degradation lowest bit rate compared drift free fgs decoder 
relative fgs coder proposed coder su ers db performance degradation lowest bit rate signi cantly outperforms 
coder loses eciency highest rates compared layer coder noticeably drift bit planes discarded 
rejaie reibman layer loss drift controlled fgs layer loss kbits second psnr db fig 

ect bandwidth psnr table shows psnr averaged di erent channel rates assuming uniform distribution rates smallest largest rate encoder 
coder optimized range channel rates outperforms coders db frame 
seq 
loop proposed fgs upper hall fore table 
psnr assuming uniform distribution 
incorporating loss rate knowledge consider ect incorporating knowledge expected loss rate video encoder design 
distinguish loss rate lowered bandwidth losses randomly ect entire frame layer lowered bandwidth targeted speci cally important parts bit stream frame layer 
showed choice prediction structure layered encoder uenced expected bandwidth 
similarly expected loss rate ects best prediction structure 
shows performance layer encoder random losses layer 
di erent prediction strategies enhancement layer 
base layer compressed kbps enhancement layer compressed kbps 
curve labeled corresponds enhancement layer predicted base layer curve labeled corresponds enhancement layer uses prediction previous enhancement design issues layered quality adaptive internet video playback layer pictures 
performance assume base layer completely received 
base layer performance degrades gradually loss rate increases loss rate continues increase performance degrades signi cantly 
important transport mechanism keep residual losses loss recovery base layer 
aggressive prediction strategy visually better performance low loss rates loss rates greater performs signi cantly worse ecient prediction strategy 
note coder signi cant degradations 
coder nal illustrate gure 
cases performance loss enhancement layer identical base performance 
aggressive prediction strategy important transport keep loss rate enhancement layer ecient prediction strategy loss rate enhancement layer critical 
performance signi cantly degraded case losses additional layers added rst enhancement layer 
probability packet loss average sequence psnr db base fig 

ect loss psnr information provided transport enable best design encoding aware transport encoder provide meta information transport mechanism 
meta information includes pieces information 
bandwidth quality trade 
speci cally encoder conveys bandwidth consumption rate layer cn improvement quality caused layer qn 
rejaie reibman 
loss rate quality trade 
situation base layer aggressive enhancement layer prediction strategy loss rate vs quality meta information reduced simple thresholds regarding maximum tolerable loss rate layer lmax lmax 
general meta information encoding content speci ideally include temporal variations indicating trade di erent scenes sequence frame sequence 
practice necessary static information entire sequence generic information class sequences head shoulders 
interface transport encoder completely characterized loss rate bandwidth dedicated video information 
information sucient design ective encoding aware transport mechanisms 
encoding aware transport section illustrate transport mechanism layered encoded streams leverage encoding speci information improve quality delivered stream 
client server architecture identify main components architecture associated design issues 
explore design space main components show encoding speci information customized design 
goal clarify key tradeo design transport mechanism layered video demonstrate information encoded streams improve delivered quality best ort internet 
depicts client server architecture delivery internet video playback details 
mentioned earlier architecture key components congestion control cc network speci mechanism determines available bandwidth bw loss rate network connection 
available bandwidth loss rate periodically reported bandwidth allocation ba module 
ba module uses encoding speci information properly allocate available bandwidth loss recovery lr quality adaptation qa modules 
lr module utilizes allocated portion available bandwidth bw lr retransmit required ratio losses 
remaining portion available bandwidth bw qa qa module properly determine quality delivered stream number transmitting layers 
streams layered encoded stored 
di erent layers sent di erent rate bw bw 
server multiplexes active layers retransmitted packets single congestion controlled ow 
client di erent layers rebuilds individual layers virtually separate bu ers 
layer bu er drained decoder rate equal consumption rate cn 
client reports playout time ack packet 
allows server estimate client bu er design issues layered quality adaptive internet video playback internet observed channel acker display quality adaptation layered decoder layered encoded stream storage data pkt bw qa loss repair bw bw qa bw lr bandwith allocation mechanism bw bw bw client buffer state bw bw bw bw bw bw bw bw bw bw observed connection client buffer fig 

client server architecture streaming layered video state amount bu ered data layer 
client bu ering absorb short term variations bandwidth changing delivered quality 
main goal transport mechanism map actual connection bandwidth loss rate range acceptable channel behavior expected encoding mechanism 
layered encoding provides levels freedom transport mechanism achieve goal changing number layers transport mechanism adjust required channel bandwidth delivery stream allocating portion available channel bandwidth loss repair transport mechanism reduce observed loss rate 
key issues design transport mechanism layered encoded streams tailored encoded stream improve delivered quality bandwidth allocation strategy transport mechanism allocate total connection bandwidth lr qa modules 
loss repair strategy loss repair bandwidth bw lr shared transmitting layers 
quality adaptation strategy server adjust quality delivered stream number layers available channel bandwidth bw qa changes 
rejaie reibman congestion control network speci mechanism design substantially ected application requirements 
discuss design issues cc mechanism 
main challenge behavior network connection bw known priori worse substantially change course connection 
server adaptively change behavior connection behavior varies 
rest section provide insight strategies design transport mechanism layered encoded stream demonstrate transport mechanism bene encoding speci information 
assume encoding speci meta data described section available layered encoded stream 
bandwidth allocation ba module shifts connection loss rate range acceptable loss rate allocating required amount connection bandwidth loss repair 
application observe channel lower loss rate qa cost lower channel bandwidth 
need drive function presents tradeo channel bandwidth bw qa channel loss rate qa 
connection bandwidth bw connection loss rate total rate delivered bits equal bw 
ratio delivered bits channel bw calculate channel loss rate follows qa bw bw qa bw bw qa bw equation presents qa function bw qa connection bw 
depicts function di erent set bw values 
line represents possible channel behaviors network connection ba module trades bw qa qa example point represents connection kbps bandwidth loss rate 
reduce channel loss rate shifting point point ba module allocate kbps connection bandwidth loss repair reducing loss rate shifting point point requires ba module allocate kbps connection bandwidth loss repair 
clearly demonstrates ba strategy customized encoded streams information provided encoder 
bandwidth various layers 
layer maximum tolerable loss rates lmax lmax nd maximum number layers delivered network connection bw conditions satis ed qa bw qa design issues layered quality adaptive internet video playback rst condition examines average loss rate active layers channel loss rate second condition ensures channel bandwidth sucient delivery layers 
values bw maximum number layers ba module equation search channel loss rate satis es equation 
channel loss rate accommodated corresponding channel bandwidth satis es equation layers delivered total required bandwidth loss repair bw lr bw bw qa 
ba module decreases repeats process 
ba module continuously monitors connection behavior determine required bandwidth loss repair channel behavior satis es conditions equation number active layers 
connection loss rate increases connection bandwidth decreases conditions longer satis ed ba module signals qa module drop top layer 
decrease turn presents new set conditions transport mechanism 
channel loss rate trading channel bandwidth channel loss rate bw bps bw bps bw bps bw bps bw bps fig 

trading channel bandwidth channel loss rate summary ba module determines bandwidth share qa lr modules 
allows separate design loss recovery mechanism quality adaptation mechanism spite fact collective performance determines delivered quality 
loss recovery loss repair module micro manage total allocated bandwidth loss repair bw lr active layers loss rate observed rejaie reibman repair window layer layer layer layer time lost packet fig 

sliding window approach prioritized retransmission layer remains maximum tolerable threshold lmax lmax 
layers multiplexed single unicast session server distribution total loss rate active layers seemingly random change time 
bandwidth requirement loss recovery various layers randomly change time total loss rate remains constant 
assume retransmission loss recovery retransmission feasible playback applications sucient client bu ering retransmission ecient requires bandwidth repair schemes fec retransmission allows ne grained bandwidth allocation active layers importance layer monotonically decreases layer number loss repair performed prioritized fashion losses layer repaired losses higher layers losses lower layers 
prioritized approach loss repair ensure total repair bandwidth properly shared active layers retransmitted packet delivered playout time 
achieve deploy approach loss repair shown 
point time server examines window transmitted packets layers 
losses active layers retransmitted order importance loss rate observed layer remains maximum tolerable loss rate maxi 
shows order retransmission window layer layers 
repair window round trip times rtt ahead playout time provide sucient time retransmission 
repair window slides playout time 
ba module properly estimates required bandwidth loss repair losses repaired 
allocated bandwidth loss repair sucient recover losses window approach repairs maximum number important losses 
length repair window chosen properly 
short window discuss retransmission loss repair basic idea applied post encoding loss repair mechanisms unequal fec 
design issues layered quality adaptive internet video playback cope sudden decrease bandwidth long window result late arrival retransmitted packets higher layers 
summary sliding window approach prioritized loss repair uses maximum tolerable loss rates encoded stream improve performance adaptively changes distribution total repair bandwidth active layers 
quality adaptation qa mechanism strategy adds drops layers match quality delivered stream number transmitting layers channel bandwidth bw qa 
channel bandwidth higher consumption rate active layers server extra bandwidth send active layers higher rate bw ll client bu er 
bu ered data client absorb short term decrease bandwidth dropping layers 
illustrates lling draining phases client bu ers layers delivered 
total amount bu ered data draining phase sucient absorb decrease bandwidth qa module forced drop layer 
consequently data bu ered client lling phase bigger reductions absorbed 
amount bu ered data client side determined strategy adding layers 
compares adding strategies 
lling phase qa strategy adds new layer speci amount data bu ered 
required amount bu ered data small qa mechanism aggressively adds new layer channel bandwidth slightly increases 
case small decrease bandwidth result dropping top layer small amount bu ering 
alternatively qa mechanism conservatively add new layer large amount data bu ered 
time bandwidth draining phase filling phase fig 

filling draining phases quality adaptation rejaie reibman time bandwidth channel bandwidth aggressive qa mechanism conservative qa mechanism fig 

ect adding strategy quality changes bu ered data allows server maintain newly added layer longer period time despite major drops bandwidth 
shows aggressive conservative adding strategies action 
bandwidth shown saw tooth line graphs 
experiment clearly illustrates coupling adding dropping strategies 
conservative adding strategy longer new layer kept resulting fewer quality changes vice versa 
bw aggressive qa strategy time bw conservative qa strategy time fig 

aggressive vs conservative qa strategies qa mechanism customized particular layered stream transmitted 
explain need examine basic tradeo design add drop strategy 
design issues layered quality adaptive internet video playback data bu ered adding new layer 
chosen normal oscillation channel bandwidth steady state trigger adding dropping layer 
clearly shows required amount bu ered data survive drop bandwidth directly depends total consumption rate active layers 
bu ered data distributed active layers 
streams layered encoded bu ered data properly distributed active layers order ectively absorb variations bandwidth 
draining phase bu ered data layer drained faster consumption rate 
bu ered data layer compensate bps 
illustrates restriction 
avoid dropping layer total draining rate bu ering layers higher de cit channel bandwidth bw def 
speci cally draining phase conditions satis ed bw def bw qa bw def time bandwidth amount drained data layer total consumption rate draining phase max bw deficit amount drained data layer amount drained data layer channel bw bw def fig 

sample distribution bu ered data bu ering layers joint design encoder transport mechanisms playback layered quality adaptive video internet 
main challenge internet support qos 
time encoding channel bandwidth loss rate known signi cantly rejaie reibman change course session 
traditional encoding approaches assume static channel behavior result poor quality 
argued layered video exible solution eciently delivered range channel behavior provides suf cient exibility transport mechanism ectively reshape stream delivery variable channel 
maximize quality delivered video encoding transport aware transport mechanism encoding aware 
described issues design layered encoding mechanisms explained expected range channel bandwidth loss rate information incorporated encoding mechanism 
furthermore encoding mechanism provides encoding speci meta information 
transport mechanism uses information bridge gap expected range channel behavior encoder actual connection behavior 
speci cally provided insight main components transport mechanism particularly bandwidth allocation loss repair quality adaptation leverage encoding speci meta information improve delivered quality layered video despite unpredictable changes channel behavior 
plan conduct extensive experiments internet evaluate performance client server architecture 
allow identify scenarios architecture properly cope changes connection behavior 
problems addressed encoding mechanism appropriate provisioning require tuning modi cation transport mechanism 
experiments provide deeper insight channel behavior may suggest re nement layered encoding mechanism 
plan examine interactions key components transport mechanism implications congestion control algorithm components transport mechanism 

rejaie handley estrin rap rate congestion control mechanism realtime streams internet proc 
ieee infocom mar 

floyd handley padhye widmer equation congestion control unicast applications proc 
acm sigcomm sept 

rejaie yu handley estrin multimedia proxy caching mechanism quality adaptive streaming applications internet proc 
ieee infocom tel aviv israel mar 

rejaie handley estrin quality adaptation congestion controlled playback video internet proc 
acm sigcomm sept 

zhang rose video coding optimal inter switching packet loss resilience ieee journal selected areas communications vol 
pp 
june 

kang won lee rohit puri tae eun kim kannan ramchandran bharghavan integrated source coding congestion control framework design issues layered quality adaptive internet video playback video streaming internet proc 
ieee infocom tel aviv israel mar 

reibman wang orchard multiple description coding video motion compensated prediction international conference image processing oct 

zakhor multirate subband coding video ieee trans 
image processing vol 
pp 
sept 

mccanne jacobson vetterli receiver driven layered multicast proc 
acm sigcomm aug 

aravind reibman packet loss resilience mpeg scalable video coding algorithms ieee transactions circuits systems video technology vol 
pp 
oct 

cote erol gallant video coding low bit rates ieee transaction circuit systems video technology vol 
nov 

radha fine granular scalable video packet networks packet video workshop new york ny apr 

reibman bottou managing drift dct scalable video encoder ieee data compression conf mar 
