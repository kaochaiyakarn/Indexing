unified framework optimal video streaming philippe de institut eurecom route des cr tes sophia antipolis france email philippe de eurecom fr study problem stream layered video live stored lossy packet network order optimize video quality rendered receiver 
unified framework combines scheduling fec error protection decoder error concealment 
context unified framework study case channel perfect state information case channel imperfect state information delayed lost feedback 
adapt theory infinite horizon average reward markov decision processes mdps average cost constraints problem 
simulations mpeg fgs video show optimizing scheduling fec error correction error concealment improves performance significantly policies static error protection give near optimal performance 
find degradations quality channel imperfect state information small mdp approach suitable networks long delays 
index terms system design simulations mathematical optimization 
study problem stream layered video live stored lossy packet network order optimize video quality rendered receiver 
unified framework combines scheduling fec error protection decoder error concealment 
context unified framework study case channel perfect state information case channel imperfect state information delayed lost feedback 
packet network environments including internet bandwidth available streaming application known priori varies streaming application 
network environments layered encoded video appropriate :10.1.1.13.632:10.1.1.34.2522
video encoded base layer bl number enhancement layers els 
decoded bl provides minimal rendered quality additional decoded els progressively enhance rendered quality 
keith ross polytechnic university center brooklyn ny usa email ross poly edu sender schedule transmission media packets order maximize rendered video quality 
sender may choose transmit media packets sending layers frames called quality adaptation 
scheduling combined error correction order mitigate effects packet loss rendered video 
broadly speaking types error correction streaming media retransmission lost packets arrive receiver decoding deadlines transmission redundant forward error correction fec packets 
scheduling error correction jointly adapt variations network conditions available bandwidth packet loss rate connection 
framework error correction provided fec codes 
fec codes consist adding redundancy source video packets 
common fec codes reed solomon rs codes 
rs codes consist adding redundant packets source packets transmission 
reception packets transmitted packets allows receiver recover original source packets 
fec codes interactive real time communications internet telephony 
provide channel error correction delay selective retransmission cost increase required transmission rate 
situations feedback channel available multicast applications 
receiver media packets available time decoding deadlines 
packets available transmitted lost simply sender scheduled transmission 
time rendering user decoder typically applies methods error concealment ec best conceal missing packets 
ec consists exploiting spatial temporal correlations audio video interpolate missing packets surrounding available packets 
video simple popular method temporal error concealment display missing macro block current frame macro block spatial location previous frame 
packet scheduling error correction error concealment fundamental components video streaming system 
illustrates respective functions 
sender scheduler determines layers sent receiver frame video 
error protection component determines amount fec packets send layer 
receiver rendering media decoder performs error concealment available layers 
traditionally scheduling error correction transmission policies optimized account presence error concealment receiver 
argue scheduling error protection decoder error concealment optimized unified manner 
particular designing scheduling error correction transmission policy account layered structure media channel characteristics effects missing packets distortion explicitly account error concealment receiver 
contributions 
new unified optimization framework combines scheduling fec error concealment 
context unified framework study case channel perfect state information case channel imperfect state information delayed lost feedback 
adapt theory infinite horizon average reward markov decision processes mdps average cost constraints problem 
simulations mpeg fgs video show optimizing scheduling fec error correction error concealment improves performance significantly policies static error protection give near optimal performance 
find degradations quality channel imperfect state information small mdp approach suitable networks long delays 
organized follows 
subsection discuss related 
section formulate optimization problem 
section gives experimental setup simulations mpeg fgs videos 
section show optimization problem solved results mdps 
section investigate incorporate additional quality metrics framework 
section presents case receiver state information lost delayed 
conclude section 
related knowledge closely related chou considers rate distortion optimized streaming 
chou consider scheduling packetized media packet erasure channel order minimize additive combination distortion average rate 
decoder error concealment central part framework 
introduce rate distortion optimized streaming decoder error concealment 
chou develop heuristic algorithm finding sub optimal scheduling policy performance may significantly truly optimal scheduling policy 
constrained mdp approach provides tractable means determining truly optimal policy 
framework chou allows retransmissions framework allows forward error correction 
framework provided handle quality variability metrics addition average distortion metrics 
closely related works optimal streaming media feedback channel include 
works consider error concealment 
podolsky study optimal retransmission strategies scalable media 
analysis markov chains state space grows exponentially number layers 
studies scheduling complete encoded multiple description codes 
sender adapts number descriptions sent receiver function network state modeled hmm 
builds previous considered joint scheduling error concealment ideal lossy channels immediate feedback error correction 
significantly extends incorporating error correction fec scheduling optimization problem allowing channels delayed feedback 
unified framework suitable transmission current best effort internet 
streaming layered video unequal error protection uep fec 
approaches consider decoder error concealment optimization process 
ii 
problem formulation consider video streaming live stored 
streaming layered encoded video reception base layer provides minimum acceptable quality 
base layer transmitted high reliability 
achieved sufficient playback buffering client allow retransmission layer layer layer fig 

video streaming system 
scheduler error correction lossy channel playback buffer sender receiver decoder error concealment lost video packets decoding deadline expire protecting base layer high amount fec codes 
additionally transmitting base layer high reliability permits highly bit rate efficient despite poorly error resilient encoding methods motion compensation 
suppose base layer transmitted client loss focus determining optimal policies transmission enhancement layers 
video sender encoded enhancement layers 
recall main property layered encoded video layer frame decoded lower layers available decoder 
number frames video 
suppose enhancement layers motion compensated decoding layer frame depend decoding previous frames 
explain section assumption correspond particularly case fgs el defined mpeg standard 
unified framework stays valid highly error resilient layering scheme encode enhancement layers motion compensation simplicity analysis suppose enhancement layers size 
layer contains exactly source packets 
suppose additional quality brought layer roughly constant frames video layer frame brings roughly amount quality frame layer frame sion channel packet erasure channel 
channel probability success decoder suppose order conceal loss packets frame number frame 
generally long videos containing multiple scenes different visual characteristics quality brought layer vary significantly different parts video 
case suppose video previously segmented homogeneous segments video frames quality brought layer roughly constant segment 
study consider single homogeneous segment containing frames 
case longer videos apply optimization framework separate segment 
suppose information previous frame 
information frame necessarily fully conceal loss packets frame note practice information set consecutive previous frames subsequent frames perform error concealment current frame decoder 
potential increase accuracy predicting missing packet cost increase run time complexity decoder 
theory extended handle sophisticated forms error concealment order see forest trees focus previous frame error concealment 
scheduling error correction transmission policy denote average transmission rate video 
defined average number packets sent frame normalized total number source packets frames video sequence 
denote average distortion rendered video error concealment 
typical problem formulation rate distortion optimized streaming problem find optimal transmission policy minimizes subject maximum normalized transmission rate allowed network connection alternatively rate budget allocated streaming 
denote minimum distortion achieved optimal policy 
may misleading solely average image distortion usually expressed terms average mse mean squared error account quality rendered video 
average image distortion measure temporal artifacts noise moving artifacts edges drifts moving propagation prediction errors transmission 
second high variations quality successive images may decrease perceptual quality video 
formulation problem incorporate additional quality constraints 
treat example case variations quality consecutive images 
transmission policy denote average variation distortion tween consecutive images 
formulate problem problem find optimal transmission policy minimizes subject maximum average variation distortion allowed 
value subjective tests 
denote joint scheduling error correction action sender takes frame defined total number packets source fec packets send layers frame total num ber packets send layer 
restrict number fec packets layer number source packets 
note decision means sender send layer 
particular imply higher layers decoded sender send layer hierarchy system give protection lower layers higher layers uep 
possible decisions frame 
denote state receiver previous frame number successive layers available decoder frame denote set coding 
note system allow retransmission lost enhancement layer packets 
reasonable assumption live streaming 
reasonable stored video systems short playback delays high vcr interactivity 
denote distortion frame containing layers temporal ec 
loss denote distortion frame de generality take denote distortion frame temporal error concealment layers previous frame layers current frame received decoder 
decoder conceal lost layers current frame previous frame denote distortion matrix matrix system suppose sender knows distortion matrix current video segment 
streaming stored video distortion matrix computed line original uncompressed video segment 
stored sender video file 
streaming live video sender needs estimate value distortion matrix starting encoding transmission current video segment 
estimate previous video segments encoded sent receivers 
applications live video streaming streaming sporting events consecutive video segments usually recurrent similar characteristics expect distortion matrix upcoming segment estimated sufficiently accurately 
iii 
experimental setup order illustrate results mpeg fgs videos 
fine granularity scalability fgs new profile mpeg specifically standardized transmission video best effort internet 
fgs enhancement layer truncated transmission giving fine grained property 
suppose fgs enhancement layer divided layers current video segment appro priate value determined coarse grained network adaptive algorithm :10.1.1.13.632
motion compensation mpeg fgs enhancement layer highly resilient transmission errors 
mpeg group advocates transmitting base layer high reliability 
unified framework particularly suited transmission mpeg fgs encoded video best effort internet 
apply framework enhancement layers extracted fgs enhancement layer 
experiments choose simplest strategy temporal error concealment consists replacing missing layers current frame corresponding layers previous frame 
experiments noticed strategy performs low motion video segments poorly segments high motion 
video segments high amount motion foreman require error concealment strategy compensates psnr frame number fig 

psnr frames low quality ec different values motion 
example presents scheme error concealment fgs enhancement layer uses layers previous frame motion information contained base layer current frame 
suppose base layer transmitted loss strategy easily applicable system 
experiments low motion segment 
microsoft mpeg software encoder decoder fgs functionality 
encode video target qualities low high qualities different network capacities 
low high quality videos encoded vbr bl average bitrate kbps kbps respectively fgs el average bitrate kbps mbps respectively 
video cut fgs el layers equal size els frame rate frames sec 

video segment encoded cif format pix contains frames 
shows frame video quality psnr error concealment layers received previous frame layers received current frame simple temporal error concealment scheme layers received frame frame enhancement layers frame decoder uses additional decoding frame verify layers received frame psnr frame error concealment increases number received layers frame shows temporal error concealment effective increasing quality rendered video 
increase quality substantial 
example frame simple error concealment enhancement layer previous frame improve quality cur rent frame db psnr frame goes db db 
note upper graph shows maximum quality frame corresponds case layers frame re 
shows zoomed part decoded frame error concealment el received frame frame left el received frame layers previous frame received middle layers frame received right 
see quality frame better layers previous frame received middle picture layer available receiver previous frame left picture 
quality lower layers frame received decoded right picture 
computed average distortion frames video segment possible receiver states 
normalizing obtained distortion matrices high low quality versions high low note low quality version means replacing available layers current frame corresponding layers previous frame achieves lower distortion better quality layer current frame subsequent layers previous frame 
due simple temporal ec strategy 
implement motion compensation ec replacement layers current frame layers previous frame create visual impairments 
impairments usually minor low motion video segments 
frames significantly different previous frames resulting increase distortion slightly higher decrease distortion brought error concealment 
shown occur high quality version video 
fig 

frame low quality left db db 
right iv 
optimization perfect state information section suppose sender observe state choosing action implies reliable feedback channel receiver sender connection rtt frame time 
show problem formulated constrained mdp turn solved linear programming 
problem naturally formulated finite horizon mdp steps number frames video segment 
computational effort associated finite horizon mdp costly large 
may serious impediment real time senders 
infinite horizon constrained mdps 
optimal stationary policies lower computa tional cost 
infinite horizon assumption corresponds considering infinite length video segments 
study values long run averages 
analysis consider markov decision process recall denotes distortion frame decoder error concealment 
define reward receiver state action chosen cost db definitions middle problem rewritten finding optimal policy maximizes long run average reward falls general theory constrained mdps 
layer denote probability layer successfully transmitted receiver total number packets sent layer 
computed probability transmit successfully packets packets sent layer 
assuming transmission channel packet erasure channel success probability reward expressed took convention 
randomized stationary policy denote law motion mdp 
mdp clearly mdp 
follows optimal policy constrained mdp randomized stationary policy 
furthermore randomization occurs state 
optimal stationary policy may obtained fol psfrag replacements lowing procedure step 
find optimal solution linear program lp psfrag 
replacements step 
determine optimal policy follows arbitrary note algorithms solve lps 
popular simplex algorithm 
exponential worst case complexity requires small number iterations practice 
elaborate algorithms polynomial complexity projective algorithm karmarkar 
simulations section suppose layer contains packets 
comparison ec aware ec unaware optimal policies compare scheduling error protection optimization accounting error concealment optimization accounting error concealment ec unaware transmission sender determines employs optimal transmission policy obtained accounting error concealment psnr psnr ec aware ec unaware ec aware ec unaware fig 

maximum quality function target average transmission rate low quality receiver 
receiver applies error concealment rendering video 
ec aware transmission sender determines employs optimal transmission policy accounts error concealment 
receiver applies error concealment rendering video 
important note schemes employ error concealment decoder comparing rendered video quality schemes making fair comparison 
denote maximum quality video quality optimal transmission policy 
show problem value psnr function target transmission rate ec unaware ec aware optimal transmission policies 
low quality version correspond typical values today 
consider channel success rates packet loss rate usually 
see figures maximum quality achieved ec aware optimal policies significantly higher ec unaware optimal policies values difference quality db 
confirms need account decoder error concealment joint scheduling error protection optimization 
simulations high quality version shown due space limitations give differences quality exceed db 
note high values schemes achieve performance 
corresponds extreme case psfrag replacements average bandwidth connection higher source bitrate video ation ec aware ec unaware optimal policies transmit layers additional fec packets 
rest study consider ec aware transmission policies 
comparison dynamic static fec investigate solutions problem particular case amount fec code added layer constant video sequence 
case denote number fec packets added layer frames current video sequence 
transmission decision take frame expressed 
situ denote corresponding transmission policies static redundancy policies contrast dynamic redundancy policies general case 
optimal static redundancy policies solving lp new set possible actions possible sets brute force algorithm 
shows maximum average quality low high quality versions function transmission channel compare optimal general policies optimal static redundancy policies 
see quality versions video maximum quality optimal general policy optimal static redundancy policy 
noticed optimal policies identical values psfrag replacements high quality fig 

maximum quality function target average transmission rate low high quality values indicates restrict optimization problem static redundancy policies 
simulations values shown due space constraints lead 
compare optimal general static redundancy policies fec optimal policies fec 
see gain quality achieved fec substantial 
versions video difference quality achieved optimal policy fec fec db note maximum quality achieved optimal policy fec stays constant quality achieved fec increases channel accommodate transmission video source packets plus additional packets 
optimal policy fec send source packets optimal policy fec send additional fec packets enhances quality rendered video 
performance infinite horizon optimization study performance ec aware optimal transmission policies obtained optimization framework infinite horizon practical case number frames video sequence finite 
average distortion matrix frames video 
show simulations target transmission rate channel psnr psnr general policy static redundancy fec general policy static redundancy fec low quality alpha maximum psnr achieved psnr average quality psnr alpha target rate achieved rate transmission rate fig 

simulations video segments containing frames 
success rate averaged results channel realizations 
plot achieved average quality average transmission rate respectively function number frames video frames 
plot confidence intervals represent channel runs 
see figures number frames increases achieved transmission rate quality averaged channel realizations converge target rate maximum quality respectively 
frame segment convergence errors db quality intervals large segments low number frames frame segment transmission rate achieved channel realization higher quality db lower transmission rate 
confidence target quality 
frame segment errors come db respectively 
common videos homogeneous segments composed tens thousands frames homogeneous segments usually correspond video scenes expect optimization framework infinite horizon achieve operational performance cases 
video segments composed frames may appropriate finite horizon linear programming order find optimal policies separate frame mentioned section iv 
additional quality constraint problem added new quality constraint optimization framework 
specifically minimizing average distortion optimal transmission policy maintain average variation distortion consecutive images maxi mum sustainable value problem consider video infinite length 
transmission policy long run average defined problem analyze problem markov decision process infinite horizon 
suppose sender observe state receiver section iv 
expected average distortion frame depends action state expected previous frame average variation distortion frame depends value state frame distortion frame de number layers received frames respectively 
consider mdp state action pro cesses 
define reward cost functions receiver state action taken definitions problem rewritten finding optimal policy maximizes long run average reward falls general theory markov decision processes multiple constraints 
optimal policy linear program psfrag replacements similar problem higher number variables additional constraint 
note additional cost expressed follows shows optimal quality achieved function different values maximum variation distortion consider optimal ec aware transmission policies fec channel see constraint variation distortion comes penalty quality higher values psfrag replacements quality high quality constraint variation distortion reached variation distortion optimal transmission policies problem 
fig 

maximum quality function 
target average transmission rate vi 
optimization imperfect state information section suppose sender general observe choosing action case mdp partially observable mdp pomdp mdp imperfect state information 
pomdps notoriously difficult pomdp tractable due special structure 
suppose sender observes state previous frame received feedback suppose sender observe choosing action 
corresponds rtt frame time transmission frame state reception frame immediately available transmitter take decision frame psnr psnr gamma gamma gamma gamma gamma gamma gamma gamma low quality history past state observations past actions 
denote state action history transmitter takes action consider case maximum feedback delay frames constant 
mdp perfect state information 
define associated reward cost receiver state ac tion chosen reward depends distortion frame depends turn depends subsequently mdp equivalent mdp cause framework consider temporal error concealment previous frame 
optimization framework depend maximum feedback delay reception feedback 
particularly suited applications feedback channel example applications strict delay requirements videoconferencing 
reward cost mdp 
packet erasure channel channel models larger 
show different quality versions difference performance channel model perfect state information immediate feedback imperfect state information delayed feedback fec see difference quality optimal policies fec small db 
quality difference won general perceived user 
fec difference quality db values psfrag replacements high quality adding fig 

maximum quality function target average fec increases effective packet transmission success transmission rate rate turn increases knowledge sender actual receiver state 
simulations gave similar results 
results indicate framework joint scheduling error control optimization achieve performance case receiver state fully observed making new decisions 
corresponds usual situation video streaming best effort internet feedback channel unreliable connection average rtt higher video frame rate 
vii 
psfrag replacements proposed unified optimization framework combines packet scheduling error control decoder error concealment 
results constrained markov decision processes infinite horizon compute optimal transmission policies wide range quality metrics 
psnr psnr immediate feedback delayed feedback immediate fec delayed fec immediate feedback delayed feedback immediate fec delayed fec low quality analyzed problem minimizing average distortion limited transmission rate 
analysis leads low complexity algorithm linear programming 
evaluated performance optimization framework context streaming mpeg fgs videos 
considered packet erasure channel perfect receiver state information 
showed potential quality gains brought ec aware transmission optimization ec unaware optimization 
simulations indicate complex scheduling optimization procedures consider decoder error concealment optimization process achieve results significantly lower truly optimal results 
seen numerical simulations infinite horizon optimization framework gives performance finite length video segments composed hundreds video frames 
showed framework allows accommodate additional quality metrics average distortion variation distortion consecutive images 
shown optimization problem limited static redundancy transmission policies methodology achieve performance general case receiver state information available sender 
directions include providing transmitter possibility retransmitting lost video packets considering expected gains quality error concealment 
unified framework appears suited layered encoded audio 
interesting investigate performance scheme streaming audio applications 
de ross adaptive rate control streaming stored fine grained scalable video proc 
nossdav miami florida may pp 

horn link girod robust internet video transmission scalable coding unequal error protection signal processing image communication vol 
pp 

rejaie estrin handley quality adaptation congestion controlled video playback internet proc 
acm sigcomm cambridge september pp 

rejaie reibman design issues layered quality adaptive internet video playback proc 
workshop digital communications italy september pp 

zhang zhu 
zhang resource allocation multimedia streaming internet ieee transactions multimedia vol 
pp 
september 
wang zhu error control concealment video communications review proc 
ieee vol 
pp 
may 
rosenberg qiu schulzrinne integrating packet fec adaptive voice playout buffer algorithms internet proc 
ieee infocom tel aviv israel march 

bolot towsley adaptive fec error control internet telephony proc 
ieee infocom 
biersack towsley parity loss recovery reliable multicast transmission acm sigcomm cannes france september pp 

chou rate distortion optimized streaming packetized media submitted ieee transactions multimedia february 
ortega expected run time distortion scheduling delivery scalable media proc 
international conference packet video pittsburg pa april 
podolsky vetterli mccanne limited retransmission real time layered multimedia ieee workshop multimedia signal processing los angeles ca december pp 

chou rate distortion optimized sender driven streaming best effort networks workshop multimedia signal processing october pp 

compression reliable transmission digital image video signals ph thesis university illinois may 
de ross optimal streaming layered video joint scheduling error concealment submitted april 
tan zakhor 
real time internet video error resilient scalable compression tcp friendly transport protocol ieee transactions multimedia vol 
june 
van der radha unequal packet loss resilience fine granular scalability video ieee transactions multimedia vol 
pp 
december 
loguinov radha retransmissions schemes real time streaming internet proc 
infocom anchorage may 
iso iec jtc sc wg information technology generic coding audio visual objects visual iso iec amd december 
de reisslein ross evaluating streaming fgs rate distortion traces submitted www eurecom fr june 
de ross implementation adaptive streaming stored mpeg fgs video proc 
ieee icme lausanne switzerland august pp 

iso iec jtc sc wg report mpeg visual fine granularity scalability tools verification tests may 
cai shen wu li zeng error concealment fine granularity scalable video transmission proc 
ieee icme lausanne switzerland september pp 

microsoft iso iec video software microsoft 
finite state markovian decision processes academic press new york 
linear programming finite markovian control problems mathematisch centrum amsterdam 
altman constrained markov decision processes chapman hall 
ross randomized past dependent policies markov decision processes multiple constraints operations research vol 
pp 
may june 
karmarkar new polynomial time algorithm linear programming combinatorica pp 


