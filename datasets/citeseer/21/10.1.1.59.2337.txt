reliable content routing protocol structured peer peer networks wang jin jun wei jing li institute software chinese academy sciences beijing china wj lij iscas ac cn graduate school chinese academy sciences beijing china 
done building content publish subscribe systems structured networks technologies combined better support large scale highly dynamic systems 
existing content routing protocols provide weak reliability guarantee structured networks 
designed new type content routing protocol structured networks identifier range routing irbr protocol organizes subscriptions basis identifier range subscribers 
provides strong reliability guarantee efficient event delivery 
experimental results demonstrate routing efficiency protocol 
publish subscribe pub sub loosely coupled communication paradigm distributed computing environments 
pub sub systems publishers publish information event brokers form events subscribers subscribe particular category events system event brokers ensure timely reliable delivery published events interested subscribers 
advantage pub sub paradigm information producers consumers full decoupled time space flow suitable large scale highly dynamic distributed systems 
publish subscribe systems generally divided categories content 
subject systems event belongs fixed set subjects called topics channels groups 
publishers required label event subject name subscribers subscribe events particular subject 
content systems events longer divided different subjects 
subscriber defines filter internal structure events events meet filter sent subscriber 
compared subject pub sub systems content systems expressive flexible enable subscribers express interests finer level granularity 
supported national grand fundamental research program china cb national hi tech research development program china aa national natural science foundation china 
meersman tari eds coopis doa odbase lncs pp 

springer verlag berlin heidelberg wang large scale content publish subscribe system usually contains event brokers broker serves certain number clients publishers subscribers 
systems key technical problems routing protocol messages usually called content routing protocol route messages subscriptions events sending nodes destination nodes 
contentbased routing protocols significantly affect efficiency reliability scalability content pub sub systems 
lot content routing protocols proposed protocols static network topology lack adaptive ability node failures changing topology 
years works research failure recovery routing reconfiguration content pub sub systems building reliable content pub sub system remains challenge 
hand structured networks pastry tapestry chord gained popularity platform construction large scale distributed systems 
nodes networks organized directed graph specific structure length path nodes usually log pre defined parameter max number nodes networks 
structured networks advantages decentralization central control points needed selforganization nodes dynamically arrive depart 
multiple paths nodes networks provide high level fault tolerance message delivery 
numerous neighbors node fail simultaneously node find path deliver message step destination address 
people tried build content pub sub systems structured networks hoping improve fault tolerant ability pub sub systems advantages structured networks 
existing content pub sub systems structured networks traditional content routing protocols minor improvements hardly integrated highly dynamic networks 
result systems weaken reliability guarantee event delivery 
systems require existence special nodes rendezvous points networks 
rendezvous points provide centralized services pub sub system loads heavy average nodes 
result systems lose decentralization load sharing features structured network 
characteristics structured networks design new type content routing protocol pub sub systems identifier range routing irbr protocol 
naturally integrated routing protocol structured networks fault tolerance mechanism structured networks provide high level reliability guarantee event delivery 
long message publishing nodes subscribing nodes network subscribers receive subscribed events exactly 
time irbr protocol high efficiency event routing 
compared existing content routing protocols structured networks irbr protocol disseminate event interested subscribers network traffic 
irbr protocol implemented structured networks routing protocols pastry tapestry 
developed prototype reliable content routing protocol structured peer peer networks pub sub system pastry implement irbr protocol 
experimental results demonstrate routing efficiency fault tolerance protocol 
remainder organized follows 
section briefly introduce content routing protocols routing protocol pastry 
section discuss related 
section give preliminaries 
section introduce irbr protocol 
section analyze experimental results 
section conclude summary 
background content routing protocols content routing protocols divided categories precise routing imprecise routing 
precise routing protocols aim minimize network traffic event brokers imprecise routing protocols aim lessening processing load event brokers sacrifice network efficiency :10.1.1.100.2117
mainly focus precise routing protocols 
typically uncertain number receivers message event subscription content pub sub systems 
result precise contentbased routing protocols certain type application level broadcast protocol optimization methods avoid unnecessary message delivery 
dissemination events main optimization method detect interested subscribers destination subnet 
dissemination subscriptions main optimization method calculate covering relations filters 
underlying broadcast protocols traditionally types precise content routing protocols spanning tree forwarding reverse path forwarding 

spanning tree forwarding type protocol event brokers system organized tree structure 
broker receives subscription clients subscription forwarded current broker root broker message delivery optimized covering relation filters 
broker receives published event clients event disseminated spanning tree forwarding broadcast algorithm event forwarded current broker root broker broker path forwarding event children interested event 
disadvantages protocol include single points failure performance bottleneck root node tree structure 
siena jedi proposed hierarchical topology event brokers routing protocols belong type 

reverse path forwarding protocol uses source forwarding broadcast algorithm disseminate subscriptions reverse path forwarding broadcast algorithm disseminate events 
event broker knows spanning tree advance 
broker receives subscription clients forwards sub wang scription brokers spanning tree message delivery optimized covering relation filters 
event broker builds event dissemination tree reverse paths subscriptions 
broker receives published event clients event forwarded brokers event dissemination tree 
advantage protocol equally distributes workload brokers 
main disadvantage broker network simultaneously belongs multiple event dissemination trees routing information broker hardly replaced brokers 
broker fails routing reconfigure system complex 
routing protocols gryphon peer peer structure siena belong type 
decrease network traffic resulting subscribing operation systems siena hermes confine clients ability publish events requiring client send advertise message publishes events 
advertise message states constraints published events meet disseminated brokers source forwarding algorithm 
subscription message disseminated reverse path forwarding algorithm reverse paths advertise messages reach corresponding brokers 
way network traffic caused subscribing operation decreased cost extra advertise message delivery 
method applicable applications just clients publish events events meet certain constraints publishing ability clients don change frequently 
routing protocol pastry pastry simple efficient structured network 
pastry node unique identifier digit number base pastry divides identifier space different identifier ranges prefix identifiers outgoing edge node takes charge certain identifier range 
node outgoing edges corresponding identifier ranges constitute routing table 
suppose node identifier routing table rt view rt set rt prefix nodeid address entry routing table means current node nodeid hop destination nodes identifier begins prefix ip address nodeid address 
node identifier nodeid representative nodes identifier range prefix 
example suppose routing table node identifier shown 
node prefix network corresponding routing entry routing table 
shows division identifier space node 
rectangle tree means identifier range root rectangle means identifier space 
leaf rectangle identifier corresponding item routing table 
prefix routing table length shares digits identifier current node different number th digit 
reliable content routing protocol structured peer peer networks suppose node wants send message node 
node looks routing entry prefix routing table gets hop sends message node 
node looks routing entry prefix routing table sends message corresponding address 
total number hops message 
pastry provides high level fault tolerance 
forwarding message current node finds hop failed forward message idea greedy method choose node routing table identifier closest destination identifier forward message node 
time try find node corresponding identifier range repair routing table 
prefix nodeid address xxx xx xx xx xx self routing table node identifier space division node fig 

example routing table pastry node related years content pub sub systems built structured networks 
mainly types routing protocols systems 
scribe scribe subject pub sub system built pastry 
special node called rendezvous network subject 
node creates subscription subscription message forwarded corresponding rendezvous 
rendezvous builds event dissemination tree reverse paths subscription messages 
node publishes event event forwarded corresponding rendezvous disseminated interested nodes event dissemination tree 
detect failures event dissemination tree node periodically send heartbeat messages children tree 
node received heartbeat message time suspect parent node failed send message path rendezvous repair event dissemination tree 
scribe just provide weak reliability guarantee event routing failure repairing period event dissemination trees nodes may get events subscribed 
furthermore protocol disadvantages performance bottlenecks single points failure rendezvous nodes 
wang hermes tam routing protocol scribe extension provide content subscriptions 
hybrid systems combination subject system content system expressive flexible pure content system 
time provide higher level reliability guarantee scribe 

reverse path forwarding built pure content pub sub system chord traditional reverse path forwarding protocol 
weakens semantic event delivery guarantee delivery events interested subscribers 
routing protocols event dissemination tree built event published 
structured network due dynamic arrival departure nodes possibility pre built event dissemination tree broken event published 
result subscribers inevitably lose events failure repairing period event dissemination trees protocols just provide weak reliability guarantee event delivery 
comparison existing content routing protocols structured networks irbr protocol advantages provides higher reliability guarantee subscribers receive subscribed events long message publishing nodes subscribing nodes network efficient event dissemination published event arrive subscribed nodes network traffic supports pure content pub sub systems hybrid pub sub systems 
routing protocol bayeux somewhat similar irbr protocol 
bayeux subject pub sub system built tapestry subject corresponding rendezvous node network 
node creates subscription subscription message forwarded corresponding rendezvous rendezvous sends back response message subscribing node 
paths response messages form event dissemination tree rendezvous 
bayeux efficient event delivery provide high level faulttolerance node event dissemination tree maintain subscriber list records subscribers current node forward events 
subscriber list may large take lot resources node 
furthermore cost matching incoming event subscriptions largely determined size subscription list 
compared routing protocol bayeux irbr protocol support pure content pub sub system node needs maintain information workload node decreased 
triantafillou proposed content pub sub system chord just discussed distributed matching algorithm touch routing protocol issues 
reliable content routing protocol structured peer peer networks preliminaries architecture overview pub sub system structured network described layered architecture shown 
peer peer layer connects event brokers structured network event notification layer takes charge event dissemination brokers application layer application publishes subscribes events 
irbr protocol routing protocol event notification layer built top peer peer layer 
peer application layer event notification layer peer peer layer fig 

architecture overview peer application layer event notification layer peer peer layer topology pub sub systems structured networks divided categories super peer pure peer 
super peer structure hermes node network just works event broker broker connecting clients outside network 
pure peer structure scribe bayeux node network works event broker client 
structures substantial differences see super peer structure special form pure peer structure multiple application instances application layer node 
sake simplicity discussion suppose pub sub system built pure peer structure just instance application layer node 
event notification layer interacts layers means operations operation may include parameters 
event notification layers different nodes interact means messages message may include parameters 
differentiate operations messages denote operations form operation type parameter lists subscribe denote messages form message type parameter lists subscription sp dp 
generally speaking event notification layer provide operations upper layer subscribe filter application layer interested events meet constraint filter 
unsubscribe filter application layer longer interested events meet constraint filter 
publish event application layer publishes new event 
wang application layer provide operation event notification layer notify event event notification layer notifies application layer arrival subscribed event 
protocol overview characteristics structured networks easily build spanning tree node idea responsibility delegation 
node spanning tree takes charge certain identifier range 
root node takes charge identifier space node takes charge identifier range part identifier range parent 
procedure build spanning tree peer follows sake clarification call nodes network peers call nodes spanning tree nodes subsection root spanning tree peer 
layer nodes spanning tree outgoing neighbors peer responsibility layer node corresponding identifier range routing table root node 
layer node children spanning tree outgoing neighbors corresponding identifier ranges overlapped responsibility layer node responsibility child overlapped part identifier range 
build layers spanning tree way 
straightforward broadcast algorithm structured networks source forwarding algorithm 
el implemented broadcast algorithm chord idea 
irbr protocol subscriptions events disseminated source forwarding broadcast algorithm 
event broker receives subscription clients send subscription spanning tree 
message delivery optimized covering relation filters 
broker receives subscription concerned incoming edge message comes identifier range subscriber belongs outgoing edge peer reach subscriber 
way spanning tree peer event dissemination tree 
broker receives published event clients send event spanning tree 
construction procedure spanning tree see path root node node tree ideal path peers network 
event dissemination trees scribe protocol reverse path forwarding protocol built reverse paths subscription messages 
structured network direct graph number hops peer peer number hops usually larger peer peer irbr protocol certainly efficient event delivery protocols 
event dissemination tree irbr protocol built dynamically time event publishing change neighbors time subscribing reliable content routing protocol structured peer peer networks publishing influence event delivery 
message just needs sent node destination identifier range specific node improves reliability guarantee protocol 
data structure suppose filter denote predicate event matches filter 
denote set events match filter filters denote predicate covers say larger scope covers event notification layer node maintains filter table data structure needed irbr protocol 
suppose filter table node ft abstractly represent set ft prefix filter entry called filter entry filter table means identifier range prefix node interested filter different entries table prefix 
prefix filter entries equal identifier current node meaning application layer current node interested certain events 
prefixes identifier current node corresponding entry routing table pastry 
different event models matching algorithms different implementations filter table 
example filters organized parallel searching tree gryphon organized trie structure xtrie 
irbr protocol rely specific implementation filter table 
irbr protocol basic operations subscribing suppose node identifier application layer executes operation subscribe event notification layer saves filter entry filter table sends subscription message nodes 
format subscription message follows subscription subscriber prefix filter prefix subscriber prefix means identifier range subscriber filter means filter subscription prefix means destination identifier range message 
node sends subscription message node node forward message nodes prefix prefix 
application layer node executes subscribe event notification layer send message subscription sp re prefix node re nodeid entry re routing table sp prefix length re prefix 
example suppose application layer node executes sub wang scribe 
event notification layer node send message subscription node message subscription node message subscription node event notification layer node receives message subscription sp dp perform steps save filter entry sp filter table 
filter entry fe sp fe unnecessary deleted 
entry re routing table send message subscription sp re prefix node re nodeid re prefix begins dp way subscription message arrive nodes network hops 
algorithm essentially source forwarding broadcast algorithm 
know inefficient message broadcasted network subscribing operation form optimization mechanism 
reverse path forwarding protocol optimizes dissemination subscription messages covering relation subscriptions neighbors new subscription covered subscription neighbor node subscription message need forwarded 
due dynamic nature structured networks neighbors node varying time time idea inapplicable environment 
node structured network way divides global identifier space 
words total entries identifier range entry routing table fixed just representative identifier range 
irbr protocol filter table node organized basis identifier ranges optimize message delivery covering relation filters neighboring identifier ranges 
application layer executes subscribe event notification layer checks filter table find identifier ranges defined filters scope larger uses information reduce destination identifier ranges subscription message 
example suppose application layer node executes operation subscribe 
node sends subscription message entry routing table digit prefix 
filter table node digit prefix filter node network known node prefix interested current node need send subscription message nodes prefix 
change filter tables nodes shown 
entry filter table node digit prefix filter node network known node prefix interested current node need send subscription message nodes prefix 
way greatly decrease network traffic caused subscribing operation 
increasing subscriptions messages exchanged subscribing operation 
reliable content routing protocol structured peer peer networks node id filter table node id filter table initial state node filter node executing subscribe fig 

change filter tables resulting subscribing operation application layer node executes operation unsubscribe filter event notification layer inform nodes longer interested time canceled filter may covered filters neighboring identifier ranges event notification layer send covered filters certain identifier ranges 
define message type serve operation 
message indicates identifier range cancel filter add filters 
format message follows subscriber prefix canceled filter added filters prefix subscriber prefix means identifier range requester canceled filter means canceled filters added filters means added filters prefix means destination identifier range message 
application layer node executes unsubscribe event tion layer perform steps ft ft set add filters len length rei rt length rei prefix len send message sp add filters re prefix re nodeid sp prefix length rei prefix fe fe ft length fe prefix len fe filter need send message identifier ranges procedure finishes 
add filters add filters fe filter fe ft length fe prefix len fe filter len len repeat procedure step step 
example suppose application layer node executes unsubscribe 
node sends message prefix entry routing table digit prefixes 
filter table node digit prefix filter identifier range prefix interested node need send message nodes prefix 
result states filter tables nodes return 
wang entry filter table node digit prefix suppose filter node send message prefix entry routing table digit prefixes 
filter entry digit prefixes cover node send message entry routing table digit prefixes 
change filter tables nodes shown 
node id filter table node id filter table initial state node executing unsubscribe fig 

change filter tables resulting operation node receives message nodes updates filter table forwards message nodes prefix prefix 
publishing application layer node executes operation publish event event notification layer send notification messages inform nodes 
format notification message follows notification event prefix event means published event prefix means destination identifier range message 
application layer node executes publish event notification layer check filter table get destination identifier ranges notification messages 
entry re routing table exists filter entry fe re prefix filter table holds event notification layer send message notification re prefix node re nodeid 
node suppose identifier receives message notification dp event notification layer follows filter entry filter table holds notify application layer arrival event 
routing entry re routing table re prefix begins dp filter entry fe re prefix filter table holds send message notification re prefix node re nodeid 
hops notification message arrive nodes interested event 
shows dissemination tree event published node 
rectangle node means filter table node 
suppose node executed subscribe node executed subscribe hold 
reliable content routing protocol structured peer peer networks fa fb notification notification notification notification fig 

dissemination tree event hold fault tolerance mechanism scribe protocol reverse path forwarding protocol event dissemination tree irbr protocol built dynamically time event publishing 
node receives subscription update filter table identifier range subscriber 
node receives event match entries filter table forward event current neighbors matched identifier ranges 
change neighbors time subscribing time publishing influence event delivery 
hand irbr protocol message event subscriptions sent node identifier range specific node receiving node forward message nodes identifier range 
failure specific node link prevent message reaching nodes improves reliability guarantee protocol 
due node failure link failure node may fail send message neighbor identifier range 
irbr protocol fault tolerant mechanism structured networks deal failures 
define message type redirect encapsulates original message routes message node identifier range 
format redirect message follows redirect middle id prefix original message middle id means destination identifier redirect message prefix means destination identifier range original message original message means content original message 
value middle id middle identifier value identifier range prefix prefix 
example identifier digit number base value middle id prefix 
forwarding subscription notification messages node fails send message neighbor identifier range event notification layer encapsulates original message redirect message routing mechanism network send redirect message middle id 
network find proper path forward redirect message node path closer identifier middle id node 
forwarding process redirect message current node prefix prefix message forwarded transformed original message processed current node 
wang node redirect message prefix prefix system believe living nodes prefix prefix 
message discarded node redirect message send message asking nodes network cancel subscription identifier range prefix prefix 
node recovers failure attend network new node initialize filter table 
pre defined subscriptions defined 
method ensure long message publishing nodes subscribing nodes subscribing nodes lose events subscribed great step existing pub sub system structured networks 
performance evaluation experimental setup developed prototype pub sub system implement irbr protocol 
performance prototype system evaluated variety simulated workloads 
experiments discussed performed common notebook pc intel pentium iv cpu ghz mb ram running windows xp professional jdk 
prototype system built open source implementation pastry free pastry 
freepastry provides network simulator simulate large numbers nodes physical computer 
experiments number nodes network 
experiments identifier node digit number base system contain nodes 
evaluate routing efficiency irbr protocol implement content routing protocols structured networks scribe protocol reverse path forwarding protocol call rpf protocol follows compare routing efficiency protocols environment workloads 
experiments scribed protocol suppose rendezvous network 
main operations pub sub system subscribe publish mainly observe values different numbers subscriptions average number messages exchanged subscribing operation reflects routing efficiency subscribing operations average number messages exchanged publishing operation reflects routing efficiency publishing operations 
subscribing operation protocols covering relation filters optimize message delivery number messages exchanged largely influenced probability covering relations filters 
define parameter covering rate meaning probability randomly selected filters 
publishing operation number messages exchanged largely influenced number nodes interested event 
reliable content routing protocol structured peer peer networks nodes exclude publishing node interested event messages exchanged event delivery 
define parameter matching rate meaning probability matching randomly selected events randomly selected filters 
experiments randomly generated events filters meet covering rate matching rate 
content event set attribute value pairs 
attribute double data type value randomly generated zone 
content subscription set attribute value pairs values randomly generated zone 
suppose number total attributes number attributes subscription number attributes event ae covering rate matching rate experimental results shows average number messages exchanged subscribing operation corresponding covering rate 
shows average number messages exchanged subscribing operation corresponding covering rate 
scribe protocol subscription message just needs sent node rendezvous certainly needs exchange number messages 
figures see irbr protocol higher routing efficiency rpf protocol 
reason rpf protocol aggregates filters basis neighbor nodes irbr protocol aggregates filters basis identifier ranges filter covered filters irbr protocol 
number messages rpf irbr scribe subscriptions number messages rpf irbr scribe subscriptions covering rate covering rate fig 

average number messages exchanged subscribing operation shows average number messages exchanged publishing operation corresponding matching rate 
wang number messages scribe rpf irbr subscriptions number messages scribe rpf irbr subscriptions matching rate matching rate fig 

average number messages exchanged publishing operation shows average number messages exchanged publishing operation corresponding matching rate 
figures see irbr protocol efficient event delivery protocols 
propose new type content routing protocol structured networks identifier range routing irbr protocol 
naturally integrated routing protocol structured networks advantages comparison existing pub sub systems structured networks supporting pure content pub sub systems providing higher level reliability guarantee requiring network traffic event dissemination purely decentralized special nodes rendezvous needed 
considered concurrent execution operations different nodes take mechanisms ensure concurrency correctness protocol 
detail description concurrency mechanism seen 
challenges ahead 
example applications requirement durable subscription 
words events published subscriber disconnected retained delivered subscriber reconnects 
durable subscription easily implemented centralized manner implement network decentralized way difficult problem 

th 
eugster felber guerraoui 
kermarrec 
faces publish subscribe 
acm computing surveys reliable content routing protocol structured peer peer networks 
carzaniga rosenblum wolf content addressing routing general model application 
technical report cu cs department computer science university colorado boulder 
segall arnold boot henderson phelps content routing elvin 
proceedings auug 

cugola picco murphy dynamic reconfiguration distributed publish subscribe middleware 
proceedings rd international workshop software engineering middleware 

shen self stabilizing routing publish subscribe systems 
proceedings third international workshop distributed event systems debs 

costa picco cugola introducing reliability contentbased publish subscribe epidemic algorithms 
proceedings nd international workshop distributed event systems debs 

rowstron druschel pastry scalable distributed object location routing large scale peer peer systems 
proceedings ifip acm middleware conference 

zhao kubiatowicz joseph tapestry infrastructure fault tolerant wide area location routing 
technical report 
ucb csd computer science division university california berkeley 
stoica morris karger kaashoek balakrishnan chord scalable peer peer lookup service internet applications 
proceedings sigcomm 
ratnasamy francis handley karp shenker scalable content addressable network 
proceedings sigcomm 
carzaniga rosenblum wolf design evaluation wide area event notification service 
acm trans 
computer systems 
banavar chandra mukherjee strom sturman efficient multicast protocol content publish subscribe systems 
proceedings th ieee international conference distributed computing systems 

felber scalable protocol content routing overlay networks 
proceedings nd ieee international symposium network computing applications 
liu wolf yu zhang clustering algorithms content publication subscription systems 
proceedings nd ieee international conference distributed computing systems 
wang qiu achlioptas das larson wang subscription partitioning routing content publish subscribe networks 
proceedings th international symposium distributed computing 
cao singh 
efficient event routing content publish subscribe service networks 
proceedings rd conference ieee communications society infocom 
dalal metcalfe reverse path forwarding broadcast packets 
communications acm 
cugola fuggetta jedi event infrastructure application development opss wfms 
ieee trans 
software engineering 
large scale content publish subscribe systems 
phd thesis 
darmstadt university technology germany 

bacon hermes distributed event middleware architecture 
proceedings st international workshop distributed event systems debs 
wang 
castro druschel 
kermarrec rowstron scribe large scale decentralised application level multicast infrastructure 
ieee journal selected areas communications 
tam 
jacobsen building content publish subscribe systems distributed hash tables 
proceedings st international workshop databases information systems peer peer computing 

buchmann peer peer approach content publish subscribe 
proceedings nd international workshop distributed event systems debs 

zhuang zhao joseph katz kubiatowicz bayeux architecture scalable fault tolerant wide area data dissemination 
proceedings th international workshop network operating system support digital audio video nossdav 

triantafillou 
content publish subscribe structured networks 
proceedings rd international workshop distributed eventbased systems debs 

el brand haridi efficient broadcast structured networks 
proceedings nd international workshop peer peer systems iptps 

chan felber garofalakis rastogi efficient filtering xml documents xpath expressions 
vldb journal 
rice university freepastry project 
freepastry rice edu freepastry 

wang jin wei li efficient fault tolerant content routing protocol structured peer peer networks 
technical report institute software chinese academy sciences 

