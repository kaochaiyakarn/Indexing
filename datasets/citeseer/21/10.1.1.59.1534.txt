impact heterogeneous bandwidth constraints dht multicast protocols ashwin bharambe sanjay rao venkata padmanabhan srinivasan seshan hui zhang carnegie mellon university purdue university microsoft research consider support applications video broadcasting dhts 
focus investigations considering impact heterogeneity outgoing bandwidth capabilities nodes scribe representative relatively mature dht multicast protocol 
expose important issues arise due mismatch id space underlies dht outgoing bandwidth constraints nodes 
dhts originally developed applications peer peer file sharing mind considerable interest years applying dhts overlay multicast applications 
dht approaches focus maintaining structure virtual id space enabling scalable efficient unicast routing node identifiers unicast routes create multicast distribution trees 
approach contrast approaches primary consideration adding links overlay topology application performance 
principal reasons advocated approach 
dhts provides generic primitive benefit wide range applications overlay multicast 
second dht overlay simultaneously support maintain large number overlay applications multicast trees 
help achieve lower overheads compared constructing maintaining seperate overlays 
dht approaches potential advantages key unknown application performance 
achieving performance dhts active ongoing area research 
explore issues enabling highbandwidth broadcasting applications dhts 
exploration guided design lessons learnt experience deploying overlay broadcasting system 
particular focus investigation considering implications key issue heterogeneous outgoing bandwidth constraints nodes overlay 
heterogeneity arises due presence hosts various access technologies cable modem dsl ethernet summarized 
event low medium high avg speed speed speed deg kbps mbps mbps deg 
deg 
deg 
sigcomm slashdot gnutella fig 

constitution hosts various sources 
deg refers model children nodes category support 
sigcomm slashdot refer different broadcasts operationally deployed broadcasting system overlay multicast 
gnutella refers measurement study peer characteristics gnutella system 
initial evaluation scribe representative relatively mature dht protocol overlay multicast 
experiments show imposing bandwidth constraints scribe result creation distribution trees high depth significant number non dht links links overlay tree part underlying dht 
trees high depth undesirable larger number ancestors node higher frequency interrupts due failure departure ancestors ultimately poorer application performance 
non dht links undesirable restrict benefits route convergence loop free properties dht routing incur maintenance costs addition dht infrastructure 
find key cause issues observed mismatch id space underlies dht structure node bandwidth constraints 
discuss potential ways solve problem 
conclude issues straight forward address 
ii 
evaluation framework evaluation motivated video broadcasting applications 
applications involve data delivery single source set receivers 
non interactive place tight constraint latency 
assume constant bit rate cbr source stream assume nodes interested content point time members distribution tree contribute bandwidth system 
outgoing bandwidth limit host determines degree fanout overlay multicast tree maximum number children forward stream 
categorize hosts constrained links cable dsl kbps intermediate speed links lines mbps high speed links mbps better 
typical streaming video rates order second quantize degrees low medium high speed hosts 
degree nodes termed non contributors 
higher speed connections degree bounded policy view shared nature links actual outgoing bandwidth 
summarizes constitution hosts seen measurement studies real internet broadcast events 
average degree system defined total degree nodes including source divided number receivers nodes source 
focus regimes average degree greater indicates feasible construct tree 
iii 
pastry scribe dht proposals multicast years choose focus scribe 
scribe mature proposals dht approaches defined mechanisms honor node degree constraints 
follow splitstream builds top scribe considers data delivery multiple trees single tree improve resiliency data delivery 
draw extensions proposed splitstream consider single tree data delivery 
discuss implications multiple tree solutions section viii 
scribe built top pastry dht protocol targeted settings involve support large number multicast groups 
group may involve subset nodes pastry system members pastry part particular multicast group may recruited forwarders scribe tree 
evaluation assumes participating members pastry part scribe tree 
node pastry assigned unique bit nodeid thought sequence digits base pastry parameter 
pastry node network nodes maintains routing table containing log rows columns 
entries th row routing table refer nodes nodeids share digits local node nodeid 
routing mechanism generalization hypercube routing subsequent hop route destination shares longer prefixes destination nodeid 
scribe utilizes pastry routing mechanism construct multicast trees manner multicast group corresponds special id called topicid 
multicast tree associated group formed fig 

issues heterogeneous degree constraints 
represent nodes high medium zero non contributor degrees respectively entire subtrees bottom rejected subtree connected source top saturated 
depth poor heterogeneous degree constraints 
union pastry routes group member topicid 
messages multicast root members reverse path forwarding 
key issue scribe number children node scribe tree high indegree node underlying pastry infrastructure number nodes pastry hop routing topicid 
general may greater permitted node bandwidth constraints 
order tackle overloading nodes authors scribe splitstream proposed mechanisms pushdown overloaded node receives request potential child drop existing child desirable child orphaned node contact children potential parent process goes recursively 
choosing criteria determine child displace important issue 
discuss section anycast 
nodes system non zero degree constraints pushdown guaranteed terminate leaf nodes capacity 
presence non contributor degree nodes pushdown leaf capacity 
tackled anycast procedure provides efficient way locate node free capacity 
iv 
issues heterogeneous constraints evaluation scribe focuses concerns arise heterogeneous degree constraints rejections tree constructed protocol attain sub optimal configurations example shown 
system sufficient bandwidth resources enable connectivity nodes 
subtree rooted source saturated non contributors bandwidth resources nodes disconnected subtrees remains unutilized 
nodes disconnected subtrees eventually rejected forced exit multicast session 
high depth optimal configuration terms depth nodes contribute highest degree form highest levels lower degree nodes lower levels 
absence mechanisms explicitly favor construction trees protocol produce trees high depth shown 
believe depth metric important significantly influences application performance 
general overlay multicast application performance seen node depends factors frequency interruptions due failure ancestor due congestion upstream link ii time takes protocol recover interruptions 
frequency interruptions node experiences turn depends number ancestors node depth node 
non dht links concerns apply performance centric protocols dht designs need deal additional concerns regard preserving structure dht 
particular pushdown anycast operations described section iii help scribe cope heterogeneous node bandwidth constraints may result creation parent child relationships correspond links part underlying pastry overlay 
term links non dht links 
believe non dht links undesirable route convergence loop free properties dht routing longer apply non dht links exist significant numbers ii links require explicit tree maintenance reduces benefits dhts terms amortizing overlay maintenance costs multiple multicast groups applications 
techniques evaluated variants pushdown algorithm evaluated scribe 
policy preempt id pushdown policy implemented optimized minimize depth heterogeneous environments 
second policy preempt degree pushdown new policy introduced scribe improve depth heterogeneous environments 
preempt id pushdown saturated node receives request potential child preempts child shares longer prefix topicid orphaned node contacts child continues pushdown orphaned node shares prefix match child 
child shares prefix orphaned node continue pushdown operation picking random child anycast operation employed leaf node reached parent 
preempt degree pushdown node degree primary criterion pushdown 
saturated node receives request potential child preempts child say lowest degree provided higher degree orphaned node picks random child degree equal greater continues pushdown 
anycast operation employed leaf node reached parent 
preempt degree pushdown improve depth trees produced scribe compared preempt id pushdown lead creation larger number non dht links id longer key criterion pushdown 
preempt degree pushdown create perfectly balanced trees example node lower degree node mechanism place displace doing require deviation creation additional non dht links 
fact believe easy construct trees low depth low fraction non dht links 
discuss section vii 
vi 
evaluation details original scribe splitstream implementation experiments 
scribe implementation scribe level links maintained separately underlying pastry links 
pastry changed routing table due optimizations scribe level link appear non pastry non dht link 
order avoid counting associate dht non dht flag scribe link established 
experiments poisson arrival pattern pareto distributed stay time clients 
choices motivated group dynamics characteristics observed overlay multicast deployments mbone measurements 
experiments duration seconds assume mean arrival rate joins second 
experiments assume nodes mean stay time seconds minimum stay time seconds parameter pareto distribution 
corresponds steady state group size slight departure anycast operation employed child shares prefix orphaned node 
observed better performance depth homogeneous environments optimization 
intuition pushdown tends better filling nodes higher tree anycast tends choose parents random locations tree 
possible pastry route table changes transform initial non dht scribe link dht link 
probability happening small 
fraction non dht links degree constraint fig 

fraction non dht links mean session homogenous environments various values node degree base node ids pastry 
fan ins time sec time sec time sec time sec time sec number nodes fig 

distribution fan degree nodes pastry 
axis degree pastry routing tables 
axis number nodes degree particular value 
curve presents distribution different times simulation 
exists sharp skew indicating small number nodes high degree persists simulation 
members 
focus bandwidth sensitive non interactive applications simply consider uniform delay network model 
vii 
empirical results results experiments scribe homogeneous heterogeneous degree constraints 
homogeneous environments assume nodes degree plots fraction non dht links scribe tree function sets bars set corresponding different value set consists bars shades different values base node ids pastry 
bar represents mean runs 
find fraction non dht links high configurations evaluate 
discuss factors contribute creation non dht links 
consider topicid 
represent nodes ids match topicid digit digit rest digits arbitrary 
join reconnect request node scribe routed hop node match digit topicid 
pushdown operations reverse path nature tree median depth preempt id pushdown preempt degree pushdown correlated preempt id average degree fig 

depth vs average degree heterogeneous settings 
compute mean depth node session compute median nodes 
fraction non contributors fixed 
fraction non dht links preempt id pushdown preempt degree pushdown correlated preempt id average degree fig 

fraction non dht links vs average degree heterogeneous settings 
fraction non contributors fixed 
construction scribe parents scribe tree nodes 
factor leading creation non dht links total bandwidth resources nodes may sufficient support nodes tree 
base node ids pastry ad average degree nodes system 
nodes represent fraction total nodes system expect able support fraction ad nodes system 
expect see ad links non nodes parents 
links non dht links 
links created pushdown operations described ii explicit mechanisms place prefer choosing dht links pushdown 
discussion expect number non dht links equal homogeneous environment nodes degree average degree ad 
partially explains fraction non dht links significantly higher estimate 
particular expect see non dht links 
non dht links constitute links tree 
believe due second factor contributed creation non dht links discuss paragraph 
plots cdf fan ins system various times simulation 
fanin node number nodes system node neighbor pastry 
see significant skew fan ins due skew scribe join requests hit non uniformly causing larger number non dht links 
results poor utilization available bandwidth resources nodes 
investigated potential factors may led skew 
instance considered resulted uniform delay model simulations 
preliminary experiments indicate skew exists topologies non uniform delays generated simulator reported 
believe skew arises due pastry join repair mechanisms new node picks routing table entries nodes system 
reduces join repair times overheads nodes joined earlier far picked neighbors compared nodes 
defer examination fundamental skew design pastry scribe eliminated simple heuristics 
heterogeneous environments experiments heterogeneous environments conducted nodes non contributors degree various average degree values 
changing average degree value results different fraction nodes medium degree higher degree degree 
compares depth scribe multicast tree created preempt id pushdown preempt degree pushdown heterogeneous environments 
depth computed follows compute mean depth node sampling depth different time instances compute medians nodes 
optimal median depth plotted configurations shown graph 
top curves correspond preempt id pushdown preempt degree pushdown 
preempt id pushdown performs significantly worse optimal 
expected mechanisms place optimize depth heterogeneous environments 
preempt degree pushdown performs better preempt id pushdown far optimal consistent discussions section shows fraction non dht links simulations preempt degree pushdown preempt id pushdown 
fraction non dht links range average degrees 
believe factors discussed homogeneous environments insufficient resources nodes skew degree pastry contributed creation non dht links 
discussed skew completely eliminated expect see ad non dht links due insufficient resources nodes ad average degree nodes system 
third important factor cause non dht links heterogeneous environments may desirable non nodes parents minimize depth trees 
example environment nodes degree optimal depth tree requires having nodes degree highest levels tree interior nodes 
fraction nodes degree nodes 
optimizing tree depth scribe potentially result larger fraction non dht links due need non nodes degree interior nodes 
consequently expect preempt degree pushdown higher fraction non dht links compared preempt id pushdown 
policies perform similarly 
believe factors causing non dht links dominate experiments 
summary experiments scribe indicates trees produced high depth large fraction non dht links 
factors cause creation non dht links scribe 
bandwidth resources nodes share prefix topicid may sufficient sustain nodes system 
second minimizing depth trees scribe requires utilizing higher degree nodes may share prefix topicid 
third factor skew degree pastry 
believe skew result specific heuristics employed pastry potentially minimized 
believe factors fundamental mismatch node bandwidth constraints node ids dht designs 
simple analysis shows factor lead creation ad non dht links ad average degree system base node ids pastry 
viii 
feasibility potential solutions sketch potential solutions consider ability address issues raised previous section id degree correlation natural question changing random id assignment dhts employing assignment node ids correlated node bandwidth constraints address issue 
evaluate potential techniques consider correlated preempt id heuristic nodes higher degrees assigned nodeids share longer prefixes topicid 
shows policy able achieve depths close optimal depth shows significantly lower fraction non dht links 
solution scenarios dht primarily specific multicast group disturbing uniform distribution dht nodeids undesirable adversely affect routing properties dhts 
dht particularly useful scenarios shared infrastructure wide variety applications including multicast sessions 
scenarios difficult achieve correlation node id node degree assignments trees 
multiple trees question issues involved tackled multi tree data delivery framework improve resiliency data delivery bandwidth management 
framework trees constructed tree different digit 
node interior node tree shares prefix topicid leaf node rest 
note direct application multi tree approach solve problem nodes belong multiple degree classes trees continue nodes multiple degree classes issues continue concern 
multiple trees virtual servers potential direction solving issues dhts combine multi tree data delivery framework concept virtual servers proposed 
idea node acquire number ids proportional degree multi tree data delivery framework 
concern approach completely concentrating resources higher degree node tree distributing trees giving policy interior disjointness 
performance implications need carefully evaluated 
ix 
summary discussion considered impact heterogeneity outgoing bandwidth constraints nodes overlay multicast scribe 
results indicate trees produced scribe tend large depth significant fraction non dht links 
key reason mismatch id space underlies dht structure node bandwidth constraints 
obvious satisfactory solutions address problem leading believe issues involved trivial 
motivated lessons learnt deploying overlay broadcasting system 
particular issue bandwidth heterogeneity considered experience highlights importance considering factors heterogeneity node connectivity restrictions due entities nats firewalls 
concerns pertain performance centric dht designs believe challenging address dht context structure imposed dhts 
significant progress improving performance dhts regard delay metrics relative delay penalty rdp believe important address challenges posed heterogeneity compelling case dhts support bandwidth demanding broadcasting applications 
acknowledgments anthony rowstron miguel castro access clarifications regarding scribe code 
bharambe agrawal seshan 
mercury supporting scalable multi attribute range queries 
acm sigcomm 
almeroth ammar characterization mbone session dynamics developing applying measurement tool 
tech 
rep git cc 
castro druschel kermarrec nandi rowstron singh splitstream high bandwidth content distribution cooperative environments 
proceedings sosp 
chu rao zhang case system multicast 
proceedings acm sigmetrics june 
chu early deployment experience overlay internet broadcasting system 
usenix annual technical conference june 
deering multicast routing internetworks extended lans 
proceedings acm sigcomm aug 
stoica zhuang shenker surana 
internet indirection infrastructure 
ieee acm transactions networking april 
jannotti gifford johnson kaashoek jr overcast reliable multicasting overlay network 
proceedings fourth symposium operating system design implementation osdi oct 
application layer multicast delaunay triangulations 
ieee globecom nov 
castro druschel rowstron scribe large scale decentralized application level multicast infrastructure 
ieee journal selected areas communications vol 
oct 
padmanabhan wang chou resilient peerto peer streaming 
proceedings ieee icnp nov 
rao lakshminarayanan surana karp stoica load balancing structured systems 
proceedings second international workshop peerto peer systems iptps 
ratnasamy handley karp shenker application level multicast content addressable networks 
proceedings ngc 
rowstron druschel pastry scalable distributed object location routing large scale peer peer systems 
ifip acm international conference distributed systems platforms middleware 
rowstron castro scribe implementation 
banerjee scalable application layer multicast 
proceedings acm sigcomm aug 
saroiu gummadi gribble measurement study peer peer file sharing systems 
proceedings multimedia computing networking mmcn january 
zhuang zhao kubiatowicz joseph 
bayeux architecture scalable fault tolerant wide area data dissemination 
proceedings nossdav apr 

