universal portfolios thomas cover stanford university october exhibit algorithm portfolio selection asymptotically outperforms best stock market 
im denote performance stock market day ij factor th stock increases day im ij ij denote proportion ij wealth invested th stock day factor wealth increased trading days 
consider goal wealth max achieved best constant rebalanced portfolio chosen stock outcomes revealed 
shown exceeds best stock dow jones average value line index time fact usually exceeds quantities exponential factor 
arbitrary sequence market vectors 
shown sequence portfolios gamma db gamma db yields wealth ln bounded sequence mild conditions achieves gamma gamma gamma theta gamma sensitivity matrix 
portfolio strategy exponential rate growth apparently unachievable departments statistics electrical engineering durand room stanford ca 
partially supported nsf ncr 

consider sequential portfolio selection procedure investing stock market goal performing knew empirical distribution market performance 
unwilling statistical assumption behavior market 
particular allow possibility market crashes occurring 
seek robust procedure respect arbitrary market sequences occur real world 
investigate natural goal growth wealth arbitrary market sequences 
example natural goal outperform best buy strategy beating investor look newspaper days 
propose ambitious goal 
motivate goal consider constant rebalanced portfolio strategies 
xm denote stock market vector investment period price relative ith stock ratio closing opening price stock portfolio proportion current wealth invested stocks 
considered column vectors factor wealth increases investment period portfolio consider arbitrary nonrandom sequence stock vectors fflr ij price relative stock day constant rebalanced portfolio strategy achieves wealth initial wealth normalized 
max denote maximum wealth achievable stock sequence maximized constant rebalanced portfolios 
goal achieve able show universal portfolio strategy past gamma perform asymptotically best constant rebalanced portfolio sequence price relatives 
may portfolio depend past relationship past 
stock sequence arbitrary malicious nature structure take advantage past beliefs expressed portfolio resulting wealth track proposed universal adaptive portfolio strategy performance weighted strategy specified bs db db integration set gamma dimensional portfolios wealth resulting universal portfolio initial universal portfolio uniform stocks portfolio time performance weighted average portfolios 
approximate computation section generalization algorithm section 
show ln gamma ln arbitrary bounded stock sequences 
exponent order 
refined analysis shows nj sense precise 
difficult summarize behavior relative arbitrariness sequence fact assume limiting distribution 
example limit ln assumed exist 
goal uniformly achieving specified partially achieved cover discrete valued stock markets theory compound sequential bayes decision rules developed robbins hannan robbins game theoretic theory blackwell 
natural investment goals samuelson arrow 
vast theory portfolios mean variance plane exemplified markowitz sharpe theory rebalanced portfolios known underlying distributions developed kelly mossin markowitz bell cover cover king cover barron cover algoet cover 
defense utility theory incompatibility utility theory asymptotic growth rate approach samuelson merton samuelson 
see departure model investment theories utility theory growth rate optimality 
goal max depends solely data depend underlying statistical assumptions 
theorem example provides finite sample lower bound performance universal portfolio respect case success rests entirely acceptance natural investment goal 
performance universal portfolio exhibited section numerous examples various pairs stocks 
general volatile uncorrelated stocks lead great gains best buy hold strategy 
stocks ibm coca cola show modest improvements 
elementary properties 
wish show wealth generated universal portfolio strategy exceeds value line index invariant permutations stock sequence notation ln max denote empirical distribution associated places mass particular note max max nw fn purposes comparison pay special attention buy hold strategies th basis vector 
note pi pi kj factor th stock increases investment periods 
result buy hold strategy associated th stock 
note properties target wealth proposition target exceeds best stock max proof maximization simplex right hand side maximization vertices simplex 
proposition target exceeds value line pi proof proposition shows target exceeds djia 
proposition target exceeds arithmetic mean ff ff ff proof exceeds arithmetic mean geometric mean maximum component stocks 
follows inspection depend order occur proposition invariant permutations sequence recall proposed portfolio algorithm resulting wealth pi useful way 
lemma db db wealth resulting universal portfolio average simplex 
proof note gamma db gamma db db gamma db product telescopes db db db db observe properties wealth achieved universal portfolio 
proposition universal portfolio exceeds value line index pi proof empirical cumulative distribution function induced applications jensen inequality writing db db nw fn ne fn ne ln ne ln dfn ne ln dfn ln pi wealth induced proposed portfolio dominates value line index stock sequence observe depends order sequence resulting wealth pi 
proposition invariant permutations sequence proof integrand pi db db pi db db invariant permutations observation guarantees crash worse consequences wealth bad days time sprinkled 
reason portfolio works 
main idea portfolio algorithm quite simple 
idea give amount db db portfolio manager indexed rebalancing strategy nw fn db db exponential rate pool wealth 
course dividing done time resulting average exponentials suitable smoothness conditions asymptotic exponential growth rate maximum achieves wealth achieved best constant rebalanced portfolio 
trap avoided put mass distribution market distributions 
done satisfactory way 
preliminaries 
introduce definitions conditions allow characterization behavior denote empirical probability mass function putting mass points portfolio achieve maximum pi equivalently nw fn portfolio achieves maximum 
max nw fn definition shall say stocks active time achieving 
stocks strictly active inequality strict achieving definition shall say full rank spans condition full rank usually true observed stock market sequences somewhat larger condition stocks active fails certain stocks dominated 
definition measures curvature maximum accounts second order behavior respect definition sensitivity matrix function market respect distribution gamma theta gamma matrix defined ij gamma xm gamma xm df gamma sensitivity matrix maximizes 
note ij gamma gamma gamma gamma lemma nonnegative definite positive definite stocks strictly active 
analysis assets 
wish show nj curvature volatility index 
show detail nj asymptotic lower bound develop explicit lower bounds market sequence develop upper bound invoking strong conditions market sequence 
section outlines proof assets 
investigate behavior stocks 
consider arbitrary stock vector sequence fflr proceed recast variable problem terms single variable 
portfolio choice requires specification parameter write gamma rewrite bx gamma max denote value achieving maximum 
section contains examples graphs 
universal portfolio gamma defined bs db db achieves wealth gamma ln ln bx gamma ln bx gamma df empirical cdf fx lemma wealth achieved universal portfolio db order characterize behavior define functions sequence define relative range sequence maxfx ij ij gamma minimum maximum taken 
gamma gamma maximizes max corresponds relative range price relatives denotes curvature ln maximum 
theorem arbitrary sequence stock vectors gamma ffl nj ffl gamma ffl ffl gammaffl ffl remarks theorem says roughly nj universal wealth factor presumably exponentially large turn additional stock universal portfolio costs additional factor factors negligible order exponent 
important mention theorem bound bound holds stock sequence bound volatility proof wish bound db 
expand maximizing portfolio noting different local properties different maximizing gamma gamma gamma 
lies examine terms term log target wealth time ii second term gamma df optimality iii third term gamma gamma df gammaj strict inequality time term provides constant second order behavior 
iv gamma bx gamma df bound fi fi fi fi fi gamma gamma df fi fi fi fi fi ffl exp nw gamma gamma gamma gamma gamma gamma df change variable gamma new range integration gamma gamma noting nw db gammab gamma nb gamma jn gamma ju du wish approximate normal integral 
ffl note gamma gamma gamma ffl ffl nj phi denote cdf standard normal phi gamma gammau du gamma measure degree maximum reasonable curvature unit interval 
ffl gammab gamma gamma jn gamma juj du ffl gamma ffl gamma jn ffl du gamma gamma jn ffl du gamma gamma ffl gamma gamma jn ffl du ffl gamma ffl phi nj ffl inequality gammax gamma phi gammax gammax obtain bound phi nj ffl ffl nj ffl gammaffl njn ffl ffl gamma ffla ffl gammaffl njn ffl ffl proves theorem 
explicit bounds theorem may useful practice cleaner summary performance weaker theorem 
theorem sequence stock vectors suppose ffi gamma ffi subsequence times 
lim inf nj subsequence 
proof conditions theorem theorem imply nj ffl gamma ffl nj bound ratio free choose ffl ffl noting letting ffl gamma proves theorem 
just shown nj show better 
consider subsequence times approximately equal function argue upper bounds nw db suffice limit performance wealth consider functions strictly concave ii bounded iii achieves maximum ffl plan pick subsequence times ln approaches 
expect limit points theorem compactness functions compact sets 
maximize fn subsequence times ii recall notation gammaw theorem establishes tightness lower bound theorem 
theorem ffl subsequence times satisfies conditions satisfying nj subsequence 
proof lower bound follows theorem 
laplace method integration ng du ng njg times differentiable bounded third derivative strictly concave maximizing delta open interval consequently db nw db nw nj theorem proved 
main theorem 
prove result assets assumption stocks active full rank int 
discuss removing conditions section 
example lack full rank reduces dimension existence inactive stocks 
need limit case describe behavior convergent develop explicit bounds lemma db db pi bs db db pi summary performance theorem 
theorem suppose ffl subsequence times strictly concave third partial derivatives bounded achieves maximum interior gamma gamma 
jj sense ratio right left hand sides converges subsequence 
proof outline define gamma pi gamma gamma gamma note vol dc gamma 
shall prove lower bound associated 
lemma universal portfolio algorithm yields db db uniformly distributed simplex uniform induces uniform gamma 
dc expand taylor series gamma maximizes 
drop dependence notational convenience 
assumption ln ln delta fn ln gamma expanding gamma gamma gamma gamma gamma gamma gamma fn gamma xm gamma xm gamma xm gamma may depend gamma gamma gamma xm pi gamma gamma ln gamma gamma gamma df gamma xm df gamma gamma xm gamma xm df gamma condition stocks strictly active implies lemma jj delta denotes determinant 
treat terms definition ii second term interior differentiable maximizes fn gamma xm gamma iii third term positive definite quadratic form 
iv fourth term gamma gamma gamma gamma fn gamma xm gamma xm gamma xm examine fn gamma xm gamma xm gamma xm note sigma gamma xm gamma gamma xm gamma xm gamma xm change variable gamma note new range integration gamma 
gamma gammac gammac sigma nw gamma sigma sigma gamma fn gamma xm gamma xm gamma xm note sigma gamma ju observing sigmau yields nw gamma gamma kuk lower bound gamma 
dc gamma gamma gamma kuk gamma du bounded techniques stock proof 
upper bound follows laplace method integration theorem theorem follows 
stochastic markets 
way see naturalness goal nw fn fn consider random investment opportunities 
independent identically distributed random vectors drawn known distribution function 
pi denote wealth time resulting initial wealth assets portfolio investment opportunity 
pi sigma ln ln op op strong law large numbers random variable observe order exponent growth rate wealth determined expected log wealth ln portfolio stock distribution 
follows achieves exponential growth rate wealth exponent 
breiman establishes stock vectors time varying portfolio strategy associated wealth sequence lim ln follows breiman finkelstein whitley barron cover algoet cover increasing levels generality stochastic process lim ln sn sequential portfolio 
asymptotically optimal sense highest possible exponent growth rate wealth 
omit proof 
theorem unique lie interior universal portfolio yields wealth sequence satisfying ln 
special case stocks independent identically distributed unknown universal portfolio essentially learns sense associated growth rate wealth equal achievable known 
examples 
test portfolio algorithm real data 
consider example brands kin ark stocks chosen volatility listed new york stock exchange 
year period brands increased price adjusted usual manner dividends factor kin ark increased price factor shown fig 

prior knowledge information enabled investor buy hold best stock earn profit 
closer look time series reveals cause regret 
table lists performance constant rebalanced portfolios gamma graph 
example current wealth proportions start trading day resulted increase factor fact best rebalanced portfolio year period yielding factor target wealth respect coarse quantization chosen 
universal portfolio achieves factor short target dominates factors constituent stocks 
daily performance stocks universal portfolio target wealth exhibited fig 

portfolio choice function time 
explicit analysis quantized integrals resulting replacements max max bs db db resulting wealth factor calculated telescoping takes place quantization verified expressed equivalent form arithmetic average associated constant rebalanced portfolios 
note calculation portfolio gamma example 
merely compute inner product column column table divide sum column obtain note particular universal portfolio equal log optimal portfolio respect empirical distribution past 
similar performed commercial metals kin ark period 
commercial metals increased factor kin ark factor fig 
investor wouldn want part kin ark alternative commercial metals available 

optimal constant rebalanced portfolio universal portfolio achieves outperforming stock 
see table put commercial metals mei shown table constrast examples ibm coca cola show lockstep performance barely outperforms constituent stocks shown 
final example crudely models buying percent margin 
suppose investment choices day commercial metals kin ark stocks percent margin 
margin loans settled daily percent annual interest rate 
stock vector ith day gamma gamma gamma gamma respective price relatives commercial metals kin ark day margin commercial metals yields factor kin ark factor stocks survive factors induced leverage 
random sample simplex portfolios listed table reveals optimal rebalanced portfolio results factor clearly beats factor achieved margin unavailable 
factors exceed performance best stock 
observe exceeds factor obtained stocks margin unavailable 
borne fact positive component calling small amount leverage posteriori optimal rebalanced portfolio 
general universal portfolio 
best rebalanced portfolio lies interior boundary face stocks active best rebalanced portfolio 
expect obtain previous bounds sn replaced achieved start mass face 
accomplish measure corresponding uniform distribution mg puts unit mass jsj dimensional face portfolio simplex 
mixture measures gamma sum oe mg generalized universal portfolio bs db db state results define theta sensitivity matrix respect active stocks smallest set stocks optimal rebalanced portfolios interior gamma 
gamma gamma asymptotic behavior concluding remarks 
try sensible ask universal portfolio works practice 
course examples encouraging universal portfolio outperforms constituent stocks 
ignored trading costs 
practice trade daily current empirical holdings far recommended rule thumb trade increase greater logarithm normalized transaction costs 
really interested take leaving stocks 
discuss target wealth best rebalanced portfolio prior knowledge stock sequence yields wealth nw grows exponentially fast infinity mild conditions 
example constituent stocks risk free asset interest rate ln universal portfolio yields gamma ln follows tend infinity exponent differing terms order ln state affairs expect real world 
certainly expect stock sequence full dimension slightly greater don expect stocks active 
expect stocks active 
important guarantees target growth rate strictly greater growth rate constituent stocks 
consequently believe universal portfolio achieve exponentially fast wealth relative ith stock time may need quite large exponential dominance manifests 
particular need large difference exponents stocks overcomes ln penalties incurred universality 
conclude leave constituent stocks exponentially strictly active stocks best rebalanced portfolio 

wish hal stern invaluable contributions obtaining analyzing stock market data 
wish referee helpful comments 
algoet cover asymptotic optimality asymptotic equipartition properties log optimum investment annals probability 
arrow 
essays theory risk bearing north holland american elsevier 
barron cover bound financial value information ieee trans 
information theory 
bell cover competitive optimality logarithmic investment math 
operations research 
bell cover game theoretic optimal portfolios management science 
blackwell 
controlled random walks proceedings international congress mathematics iii amsterdam north holland 
blackwell 
analog minimax theorem vector payoffs pacific journal mathematics vi 
breiman optimal gambling systems favorable games fourth berkeley symposium mathematical statistics probability 
cover 
algorithm maximizing expected log investment return ieee trans 
information theory 
cover empirical bayes stock market portfolios advances applied mathematics summary appears proceedings conference honoring herbert robbins springer verlag 
cover king convergent gambling estimate entropy english ieee transactions information theory 
finkelstein whitley optimal strategies repeated games adv 
appl 
prob 

characterization optimal multiperiod portfolio policies portfolio theory years essays honor harry markowitz ed 
elton gruber studies management sciences north holland amsterdam new york oxford 
hannan robbins asymptotic solutions compound decision problem ann 
math 
stat 
kelly 
new interpretation information rate bell systems technical journal 
markowitz 
portfolio selection journal finance viii 
markowitz 
investment long run new evidence old rule journal finance 
merton samuelson fallacy log normal approximation optimal portfolio decision making periods journal financial economics 
mossin 
optimal multiperiod portfolio policies business 
robbins 
asymptotically solutions compound statistical decision problems proceedings second berkeley symposium mathematical statistics probability berkeley university california press 
samuelson 
general proof diversification pays financial quantitative analysis ii 
samuelson 
lifetime portfolio selection dynamic stochastic programming review economics statistics 
samuelson 
mean log wealth big years act long journal banking finance 
sharpe 
simplified model portfolio analysis management science 

portfolio choice kelly criterion business econom 
statist 
proc 
amer 
stat 
assoc 

