learn beat best stock allan borodin ran el yaniv vincent department computer science university toronto technion israel institute technology bor vincent cs toronto edu cs technion ac il novel algorithm actively trading stocks 
traditional universal algorithms technical trading heuristics attempt predict winners trends approach relies predictable statistical relations pairs stocks market 
empirical results historical markets provide strong evidence type technical trading beat market beat best stock market 
doing utilize new idea smoothing critical parameters context expert learning 
portfolio selection problem portfolio selection ps problem challenging problem machine learning online algorithms course computational finance 
known see lugosi sequence prediction log loss measure viewed special case portfolio selection surprisingly certain worst case minimax criterion portfolio selection essentially harder prediction shown see thm 

qualitative difference practical utility universal sequence prediction universal portfolio selection 
simply stated universal sequence prediction algorithms various probabilistic worst case models practice known universal portfolio selection algorithms provide substantial benefit naive investment strategy see sec 

major pragmatic question computer program consistently outperform market 
closer inspection interesting ideas developed information theory online learning suggests promising approach exploit natural volatility market particular benefit simple persistent statistical relations stocks try predict stock prices winners 
non universal portfolio selection algorithm try predict winners 
motivation algorithm rationale constant rebalancing algorithms worst case study universal trading introduced cover 
proposed algorithm substantially beat market historical markets beats best stock 
presenting algorithm just simply making money 
course caveats obstacles utilizing algorithm 
large investors possibility goose laying silver golden eggs impossible 
ps algorithm modified universal investing fixed fraction initial wealth universal algorithm 
assume market stocks 
vt vt 
vt closing prices stocks tth day vt price jth stock 
convenient relative prices xt vt vt investment jth stock just tth period yields dxt dollars 
xt xt 
xt denote market vector relative prices corresponding tth day 
portfolio allocation wealth stocks specified proportions 
current dollar wealth invested stocks 
daily return portfolio market vector compound total return 
bn sequence portfolios 
bn market sequence 
xn bt xt 
portfolio selection algorithm deterministic randomized rule specifying sequence portfolios 
simplest strategy buy hold stocks portfolio denote strategy bah denote uniform buy hold 

say portfolio selection algorithm beats market outperforms bah market sequence practice market represented non uniform bah djia 
buy hold strategies rely tendency successful markets grow 
modern portfolio theory focuses choose buy hold strategy 
seminal ideas markowitz yield algorithmic procedure choosing weights portfolio minimize variance feasible expected return 
variance minimization possible placing appropriate larger weights subsets anti correlated stocks idea shall utilize 
denote optimal hindsight buy hold strategy invest best stock bah alternative approach static buy hold dynamically change portfolio trading period 
approach called active trading 
example active trading constant rebalancing fix portfolio re invest dollars day denote constant rebalancing strategy cbal denote optimal hindsight cbal 
constant rebalancing strategy take advantage market fluctuations achieve return significantly greater bah cbal best stock bah real market sequences constant rebalancing strategy take advantage market fluctuations significantly outperform best stock see table 
consider cover classic contrived example market consisting cash stock market sequence price relatives 
consider 
odd day daily return day 
total return days illustrating constant rebalancing strategy yield exponential returns growth market 
assumption daily market vectors observations identically independently distributed random variables shown cbal performs sense expected total return best online portfolio selection algorithm 
studies see argue stock price sequences long term memory non traditional objective computational finance develop online trading strategies sense guaranteed perform 
line research pioneered cover attempts design portfolio selection algorithms provably terms total return respect online offline benchmark algorithms 
natural online benchmark algorithms uniform buy hold bah uniform constant rebalancing strategy cbal 

natural offline benchmark bah challenging offline benchmark cbal cover ordentlich universal portfolios algorithm denoted universal proven universal cbal sense market sequence stocks days guarantees sub exponential polynomial ratio cbal universal theoretical perspective surprising ratio polynomial fixed cbal capable exponential returns 
practical perspective ratio useful motivation underlies potential cbal algorithms useful 
follow motivation develop new algorithm call 
attempting systematically follow constant rebalancing philosophy capable extraordinary performance absence transaction costs small transaction costs 
trying learn winners direct approach expert learning portfolio selection reward weighted average prediction algorithm adaptively computes weighted average experts gradually increasing multiplicative additive update rule relative weights successful experts 
example context ps problem consider exponentiated gradient algorithm proposed helmbold 
algorithm computes portfolio bt bt exp xt bt xt bt exp xt bt xt learning rate parameter 
designed greedily choose best portfolio yesterday market xt time paying penalty mov ing far yesterday portfolio 
universal bound helmbold set xmin log xmin lower bound price relative 
easy see increases decreases think small order achieve universality 
algorithm degenerates uniform cbal universal algorithm 
case day price relatives stocks identical ps algorithms converge uniform cbal 
combining small learning rate reasonably balanced market expect performance similar uniform cbal confirmed experiments see table 
cover universal algorithms adaptively learn day portfolio increasing weights successful 
update rule universal algorithms bt prior distribution portfolios 
weight possible portfolio proportional total return far times prior 
particular universal algorithm consider experiments uses dirichlet prior parameters 

constant factor algorithm attains optimal ratio respect cbal algorithm equivalent particular static distribution helmbold show eliminate need know xmin universal performance ratio sub exponential polynomial helmbold fix experiments 
experimentally datasets negligible difference uniform universal algorithm dirichlet universal algorithm 
class 
equivalence helps universality result shows algorithm outperform cbal different type winner learning algorithm obtained sequence prediction strategy 
stock soft sequence prediction algorithm provides probability symbol 

view prediction stock best price relative day set bt pj 
consider predictions prediction component known lempel ziv lz lossless compression algorithm 
prediction component nicely described langdon feder 
prediction algorithm lz provably powerful various senses 
shown asymptotically optimal respect stationary ergodic finite order markov source rissanen 
feder shows lz universal worst case sense respect offline benchmark class finite state prediction machines 
summarize common approach devising ps algorithms attempt learn winners winner learning schemes 
algorithm propose different approach motivated cbal philosophy 
interpret success uniform cbal cover example sec 

clearly uniform cbal advantage price fluctuation constantly transferring wealth high performing stock anti correlated low performing stock 
contrived market able take advantage stock currently outperforming stocks especially strong performance anti correlated performance stocks 
algorithm considers short market history consisting consecutive windows trading days model statistical relations pair stocks 
lx log xt 
log xt lx log xt 
log xt log xk denotes log xk 
log xk 
lx lx vector sequences equivalently matrices constructed logarithm market subsequences corresponding time windows respectively 
denote jth column 

vectors averages columns 
similarly vector standard deviations columns 
cross correlation matrix normalization column vectors lx lx defined lx lx 
measures correlation log relative prices stock window stock second window 
pair stocks compute extent want shift investment stock stock claim iff case 
interpretation success cbal predict stocks correlated consecutive windows current window window evidence windows predicts stock anti correlated consecutive windows 
bt bt bt bt resulting portfolio just market closing day 
total return log scale best stock nyse vs window size bah best stock market window size total return best stock sp vs window size bah best stock market return window size total return investment vs window size nyse left sp right 
algorithm critical parameter window size depict total return historical datasets function window size 

expect performance depends significantly window size 
beats uniform market beats best stock window sizes 
course online trading choose hindsight 
viewing algorithms experts try learn best expert 
windows individual stocks induce volatile set experts standard expert combination algorithms tend fail 
alternatively adaptively learn invest weighted average algorithms maximum simplest case uniform investment windows uniform buy hold investment algorithms denoted 
left graphs total return function values respect nyse dataset see details 
similar graphs datasets consider appear qualitatively choice clearly optimal 
beats best stock experiments 
total return log scale nyse total return vs max window bah best stock bah best stock market maximal window size total return stocks days djia dec jan days days left total return investment function maximal window right cumulative returns month djia dataset stocks left panel algorithms trading stocks denoted middle panel algorithms trading algorithms right panel 
consider various algorithms stocks prices determined cumulative returns algorithms back original portfolio selection problem algorithm performs stocks may perform algorithms 
consider active investment various algorithms 
consider windows course continue compound algorithm number times 
compound twice buy hold investment 
resulting algorithm denoted 
impact compounding depicted right smooth anti correlations exhibited stocks 
evident compounding twice returns completely correlated diminishing possibility additional compounding substantially help 
idea eliminating critical parameters may applicable learning applications 
challenge understand conditions applications process compounding algorithms smoothing effect 
experimental results experimental study algorithm online learning algorithms described sec 

focus bah abbreviated anti bah abbreviated anti historical datasets 
nyse dataset :10.1.1.44.5760
dataset contains daily prices stocks new york stock exchange nyse year period july rd dec st 
second tse dataset consists stocks toronto stock exchange tse year period jan th dec st 
third dataset consists stocks sp apr largest market capitalization 
set spans trading days period jan nd jan st 
fourth dataset consists stocks composing dow jones industrial average djia year period days jan th jan th 
datasets quite different nature market returns datasets appear row table 
stock nyse increased value stocks tse lost money stocks sp lost money stocks negative market djia lost money 
sets include highly liquid stocks huge market 
order maximize utility datasets different markets ran market reverse 
simply done reversing order inverting relative prices 
reverse datasets denoted superscript 
reverse markets particularly challenging 
example nyse stocks going 
note forward reverse markets bah tse increasing tse challenging market stocks declining 
table reports total returns various algorithms datasets 
see prediction algorithms lz quite aggressive anti anti excellent fantastic returns 
note active strategies beat best stock cbal markets exception tse significantly outperform market 
reader may appears returns anti anti especially applied nyse dataset 
recall nyse dataset consists trading days total nyse return approximately anti respectively anti average daily increase smoothing effect allows simple prediction algorithms expert advice algorithms better predict window size 
explored direction 
datasets including sources individual stock compositions downloaded www cs technion ac il portfolios 
respectively 
transaction cost significant challenge active trading strategies see sec 

observe universal substantial advantage cbal 
previous expositions algorithms highlighted particular combinations stocks returns significantly outperformed universal best stock 
said cbal 
algorithm nyse tse sp djia nyse tse sp djia market bah best stock cbal cbal anti anti lz universal table monetary returns dollars investment various algorithms different datasets reversed versions 
winner runner market appear boldface 
figures truncated 
concluding remarks handling portfolio stocks algorithm may perform transactions day 
major concern commissions incur 
proportional commission model see sec :10.1.1.44.5760
exists fraction investor pays rate buy sell 
return sequence 
bn portfolios respect market sequence 
xn bt xt bt bt bt bt xt bt xt 
bt xt 
investment algorithm simplest form tolerate small proportional commission rates beat best stock 
note blum kalai showed performance guarantee universal holds gracefully degrades case proportional commissions :10.1.1.44.5760
current online brokers charge small share commission rate 
related problem face trading difference bid ask prices 
bid ask spreads availability stocks buying selling typically functions stock liquidity typically smaller large market capitalization stocks 
consider large market cap stocks 
final caveat note assume portfolio selection algorithm impact market 
just goose laying golden eggs widespread soon lead goose market quickly react 
report abnormal returns historical markets suspected data snooping 
particular dataset excessively mined testing strategies substantial chance strategies successful simple overfitting 
data snooping hazard stock selection 
example stocks selected nyse dataset known survived years 
algorithms fully developed nyse tse datasets 
djia sp sets obtained public domain sources algorithms fixed 
algorithm parameter maximal window size 
experiments indicate algorithm performance robust respect see 
example typically beat best stock 
results full 
number respected works report statistically robust abnormal returns simple technical analysis heuristics slightly beat market 
example landmark study brock apply simple trading heuristics djia index provide strong support technical analysis heuristics 
consistently beating market considered great impossible challenge approach portfolio selection indicates beating best stock achievable goal 
missing point time analytical model better explains active trading strategies successful 
regard investigating various statistical adversary models lines suggested 
show algorithm performs relative benchmark market sequence satisfies certain constraints empirical statistics 
lugosi 
lectures prediction individual sequences 
url www econ upf es lugosi ps 
cover ordentlich 
universal portfolios side information 
ieee transactions information theory 
cover 
universal portfolios 
mathematical finance 
markowitz 
portfolio selection efficient diversification investments 
john wiley sons 
cover 
empirical bayes stock market portfolios 
advances applied mathematics 
cover thomas 
elements information theory 
john wiley sons 
lo mackinlay 
non random walk wall street 
princeton university press 
helmbold schapire singer warmuth 
portfolio selection multiplicative updates 
mathematical finance 
ziv lempel 
compression individual sequences variable rate coding 
ieee transactions information theory 
langdon 
note lempel ziv model compressing individual sequences 
ieee transactions information theory 
feder 
gambling finite state machine 
ieee transactions information theory 
rissanen 
universal data compression system 
ieee transactions information theory 
cesa bianchi freund haussler helmbold schapire warmuth 
expert advice 
journal acm may 
blum kalai :10.1.1.44.5760
universal portfolios transaction costs 
machine learning 
borodin el yaniv 
online computation competitive analysis 
cambridge university press 
brock lakonishok lebaron 
simple technical trading rules stochastic properties stock returns 
journal finance 
raghavan 
statistical adversary line algorithms 
dimacs series discrete mathematics theoretical computer science 
chou el yaniv leighton 
statistical adversary allows optimal money making trading strategies 
proceedings th annual acm siam symposium discrete algorithms 
