dynamics hot potato routing ip networks teixeira shaikh tim griffin jennifer rexford uc san diego labs research intel research labs research la jolla ca florham park nj cambridge uk florham park nj teixeira cs ucsd edu research att com tim griffin intel com research att com despite architectural separation intradomain interdomain routing internet intradomain protocols influence path selection process border gateway protocol bgp 
choosing multiple equally bgp routes router selects closest egress point intradomain path cost 
hot potato routing intradomain event trigger bgp routing changes 
characterize influence hot potato routing conduct controlled experiments commercial router 
propose technique associating bgp routing changes events visible intradomain protocol apply algorithm backbone network 
show hot potato routing significant source bgp updates ii bgp updates lag seconds intradomain event iii number bgp path changes triggered hot potato routing nearly uniform distribution destination prefixes iv fraction bgp messages triggered intradomain changes varies significantly time router locations 
show hot potato routing changes lead longer delays forwarding plane convergence shifts flow traffic neighboring domains extra externally visible bgp update messages inaccuracies internet performance measurements 
categories subject descriptors network protocols routing protocols computer communication networks internetworking general terms algorithms management performance measurement keywords hot potato routing bgp ospf convergence 
internet performance depends stability efficiency underlying routing protocols 
large portion permission digital hard copies part personal classroom granted fee provided copies distributed profit commercial advantage copies bear notice full citation page 
copy republish post servers redistribute lists requires prior specific permission fee 
sigmetrics performance june new york ny usa 
copyright acm 
neighbor egress points destination path cost change hot potato routing change egress internet traffic traverses multiple autonomous systems ases making performance dependent routing behavior multiple domains 
large ases core internet routers forward packets information intradomain interdomain routing protocols 
networks border gateway protocol bgp exchange route advertisements neighboring domains propagate reachability information 
routers inside interior gateway protocol igp learn reach 
large ip networks common ospf compute shortest paths configurable link weights 
router combines bgp igp information construct forwarding table maps destination prefixes outgoing links 
tiered routing architecture isolate global internet routing changes individual 
practice interaction intradomain interdomain routing complicated 
example shows external bgp ebgp sessions neighboring advertises routes destination prefix 
routers propagate ebgp learned routes internal bgp ibgp sessions router leaves dilemma choosing bgp routes look equally number hops 
common practice hot potato routing directs traffic closest egress point router smallest intradomain path cost router 
tends limit bandwidth resources consumed traffic moving packets hop nearest opportunity 
suppose igp cost changes response link failure original path intentional change link weight traffic engineering planned maintenance 
bgp route available igp cost change cause select route egress point refer hot potato routing change 
hot potato routing changes significant performance impact transient packet delay loss routers recompute forwarding tables ii shifts traffic may cause congestion new paths network iii bgp routing changes visible neighboring domains 
frequency importance effects depend variety factors 
tier isp network connects neighboring domains geographic locations 
practice isp typically learns equally bgp routes peering point neighboring increases likelihood routing decisions depend igp cost egress points 
addition routers bgp routes prefixes single igp cost change may cause routes change time 
prefixes receive large volume traffic influence flow traffic downstream neighbors quite significant 
quantify effects analyzing igp triggered bgp updates backbone network 
surface able study hot potato routing changes analytical simulation model protocol specifications 
interaction protocols depends details captured ietf standards documents discussed detail section 
vendor implementation decisions significant impact timing messages protocol 
design network number location bgp sessions may play important role 
addition behavior routing protocols depends kinds low level events failures traffic engineering planned maintenance trigger igp path changes properties events understood 
light issues study takes empirical approach controlled black box experiments router level coupled joint analysis igp bgp measurements collected large isp network 
previous studies characterized igp link state advertisements bgp update messages isolation believe joint analysis igp bgp data 
evaluates bgp routing changes affect flow traffic inside isp backbone differentiate routing changes caused internal external events 
main contributions evaluating hot potato changes router level de scribe evaluate hot potato routing changes single router 
perform experiments cisco router illustrate timing protocol messages controlled environment 
identifying hot potato bgp routing changes algorithm correlating igp bgp data generates sequence path cost changes may affect bgp routing decisions ii classifies bgp routing changes terms possible igp causes iii matches bgp routing changes related path cost changes occur close time 
evaluation operational network apply algo rithm routing data collected large isp network identify suitable values parameters algorithm 
study demonstrates hot potato routing significant source bgp update messages cause relatively large delays forwarding plane convergence 
exploring performance implications discuss hot potato routing changes lead packet loss due forwarding loops ii significant shifts routes corresponding traffic iii inaccuracies measurements routing system 
describe certain operational practices prevent unnecessary hot potato routing changes 
contributions sections followed summary results section 
ignore egress point unreachable 
highest local preference 
lowest path length 
lowest origin type 
lowest med hop 
ebgp learned ibgp learned 
lowest igp path cost egress point hot potato 
vendor dependent tie break table steps bgp decision process 
modeling hot potato routing section precise definition hot potato routing change explain identifying routing changes operational network surprisingly difficult 
hot potato bgp routing changes bgp decision process router selects single best route destination prefix comparing attribute values shown table 
steps depend igp information 
route excluded bgp hop address reachable 
example router consider bgp route forwarding table entry matches ip address 
steps decision process router compares igp path costs associated bgp hop addresses selects route smallest cost closest egress point 
multiple routes igp path cost router applies additional steps break tie 
bgp decision process comes igp path cost refer bgp decision hot potato routing 
change igp path cost leads router select different best bgp route refer hot potato routing change 
guide characterization hot potato routing propose simple model captures path selection process single router denote vantage point cost vector vantage point vantage point cost vector represents cost shortest igp path router 
cost vector concise representation aspects igp affect bgp routing decisions 
egress set prefix network set routers ebgp learned routes best step bgp decision process 
routes propagated routers ibgp 
prefix vantage point selects egress point egress set smallest path cost cost vector 
hot potato routing change occurs vantage point selects different egress point change path cost vector new egress point closer old 
example initially router egress set path costs best egress point path cost changes selects egress point goal determine fraction bgp routing changes hot potato routing changes operational network 
characterizing hot potato routing surface measuring hot potato routing changes relatively simple collect bgp igp measurements operational router determine bgp messages triggered igp routing changes 
factors conspire problem extremely challenging incomplete measurement data large operational network router changes best route path cost change fully instrumenting routers possible data limited number vantage points 
addition commercial routers offer limited opportunities collecting detailed routing data collect measurements routing protocol messages routers exchange 
igp measurements difficult collect require physical connection router located secure facility 
fortunately link state protocols ospf routers flood link state advertisements lsas network allowing data collected location reconstruct path cost changes seen routers network 
reconstruction perfect delays propagating lsa point link failure weight change routers network 
collecting bgp data multiple routers easier bgp sessions run tcp connections require physical adjacency 
bgp messages operational router traverse network reach collection machine introduces latency delays may increase precisely igp routes changing 
addition bgp path vector protocol router sends best route bgp neighbors making difficult know complete set routing choices available time 
complex routing protocol dynamics igp routing changes stem topology changes equipment going configuration changes adjustments link weights 
monitoring igp messages shows effects events 
practice multiple lsas may occur close time failure single router optical amplifier cause ip links fail 
lsa follows close routing system time converge lsa occurs 
similarly prefix may experience multiple bgp routing changes short period time neighboring may send multiple updates part exploring alternate paths 
similarly hot potato routing change trigger multiple ibgp routing changes network converges 
addition global routing system generates constant churn bgp updates due failures policy changes persistent oscillations 
continuously receiving updates second uncommon 
difficult identify bgp routing changes caused hot potato routing inside 
multiple exit discriminator med attribute introduces additional complexity bgp decision process compares med values routes learned hop resulting scenarios router local ranking routes may depend presence absence third route 
hierarchy ibgp sessions inside large networks employ route reflectors reduce overhead distributing bgp information 
route reflectors dynamics network wide routing changes extremely complicated 
example router route lan experiment controller bgp ann pi li bgp ann pi ri ospf lsas bgp generator bgp generator system test sut ospf generator generate ospf changes ospf lsas ospf monitor lan bgp updates bgp monitor observe hot potato effects experimental testbed router level testing tor clients shorter igp paths link fails router shifts routes egress egress client change routes egress cost vector changed 
determining bgp routes caused igp changes requires knowing route reflector configuration network bgp routing changes caused igp 
counting hot potato routing changes inevitable focusing analysis toplevel route reflectors network helps limit effects 
vendor implementation details routing protocols standardized ietf low level details depend implementation decisions configuration choices 
example final tie breaks bgp decision process vary vendor vendor 
vendor implementations numerous timers control router recomputes igp paths bgp decision process sends update messages bgp neighbors 
router operating system may complex techniques scheduling preempting tasks multiple events occur close time 
router level details firstorder impact network wide dynamics hot potato routing 
issues suggest computing exact measure hot potato routing changes extremely difficult seek approximate numbers reasonable heuristics 

controlled experiments section evaluate dynamics hot potato changes router controlled environment set stage study routers isp network 
description testbed methodology characterizing time average behavior router response path cost changes 
results applying methodology cisco gsr router 
router testbed testbed enables perform black box experiments single router system test sut controlled fashion 
ospf generator forms ospf adjacency sut sends lsas emulate synthetic topology trigger hot potato routing changes modifying link weights 
bgp generators send bgp updates sut 
sending bgp messages different hop ip addresses generators emulate pair egress points adjacency sut log receipt lsas 
bgp monitor ibgp session sut observe bgp routing changes 
monitors software routers log protocol messages sent sut 
separate lan segment isolates protocol messages sent ospf bgp generators allows ospf adjacencies exist 
prefix 
ospf monitor forms ospf ibgp sessions prefix sut ln rn prefix synthetic network lab experiments experiment controller initializes machines appropriate configuration ospf adjacencies ospf link weights ibgp sessions 
controller modifies configuration time trigger hot potato routing changes sut 
practice run ospf monitor bgp monitor ospf generator processes machine 
ensures logging intradomain topology changes lsa flooding bgp routing changes share common time base 
timestamp ospf monitor microsecond resolution bgp monitor logs update messages second level 
experiment methodology experiment designed force sut choose bgp learned routes prefix ospf path cost egress point 
shown synthetic network egress routers left router right router separate pair egress routers prefix allow multiple experiments proceed independently 
bgp generators send ibgp update messages announcing bgp routes differ hop attribute set ip address corresponding egress router 
ospf generator acts router sends lsas convince sut rest topology exists 
links left right routers advertising bgp route prefix synthetic net different ospf link weights sut selects egress point bgp sessions ospf adjacencies established sut receives necessary bgp advertisements ospf lsas construct view network seen 
sut selects route learned prefix path cost smaller path cost establishing adjacencies sending initial routing messages wait seconds initiating routing changes ensure sut reached steady state 
theory test focus single destination prefix triggering repeated hot potato routing changes time 
approach problematic reasons 
ensure effects ospf routing change complete triggering routing change 
require respectively control increasing number prefixes egress routers create problem router way ospf generates lsas 
link weight changes adjacent router sends lsa weights links lsa fit single packet size constrained maximum transmission unit mtu 
connecting large number egress routers directly result extremely large lsas fit single packet 
having layers intermediate routers keep fan routers limits imposed byte ethernet mtu 
cumulative number hot potato changes prefixes prefixes time bgp update time ospf lsa seconds cdf time lag ospf bgp tight coupling ospf generator route monitors long delays successive experiments 
second difficulty conducting truly independently experiments 
example starting experiment completion previous necessarily uncover time average behavior system 
fact approach repeatedly observe system particular mode operation particular part timer intervals 
test proceeds prefix time 
weight link increased multiple prefixes obviates need estimate upper bound time experiment complete starting experiment 
allow possibility experi ment prefix completed experiment pre fix begins 
multiple prefixes allows evaluate scenarios multiple ospf weight changes affecting different prefixes occur close time 
observe time average behavior system impose interarrival time chosen exponential distribution prefix 
addition test link weights change conduct test link weights decrease back ospf bgp monitors log lsas bgp updates sent sut 
prefix egress routers matching ospf lsa related bgp update message trivial controlled environment 
results tests evaluate cisco gsr running ios sut 
gsr mhz grp cpu mb ram 
router tunable configuration options including ospf bgp timers change values tunable parameters focus default configuration router 
time lsa sent ospf generator lsa received ospf monitor msec 
shows cumulative distribution time ospf lsa bgp update message 
curve marked prefixes shows results prefixes mean interarrival time seconds successive ospf weight changes prefixes 
run test results experiments weight increase decrease prefixes require hours complete curve rep resents results total runs 
curve perfectly linear range seconds due influence timers 
router imposes second delay receiving lsa performing shortest path computation avoid multiple computations lsas arrive short period time 
second lsa arrives interval incur entire second delay evidenced small fraction lsas experienced seconds delay 
second router second scan timer runs periodically sequence bgp routing table run bgp decision process prefix 
bgp change occur scan process runs revisits bgp routing decision prefix 
delay bgp routing change uni form evidenced straight line graph 
poisson arrival process trigger ospf weight changes allows test explore full range uniform distribution 
router imposes second interval consecutive shortest path calculations explains delays range 
second curve prefixes shows re sults multiple prefixes egress router pair 
specifically egress router pairs associate prefixes pair 
weight change egress pair sut changes hop associated prefixes sends updates 
curve plots results running test prefixes 
prefixes case asso times mean interarrival time seconds 
prefixes curve looks similar prefixes curve maximum axis value curves different seconds seconds respectively 
occurs scan process scheduled previous scan completed 
interarrival time scan process dependent time takes run scan process gsr 
determining bgp prefixes affected ospf path cost change challenging explains router vendors choose timer driven solution 
practice timers routers configurable making possible select smaller values decrease delay reacting hot potato routing changes expense higher cpu load 
experiments capture delay updating forwarding table new best routes delay may vary router 
general best choice router product timer settings depends variety complex factors scope 
understanding router level timing details extremely valuable studying network level dynamics hot potato routing see sections 

measurement methodology section methodology measuring changes experienced operational routers 
presents steps correlate bgp updates vantage point ospf lsas 
dotted box represents steps described particular subsection 
section presents measurement infrastructure collect bgp updates ospf lsas 
describe compute path cost vector ospf lsas section 
section explains classification bgp routing changes terms possible causes 
sets stage discussion section associate bgp routing changes related path cost changes occur close time 
measurement infrastructure deployed route monitors running software monitors described section tier backbone network 
depicts measurement infrastructure 
ospf monitor located point presence pop bgp grouping interval bgp table sec 
routing changes routing changes possible causes bgp updates bgp grouping classification matching sec 
lsas spf tagged stream bgp updates sec 
path cost changes igp grouping cost vectors sec 
igp grouping interval time window identifying hot potato routing changes 
dotted boxes labeled number subsection describes peering lsas ospf monitor bgp monitor rich peering peering ibgp updates router pop measurement infrastructure backbone direct physical connection router network monitor timestamps archives lsas 
bgp monitor ibgp sessions running tcp top level route reflectors 
ibgp session allows monitor see changes egress point bgp routes 
bgp monitor dumps snapshot routes times day provide initial view best route prefix vantage point 
ospf bgp monitors run distinct servers timestamp routing messages local clocks minimize timing discrepancies monitors ntp synchronized 
analysis focuses days data collected january july 
details network topology peering connectivity absolute number routing messages proprietary omit router locations normalize numerical results 
study data collected vantage points cisco routers top level route reflectors different pops 
explore effects router location connectivity select vantage points pops different properties 
rich peering router pop connects large number peers including major isps 
peering router pop connects major peers 
peering router pop peering connections 
traffic directed ospf network consist multiple areas area backbone area complete view path costs reach router 
connect monitor router area 
fraction bgp updates path cost changes time messages seconds cdf message interarrivals protocol egress points nearby pops 
pops located eastern part united states relatively close location route monitors 
resets monitoring session affect accuracy results especially igp routing changes correlated ibgp session resets 
bgp monitoring sessions experienced resets month due temporary disruption monitor connection rest network 
results suggest igp events significant contributor ibgp session resets network 
fact default keep alive hold timers bgp sessions seconds respectively transient disruptions igp convergence affect ibgp reachability 
conducting analysis eliminate destination prefixes bgp routing decisions depend conservative exclude prefix bgp update non zero med attribute period data collection represent approximately total number prefixes 
computing cost vector changes ospf link state routing protocol unidirectional link assigned administrative weight flooded network reliable fashion 
algorithm processes lsas arrive continuously track ospf topology compute cost vector changes vantage point 
algorithm disregards lsas reflect change ospf topology process excludes ospf periodic refresh lsas duplicate lsas sent reliable flooding process 
remaining lsas emulate ospf shortestpath computation determine path cost vantage point router boundary network router serve egress point prefixes 
ospf topology changes trigger path cost changes 
example links high ospf weights appear shortest path links maintenance provisioning increase weight failure link affect shortest paths 
links appear part multiple shortest paths links parallel links routers 
lsas may change path costs vantage point 
lsa changes path costs vantage point algorithm produces new cost vector vantage point 
vantage point reach router due failure network partition represent path cost study focuses common case cost changes finite value 
number bgp updates minutes ospf bgp time series bgp updates cost changes practice multiple lsas may occur close time 
lsas stem different events independent failures delays propagating lsas converging new routes impossible analyze lsas separately 
group path cost changes occur small time window single cost vector change 
select interval duration analysis ospf measurements shown path cost changes curve 
generate curve consider interarrival times path cost changes vantage point possible egress routers plot resulting cumulative distribution 
path cost changes occur seconds 
may correspond lsas caused single physical event rebooting router 
curve increases gradually range values 
half path cost changes interarrival time seconds seconds month 
section apply time interval seconds grouping path cost changes additional experiments showed results sensitive small changes size interval 
classifying bgp routing changes global bgp routing system generates continuous stream update messages shown example 
graph plots number bgp updates left axis path cost changes right axis seen rich peering router hour minute bins 
example router bgp routing changes minute 
contrast intervals handful path cost changes changes necessarily cause router switch egress point prefix 
large volume bgp updates stems part exploration multiple alternate routes router switches best path 
short lived bgp routes correspond stable path changes transition stable route 
details path exploration depend timing details routers internet 
study interested igp cost changes cause router inside switch stable route different egress point 
focus changes stable route group bgp updates router prefix occur close time bgp updates curve 
generate curve consider interarrival times bgp updates vantage point prefix plot resulting cumulative distribution 
bgp updates number ospf changes announcement bgp update vantage point withdrawal better egress egress change egress point equally cost change egress egress 
possible hot potato change replace worse egress egress classifying bgp routing changes vantage point interarrival time seconds 
stems second minimum route advertisement timer cisco routers pace update messages ibgp sessions 
previous studies shown interarrival times seconds quite common external routing changes cisco routers second minimum route advertisement timer ebgp sessions 
thirds bgp updates spacing seconds 
section apply time interval seconds grouping bgp messages combine transient updates occurring path exploration 
additional experiments showed results sensitive small changes size grouping interval 
bgp routing changes relationship cost vector changes interior network 
drawing bgp decision process algorithm classifies bgp routing changes terms possible causes 
starting initial bgp routing table consider stream changes best route prefix 
illustrates classify bgp routing change route route prefix particular vantage point 
hot potato routing changes cause router switch bgp route 
changing null route represent hot potato routing change 
hot potato routing changes cause replace case analysis helps narrow possible causes 
egress point change cost vector responsible 
having different egress points necessarily imply hot potato routing responsible 
new route better old earlier stage decision process example shorter path larger local preference 
alternatively route withdrawn monitor sees best route vantage point infer withdrawn worse equally steps bgp decision process dismiss hot potato routing possible cause 
routes equally routing responsible relative closeness egress points changed making egress point closer egress point matching cost changes bgp refine inference igp routing change caused vantage point select inspect stream cost vectors vantage point see closer small time interval 
verified correctness algorithm testbed section 
scenario bgp routes stable changes related path cost changes algorithm correctly identified ospf lsa caused bgp update 
bgp routes stable operational network 
algorithm mistakenly match bgp routing change unrelated cost vector change 
bgp routing change triggered external event policy change failure caused withdrawn replaced attractive route 
seemingly related cost vector change occur nearby time consistent vantage point decision switch route situation algorithm mistakenly associate replacement cost change 
practice igp event caused similar bgp routing change anyway external event happened 
kinds mismatches difficult avoid completely aspects algorithm reduce likelihood false matches preprocessing cost vector changes bgp update messages discussed section ii fine grained classification eliminates external bgp routing changes iii careful selection time window correlating datasets 
find appropriate time window consider cost vector changes occur minutes bgp routing change 
algorithm find occasional matches entire minute interval vast majority hot potato bgp routing changes occurred minutes cost vector change reasons explore detail section 
experiments preprocess ospf bgp data tended see larger number presumably false matches large time intervals suggesting preprocessing helpful reducing likelihood false matches 
algorithm finds matches bgp routing change appears happen seconds cost vector change 
counter intuitive occur practice reasons 
ospf lsa may take longer reach ospf monitor related bgp update reach bgp monitor 
reliable flooding ospf lsas typically implemented software router may subject messages higher delays 
contrast bgp update messages sent tcp connection routers ip packets carrying messages traverse hardware forwarding path routers 
second bgp monitor coarser timestamp resolution ospf monitor 
account issues allow small negative time difference cost vector change bgp change 
believe time window reasonable way avoid false matches capturing bulk real hot potato routing changes 
window analysis rest 

hot potatoes wild section presents case study hot potato routing changes operational network 
goal identify understand main properties hot potato routing changes highlight specific numerical values vary net 
hot potato routing changes occur seconds extra delays minutes arise due ibgp hierarchy transfer update messages 
frequency hot potato routing changes varies significantly time router location 
interestingly hot potato bgp updates spread destination prefixes remaining update messages 
fraction hot potato changes lab peering change peering changes time bgp change time cost vector change seconds cdf time lag cost vector change related bgp routing changes second window group ospf lsas second window group bgp update messages window correlate cost vector changes bgp routing changes 
bgp reaction time cost changes presents cumulative distribution delay cost vector change correlated bgp routing change peering router january july 
graph shows significant gap results lab experiments curve hot potato changes sent peering router 
receiving new lsa router rerun igp shortest path computation ii apply bgp decision process select best route prefix iii send update messages bgp neighbors routes changed 
steps represent time required react cost vector change third step depends number bgp routing changes 
lab experiments section evaluated steps controlled environment 
order fair comparison measure delay cost vector change prefix experiencing hot potato routing change 
graph shows hot potato routing changes occur seconds cost vector change closer seconds upper limit controlled experiments 
ex tra seconds explained rate lsa arrivals number routes operational router 
rate lsas higher likelihood incurring second delay consecutive shortest path calculations explained section increased 
scan process may require seconds operational router large number bgp routes 
second timer restarts completion previous scan bgp reaction time includes time running time scan process 
factors contribute longer reaction times operational router 
discuss reaction times longer seconds subsection 
transfer delay multiple prefixes difference curve hot potato changes change corresponds delay transfer bgp updates multiple prefixes 
cost vector change affects large number prefixes transmission bgp update messages ibgp ebgp neighbors introduces additional delay shown 
graph highlights specific cost vector changes affected largest number prefixes peering peering routers june 
cumulative number hot potato changes peering june peering june time bgp change time cost vector change seconds bgp transfers caused cost vector change cost change router waits decision 
bgp update prefix appears seconds path vector change updates appear 
example peering curve single cost vector change affected bgp routes prefixes 
bgp change prefix occurs seconds cost vector change routing change prefix occurred seconds seconds ospf change 
shape curve mainly determined volume data tcp transmission rate vantage point bgp monitor 
experiments bgp monitor miles peering router update packets travel just hops network 
longer delays possible ibgp sessions pairs routers longer round trip times may contribute longer delays reacting hot potato routing changes 
peering curve gaps seconds long 
gaps caused minimum route advertisement timer limits rate bgp updates session 
smaller steps second long due second granularity bgp monitor timestamp 
transfer delay may responsible instances reaction time exceeds seconds change curve 
kinds delays may caused propagation hot potato bgp routing changes router shown 
example routers route reflectors routers egress points client clients initially select egress point path costs respectively 
unaware route advertises best route cost increases 
lsa flooded network router computes new path costs example compute new path costs respectively 

scan timers elapse rerun bgp decision process 
runs selects egress point path number hot potato changes peering peering rich peering days hot potato changes days locations cost smaller selects egress point 
sends new route egress point selects egress point path cost suppose cost vector change triggers large number bgp updates updates trigger hot potato changes may wait transfer num ber bgp updates experiencing hot potato change 
explains reaction times longer seconds 
instances longer reaction times may due false matches associating bgp routing change cost vector changes 
cost vector changes bgp takes seconds react trigger bgp routing changes av erage smaller reaction times trigger bgp updates average 
combining results change curve transfer delays router reaction cost vector changes may take seconds prefix additional seconds extreme cases remaining prefixes 
combining effects vast majority hot potato changes take place minutes cost vector change shown changes curve 
temporal spatial variability influence hot potato routing varies significantly time 
presents number hot potato updates 
ease presentation graph plots days increasing order number hot potato bgp routing changes show shows days routers experience routing changes 
days number higher 
peering router day unusually large number hot potato routing changes responsible bgp routing changes day 
variability days may stem natural differences time location igp weight changes maintenance activity 
large variation days difficult define representative statistic frequency hot potato routing changes 
comparing curves highlights influence location router likelihood hot potato routing changes 
period study rich peering router days higher number hot potato changes 
plot graph omits values axis curves plotted proportion starting bgp updates non hot potato hot potato prefixes cdf bgp updates destination prefixes affected path cost changes seen bottom curve lying close axis 
likelihood path cost change affects selection bgp best route depends proximity router nearby egress points 
rich peering router prefixes egress point pop 
path cost changes cause router select different egress point prefixes 
suggests natural way reduce number hot potato routing changes rich peering pop 
having rich peering locations infeasible practice due cost geographic constraints 
service provider bound routers remote locations close pops large providers 
hot potato variation prefixes previous studies shown small fraction unstable prefixes responsible bgp route updates bgp routes remaining prefixes stay days weeks time 
plots cumulative distribution bgp update messages destination prefixes peering router june 
compare results previous graph plots number bgp update messages number bgp routing changes 
prefixes sorted contribution number bgp messages 
middle curve corresponds bgp messages 
previous findings 
bottom curve shows distribution bgp updates caused hot potato routing changes spread prefixes 
broader distribution prefixes occurs cost vector changes affect path costs reach egress points wide variety prefixes 
prefixes experience hot potato bgp updates seen flat portion part graph 
corresponds prefixes small number egress points including prefixes single egress point 
router network pick single egress point best egress point prefix 
relatively uniform distribution remaining prefixes may important implications 
prefixes generally stable ebgp learned routes internal path cost changes primary cause bgp routing changes observed inside 
prefixes may responsible large volume traffic limiting frequency hot potato routing changes may useful avoid large traffic shifts transient performance disruptions 
prefixes contribute bgp updates consistent prefixes affected peering peering rich peering cost vector changes fraction prefixes affected cost vector change 
implications hot potatoes hot potato changes bgp routing influence network performance causing shifts flow traffic neighboring domains extra delays convergence forwarding plane 
addition hot potato changes introduce inaccuracy active measurements forwarding plane external monitoring bgp update messages 
certain operational practices network design engineering limit effects 
performance degradation routing traffic shifts hot potato routing cause router change egress points multiple destination prefixes lead significant congestion certain paths internet 
explore destination prefixes affected single router path cost change occurs 
path cost changes affect egress point prefix 
vast majority intradomain events occur far away router affect path costs nearby egress points 
changes occur closer router affect router local ranking closest egress points prefix 
hot potato routing changes occur effects dramatic 
peering router top curve path cost changes affect bgp route kinds routing changes lead sudden increases traffic new egress points downstream paths 
estimate effects computed average traffic volume destination prefix netflow measurements periphery network 
prefixes affected hot potato routing changes account traffic network 
gives preliminary indication hot potato routing changes cause significant shifts traffic detailed study necessary understand relationship hot potato routing changes traffic volumes 
prefixes 
slow forwarding plane convergence compared kinds routing changes hot potato routing changes cause longer delays forwarding plane convergence router recompute igp routes rerun bgp decision process updating forwarding table 
differences routers revisit bgp decisions lead transient forwarding loops illustrated 
example routers egress points prefix num link cost change runs scan changes egress external destination loop selects egress hasn changed transient forwarding loop packets destined bers edges represent igp link weights omit full mesh ibgp sessions simplicity 
routers identify router closest egress point causing direct traffic weight link increases routers eventually switch route learned runs bgp decision process updates forwarding table starts forwarding traffic destined continues forward traffic resulting forwarding loop 
interval runs decision process updates forwarding table entry packets destined caught forwarding loop packets repeatedly traverse loop ip time live ttl field expires causing routers discard packet 
forwarding loop causes packet loss hosts communicating increased congestion traffic traversing routers problem persist seconds intradomain routing protocol converged tcp transfer latency ibgp hierarchy cause larger delays forwarding plane convergence loops persist longer 
previous study packet level measurements large isp backbone forwarding loops seconds 
consistent typical delays igp convergence 
study links loops persisted seconds 
results speculate forwarding loops explained hot potato routing changes 
link 
depending alignment bgp scan timers measurement inaccuracies active probes forwarding plane effects slow forwarding plane convergence may difficult capture traditional active measurement techniques 
service providers third party measurement companies deploy probe machines various parts network order exercise paths pairs hosts 
referring suppose provider connected probe machine router router probe packets sent traverse path igp weight link changes probes experience temporary loss igp 
forwarding path probe packets affected second scan timer change egress point reach destination address probe packets continue egress point note extra convergence delay hot potato routing changes affect stability forwarding path ibgp sessions 
ip packets sent ibgp sessions travel routers backbone forwarding traffic routers depends igp 
delivery bgp updates route monitor affected network single egress point reach monitor 
reach destination probe machine 
true gen eral probe machines connect single location inside 
measurements kinds probe machines capture transient effects igp convergence combined igp bgp convergence process 
accurately capturing performance impact hot potato routing changes require complex active measurement infrastructure probe machines reachable multiple egress points 
external analysis bgp updates hot potato routing change necessarily cause advertise new bgp routes neighboring ases 
export policy ebgp session filter route 
decision depends commercial relationship neighbor route learned peer exported route aggregation performed 
second router decline forward new route differ significantly old route 
example routers typically perform non transitive attribute filtering avoid propagating routes differ local attributes bgp hop local preference global ones path 
third router propagate route due bgp timers minimum route advertisement timer pace rate updates neighboring ases 
router changes best bgp route prefix multiple times interval intermediate bgp routes visible neighbor 
rough estimate externally visible updates look bgp routing changes affect path attribute propagated neighboring domains subject export policy bgp timers 
referring back example switches egress points change path classify routing change externally visible 
router connected different hop path destination path change router propagate new route ebgp neighbors 
looking month june estimate routing changes seen peering router sent neighbors account bgp routing changes 
peering router numbers respectively smaller peering router 
average numbers relatively small values vary substantially day day day hot potato updates routers changes path 
externally visible bgp updates may affect results research studies public bgp routing data collected ebgp sessions routers large ases internet 
depending router isp network connects public servers contribution hot potato routing changes data may vary significantly 
example routing change affects large number prefixes network may indistinguishable bgp session reset nearby location viewed outside 
recommended operational practices avoiding hot potato routing changes helps prevent shifts traffic extra delays forwarding plane convergence bgp updates 
improve performance internet traffic flowing 
selection igp path costs egress points comparing results rich peering peering routers shows design network affects router closer router shortest paths preventing hot potato routing changes change weight picks egress maintenance hot potato routing changes 
suggests main ways reduce likelihood kinds routing changes 
router single nearest egress point reaching destination prefixes 
shown router small igp path cost reach egress point larger igp path cost reach reduces likelihood small variations igp path costs trigger hot potato routing change dramatic internal network event cause choose egress point egress point second router shortest igp paths nearby egress point 
shown router shortest paths igp path cost egress point decreases likelihood single internal event change igp path cost reach tend avoid changes bgp routes 
having multiple shortest paths pairs routers useful reduce latency forwarding plane convergence igp routing changes bgp level change occurs 
traffic engineering planned maintenance operators tune igp link weights adapt flow traffic network response network congestion planned maintenance 
example suppose operators need upgrade operating system router 
disabling router operators may adjust igp weights links network prevent congestion maintenance period 
operators take effects hot potato routing account making changes igp configuration example router selects egress point igp path cost egress cost left link needs disabled upgrading path cost increase making closer egress point 
hot potato routing change avoided changing weight middle link maintenance activity ensures path cost smaller cost despite benefits completely avoiding hot potato rout route emulation tool model effects igp changes flow traffic 
avoiding hot potato routing changes obviates need collect detailed prefix traffic statistics input tool absence egress point changes simple router router traffic matrix suffice 
ing changes may impossible conflict engineering goals 
operators try avoid violating guidelines designing network topology selecting igp weights 

interplay intradomain interdomain routing important implications stability efficiency internet routing turn performance 
methodology joint analysis ospf bgp measurement data characterization interplay protocols operational network 
results suggest hot potato routing may play important role bgp routing changes bgp updates lag seconds 
related igp events 
lead surprisingly long delays forwarding plane convergence greatly exceed typical delays igp convergence 
show number hot potato routing changes varies significantly time router location suggesting need analysis modeling protocols interact 
ongoing focuses performance implications better understand significance hot potato routing changes plan perform detailed analysis shifts traffic forwarding loops externally visible bgp updates 
conducting additional lab experiments evaluate trade fast convergence router cpu load 
exploring protocol extensions operational practices decrease sensitivity bgp decisions igp changes 
extensions matching algorithm studying refinements heuristic identifying hot potato changes 
heuristic check bgp update caused cost vector change occurs seconds remaining updates take longer appear 
heuristic check hot potato changes prefixes set egress points 
conservative algorithm developing conservative algorithm identifying hot potato routing changes 
main idea collect ibgp routing data larger number vantage points track evolution part egress set time 
router switches egress point check new route existed old route continues exist 
provides conservative way identify hot potato routing changes requiring separate feed igp data 
detailed hot potato model working detailed model hot potato routing changes captures ibgp hierarchy affects routing choices available router 
plan formalize insights measurement results influence router location peering connectivity network topology likelihood hot potato routing changes influence routing protocol timers convergence delay 
acknowledgments jay nick feamster rich morley mao dan pei jia wang anonymous reviewers comments 
alex gerber help netflow data olaf help debugging lab testbed matt suggesting multiple prefixes lab experiments 

border gateway protocol bgp internet draft draft ietf idr bgp txt progress november 
moy ospf version rfc april 
osi routing tcp ip dual environments rfc december 
watson labovitz jahanian experiences monitoring ospf regional service provider network proc 
international conference distributed computing systems pp 
may 
shaikh greenberg gottlieb case study ospf behavior large enterprise network proc 
internet measurement workshop november 
iannaccone 
chuah bhattacharyya diot analysis link failures ip backbone proc 
internet measurement workshop november 
labovitz ahuja jahanian experimental study internet stability wide area network failures proc 
fault tolerant computing symposium june 
rexford wang xiao zhang bgp routing stability popular destinations proc 
internet measurement workshop november 
agarwal 
chuah bhattacharyya diot impact bgp dynamics intra domain traffic proc 
acm sigmetrics june 
labovitz malan jahanian internet routing instability ieee acm trans 
networking vol 
pp 
october 
griffin wilfong analysis med oscillation problem bgp proc 
international conference network protocols 
internet routing architectures 
cisco press second ed 
shaikh greenberg ospf monitoring architecture design deployment experience proc 
symposium networked systems design implementation march 
wolff poisson arrivals see time averages operations research vol 
pp 

configure router calculation timers www cisco com cc td doc product software ios np html 
understanding bgp processes cisco 
www cisco com warp public bgp html topic 
labovitz ahuja bose jahanian delayed internet routing convergence ieee acm trans 
networking vol 
pp 
june 
moon diot detection analysis routing loops packet traces proc 
internet measurement workshop november 
alaettinoglu jacobson yu milli second igp convergence expired internet draft draft alaettinoglu isis convergence txt november 
route views www org 
ripe ncc ris www ripe net pub services np ris index html 
sridharan moon diot correlation route dynamics routing loops proc 
internet measurement conference october 
rexford thorup traffic engineering traditional ip routing protocols ieee communication magazine october 
