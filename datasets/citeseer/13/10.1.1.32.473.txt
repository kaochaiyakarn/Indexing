unified messaging sip rtsp singh henning schulzrinne dept computer science columbia university new york usa cs columbia edu october traditional answering machines voice mail services closed systems tightly coupled single system local pbx local exchange carrier 
simple services forwarding voice mail user outside local system hard provide 
advent internet telephony need provide voice video mail services 
offers opportunity address shortcomings existing voice mail systems 
list general requirements multimedia mail system internet telephony 
propose architecture sip session initiation protocol rtsp real time streaming protocol compare various alternative approaches solving call forwarding reclaiming retrieval messages 
briefly describe prototype implementation 
current voice mail systems closed 
hard perform simple operations forwarding voice mail outside local pbx filtering sorting messages 
configuration tedious readily switch set outgoing messages 
voice mail call answering services implemented stand proprietary systems 
service provided pbx local phone local handset obtain separate voice mail number 
supported earlier version appeared ip telecom services workshop sept atlanta georgia 
hand internet protocols electronic mail internet messaging sip session initiation protocol internet telephony open architecture 
configuration simple protocols extensible 
separation internet service provider messaging telephony service provider 
internet telephony replace old telephone systems near particularly corporate institutional environments 
important design voice mail system internet telephony 
built modular internet voice video mail system existing internet protocols particular sip rtsp real time streaming protocol allows users message access internet connected device standard media players user agents 
sip setting multimedia calls internet 
rtsp controls delivery streaming media provides facilities play back record perform operations multimedia content 
propose sip pstn gateway access voice mail service pstn phone 
rtsp enables recording message pointer url forwarding message forwarding multimedia file 
particularly desirable low bandwidth situations downloading video mail expensive particularly recipient decides doesn want listen message hearing seconds 
multimedia mail accessed rtsp media player apple quicktime 
having sip interface multimedia mail system readily usable internet telephony 
sip proxy redirect server configured forward call voice mail depending caller address time day outline rest remainder organized follows 
section list general requirements internet multimedia mail service 
section describes discusses limitations existing voice messaging systems 
section describe mechanism sip rtsp provide voice multimedia messaging 
section gives insight implementation 
describe section 
requirements section list requirements simple multimedia mail system 
recording playback system able record multimedia message 
user able play back message intended 
system provide security privacy messages 
ease access system provide framework user easily browse messages 
words user able skip complete message part read header message pause delete rewind fast forward message 
possible different configurable mail folders 
system provide web interface accessing messages 
telephony interface system able support dual tone multi frequency navigation message retrieval 
allows messages accessed pstn phones 
possible voice mail system internet telephony environment traditional pstn environment 
notification system able notify user arrival new message 
notification may sent electronic mail instant messaging suitable means 
handle different message priorities example messages important people trigger notification pager remainder just generate regular email 
call reclaiming system support reclaiming call callee callee picks phone caller recording message able talk caller 
unified messaging system handle voice messages attachments emails 
possible forward multimedia mail 
voice messages 
helps integrating existing internet mail infrastructure 
system scaleable able handle thousands users 
allow redundant servers 
protocol compliance system compatible existing internet multimedia protocols designed little modification current infrastructure 
important requirements include support mailing lists fax speech conversion automatic expiration messages 
related fair amount early messaging particular done xerox parc 
profiles defined internet messaging support voice 
particular supports interchange voice messages voice mail systems unified messaging systems email servers desktop client applications 
basic architecture carry voice attachments electronic mail 
address integration internet telephony voice messaging system 
carrying voice bits links forwarding messages desirable 
requires special purpose client applications understand profiles 
various schemes proposed forward call voice mail server sip internet telephony systems 
common gateway interface sip call processing language configure sip server external voice mail service 
campbell sparks suggest sip request uri carry service control information related voice mail 
integration sip internet telephony voice mail service active research topic 
architecture multimedia mail system propose uses voice mail server rtsp media server possibly sip proxy server 
rtsp media server storage server handles recording playback messages 
voice mail server sip interface media server allow connections sip user agent 
components located different domains operated different entities 
sip server handle users typical multimedia server separation allows distributed message storage number rtsp media servers 
sip server acts address look server 
sip user agents register current locations sip server server informs current location caller forwards subsequent call current location 
sip server operate redirect proxy mode 
redirect mode server redirects caller current location registered user 
caller calls new address 
proxy mode server acts intermediate node caller callee 
forwards call request current location registered user response back caller 
multiple locations registered single user instance user sip phones 
sip server proxy mode forwards call request registered locations 
user picks phones server cancels branches phones 
columbia sip server supports modes operation 
fig 
shows example recording voice mail 
sip server handles users particular domain cs columbia edu 
different users register current location sip server server contact user receipt incoming call 
voice mail server registers location behalf users serving 
sip server perspective active locations user actual sip phone voice mail server 
user alice alice home com calls bob bob cs columbia edu sip server proxies call locations 
user picks phone branch voice mail server cancelled normal sip call proceeds alice bob 
voice mail server configured wait time say seconds accepting call 
bob pick phone seconds voice mail server going accept call behalf 
accepting call voice mail server sets media path rtsp server 
sends rtsp setup message rtsp server play back voice prompt alice leaving voice message 
voice prompt outgoing message generated recorded media file configured converting text bob vacation message speech 
voice mail server sends setup message rtsp server record message 
caller finished recording hangs triggering sip bye request 
voice mail server informs rtsp server recording 
media data outgoing recorded message exchanged directly caller alice rtsp media server rtp real time transport protocol 
show callee notified arrival voice messages 
multimedia mail server notify bob new message electronic mail means instant messaging 
sip notify bob user agent new message message method subscribe notify methods 
various ways forward incoming call multimedia mail server approach parallel registration sip proxy described previous example 
having multimedia mail server register sip server behalf user simple need intelligence sip user agent sip server 
race cs columbia edu 
sip server cancels branch 
voicemail server accepts call voicemail server 
rtp rtcp packets exchanged directly vm cs columbia edu sip proxy server voicemail rtsp server server bob sbb cs columbia edu 
alice calls bob server cs columbia edu 
sip server proxies call bob phone rtsp server alice phone 
alice home com 
voicemail multimedia mail server sends welcome message recording voice mail 
setup requests rtsp server playback 
sip server forwards final response invite ok invite invite ok cancel rtsp cs columbia edu forwarding call voice mail condition user bob voice mail server picks call 
pick call approximately instant alice receive final responses 
caller keep call legs 
response indicate multimedia mail system human user 
help caller user agent automatically send sip bye request call legs 
approach distinguish busy callee response callee 
case multimedia mail server wait accepting call 
desirable callee user agent implements call waiting service 
bob sip user agent configured redirect incoming call multimedia mail server response seconds bob call 
different request uri specify purpose calling multimedia mail server 
instance vm cs columbia edu leave message bob retrieve vm cs columbia edu retrieve message number 
advantage approach allow user configuration service 
disadvantage bob won able receive message phone dead 
secondly intelligence user agent possible particularly low cost sip enabled embedded devices 
approach cpl sip cgi 
example cpl script shown fig 

approach allows precise control service 
bob selectively forward call voice mail depending caller address time day cpl best approach providing finer control call processing needs cpl enabled servers 
sip proxy server may hard configured forward call voice mail address callee busy response 
voice mail server voice mail server sip rtsp parts 
side receive internet telephony calls sip side behaves rtsp client perform playback recording control multimedia mail residing remote rtsp server 
rtsp server acts storage server multimedia mails 
separating voice mail server storage server helps building scaleable systems 
sip bob vm cs columbia edu subfield host subdomain cs columbia edu sip bob sbb cs columbia edu cpl script forwarding call voice mail example single voice mail server serve students university departmental rtsp servers load balancing 
voice mail server handle media stream processing speed bottle neck 
pop imap internet message access protocol directly support media streaming 
implement pop imap interface fetch voice message similar text electronic mails 
retrieving voice mail system offers choices retrieving multimedia mail messages rtsp streaming media tool sip user agent email attachment web page 
existing rtsp media players directly play voice messages rtsp server 
instance uri rtsp rtsp cs 
columbia edu bob inbox au retrieve message number rtsp server user bob 
bob sip phone call uri sip bob vm cs columbia edu retrieve message 
call received voice mail server turn contacts rtsp media server retrieves message 
media data message directly sent rtsp server bob sip phone 
approach allows retrieval voice messages pstn phone sip pstn gateway 
alternatively multimedia mail server configured send message attachment bob email address 
preferred approach access voice mail web page web browser 
telephony interface existing widespread pstn voice mail systems serve telephone users internet users 
places new challenge allow configuration retrieval voice mails telephone commands 
sip pstn gateway provide telephony access voice mail server shown fig 

need module rtsp translator translate commands appropriate rtsp messages sent storage server 
gateway converts special rtp packets rtsp translator perform audio analysis 
media stream gateway goes rtsp server translator 
translator receives signaling information call voice mail server 
sip pstn gateway pstn media path control path rtsp server server voicemail sip server rtsp translator pstn access voice mail proposed send sip info messages 
change basic architecture described 
call reclaiming implicit requirement voice mail system allow reclaiming transferred call 
callee arrives picks phone voice mail recorded system provide option users recording continue talking normal call 
trivial voice mail system part user agent 
approach sip call control support call reclaiming 
previous example fig 
call gets transferred voice mail server voice mail server invites intended user bob sbb cs columbia edu existing call 
bob picks phone voice mail recorded joins existing call form party conference caller alice voice mail server 
voice mail server drops conference sending sip bye 
bob pick phone voice mail server cancels call message alice recorded 
clear voice mail server call bob having sip server fork branch back voice mail server 
extend caller preference include description user agent picking phone 
approach third party call control voice mail server third party 
simply sends invite bob alice session description 
bob picks changes alice session description re invite talk directly media wise 
avoid confusion bob voice mail server may prompt alice message recorded 
third approach uses call state notification 
bob subscribes call events voice mail server invite call 
requires study 
desirable user decide recording 
caller may want repeat long message recorded 
voice mail server uses sip request uri identify purpose call 
instance call directly voice mail server leave announcement reminder user mail box server try contact intended recipient 
deletion messages architecture assumes rtsp media server stores multimedia messages 
explicit mechanism delete resource rtsp current form 
option define new method say delete delete resource media file rtsp server 
approach pretend recording file terminate rtsp connection recording 
specific rtsp setup record mode sent server immediately followed rtsp teardown sending record message 
rtsp server interprets command delete file 
recorded file empty 
method explicit requires modifying rtsp 
implemented approaches 
implementation successfully demonstrated internet voice mail system architecture sip rtsp servers respectively 
system serve computer science department columbia university replacing existing pstn voice mail answering machines 
section discuss implementation features 
voice mail server registers sip server behalf user discussed earlier 
allows centralized configuration server serving different types user agents desktop client sip enabled ethernet phone device 
voice mail server sends email notification intended recipient regarding new voice mail arrivals 
template notification mail configurable 
allows user modify email message format taste 
instance user may just put clickable rtsp url email notification prefers rtsp client link voice mail inbox 
user voice mail account voice mail web page 
web interface similar existing web mail services hotmail 
fig 
shows screen dump system 
user directory storing configuration file voicemail messages 
unique uri assigned user example alice voicemail assigned user login id alice 
voice mail server started registers uris sip server 
web interface cgi common gateway interface written tcl tool command language 
basic features folder management password change customizing voice response deleting messages sorting messages different parame example voice mail inbox ters date subject size implemented 
forwarding voice message mime multipurpose internet mail extensions attachment electronic mail supported 
helps integration electronic mail voice mail services 
multimedia mail implementation accessed www cs columbia edu 
described multimedia mail architecture internet telephony sip rtsp shown meets general requirements voice mail service 
architecture applies kind multimedia mail including video sip rtsp designed support multimedia 
protocols simplifies deployment related tools sip user agents rtsp media players available 
various approaches possible utilize voice mail service internet telephony environment 
applicability ranges single user subscribed voice mail service university campus wide service 
separation voice mail server signaling storage servers helps building scaleable systems 
described protocol issues particular reclaiming transferred call sip call control deleting mail rtsp methods 
developed prototype voice mail system continue university wide deployment system 
implementation issues related voice mail access video mail addressed versions system 
easily include fax email messages web mailbox similar imap internet message access protocol web interfaces 
currently investigating integration voice mail answering machine electronic mail mime attachments various media types internet telephony internet services 
acknowledgments kapoor help implementation discussion jonathan implemented sip proxy server sip cgi support 
handley schulzrinne schooler rosenberg sip session initiation protocol request comments internet engineering task force mar 
schulzrinne rosenberg internet telephony architecture protocols ietf perspective computer networks isdn systems vol 
pp 
feb 
schulzrinne rao real time streaming protocol rtsp request comments internet engineering task force apr 
parsons voice profile internet mail version request comments internet engineering task force sept 
parsons voice profile internet mail version internet draft internet engineering task force feb 
progress 
terry swinehart managing stored voice system acm transactions computer systems vol 
pp 
feb 
zellweger terry swinehart overview system applications proc 
nd ieee conference computer workstations santa clara california pp 
mar 
rangan swinehart software architecture integration video services environment ieee journal selected areas communications vol 
pp 
dec 
rosenberg schulzrinne common gateway interface sip internet draft internet engineering task force may 
progress 
schulzrinne cpl language user control internet telephony services internet draft internet engineering task force mar 
progress 
rosenberg schulzrinne programming internet telephony services ieee network vol 
pp 
may june 
campbell sparks control service context sip internet draft internet engineering task force jan 
progress 
schulzrinne casner frederick jacobson rtp transport protocol real time applications request comments internet engineering task force jan 
rosenberg sip extensions instant messaging internet draft internet engineering task force june 
progress 
rosenberg sip extensions presence internet draft internet engineering task force june 
progress 
sip extensions message waiting indication internet draft internet engineering task force july 
progress 
myers rose post office protocol version request comments internet engineering task force may 
crispin internet message access protocol version request comments internet engineering task force dec 
crispin internet message access protocol version rev request comments internet engineering task force dec 
schulzrinne rtp payload digits telephony tones telephony signals request comments internet engineering task force may 
schulzrinne rosenberg sip call control services internet draft internet engineering task force june 
progress 
schulzrinne rosenberg sip caller preferences callee capabilities internet draft internet engineering task force july 
progress 
freed borenstein multipurpose internet mail extensions mime part format internet message bodies request comments internet engineering task force nov 
freed borenstein multipurpose internet mail extensions mime part media types request comments internet engineering task force nov 
moore mime multipurpose internet mail extensions part message header extensions non ascii text request comments internet engineering task force nov 
freed postel multipurpose internet mail extensions mime part registration procedures request comments internet engineering task force nov 
freed borenstein multipurpose internet mail extensions mime part conformance criteria examples request comments internet engineering task force nov 

