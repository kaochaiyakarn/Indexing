multi frame optical flow estimation subspace constraints show set ow elds sequence frames imaging rigid scene resides lowdimensional linear subspace 
observation develop method simultaneous estimation optical ow multiple frames uses subspace constraints 
multi frame subspace constraints strong constraints replace commonly heuristic constraints spatial temporal smoothness 
subspace constraints geometrically meaningful violated depth discontinuities camera motion changes abruptly 
furthermore show subspace constraints ow elds apply variety imaging models scene models motion models 
approach multi frame ow estimation general 
approach doesnot require prior knowledge underlying world camera model 
linear subspace constraints successfully past recovering information assumed correspondences 
correspondence estimation fundamental problem motion analysis 
frame subspace constraints constrain correspondence estimation process recovery 
presents approach simultaneous estimation optical ow multiple frames 
optical ow correspondence estimation usually applied local image patches 
small regions carry little information known aperture problem optical ow estimates obtained noisy partial 
overcome problem spatial smoothness constraints employed 
smoothness constraints heuristic violated especially depth discontinuities 
review comparison optical ow techniques see 
temporal smoothness constraints introduced 
violated camera motion changes abruptly 
michal irani dept computer science applied math weizmann institute science rehovot israel methods overcome aperture problem applying global model constraints 
allows large analysis windows entire image su er lack information 
techniques assume priori restricted model world camera motion 
example assume planar distant world 
dense parallax fail applied distant planar worlds form singular case algorithms 
reviews hierarchy global motion models 
methods perform restricted model assumptions applicable fail violated 
methods correspondence ow estimation restricted pairs frames frames 
rare exception methods information multiple frames rely temporal smoothness 
resulting estimates noisy smoothed 
contrast exploits geometric consistency multiple frames relies prior knowledge underlying model world dense parallax 
develop approach simultaneously estimating correspondences multiple frames information frames assuming prior model selection 
approach observation set ow elds multiple frames image scene reside low dimensional linear subspace 
true despite fact di erent frames image sequence obtained di erent camera motions 
subspace constraints provide additional constraints needed resolve ambiguity image regions su er aperture problem 
done resorting spatial temporal smoothness 
opposed smoothness constraints subspace constraints geometrically meaningful violated depth discontinuities camera motion changes abruptly 
linear subspace constraints successfully past recovering information known correspondences 
contrast frame linear subspace constraints constrain correspondence estimation process recovering information 
furthermore models planar world vs general world variety models orthographic vs perspective cameras undergoing instantaneous motion give rise subspaces similar low dimensionalities 
employ subspace constraints subspace dimensionality constraints prior knowledge underlying world camera model 
sect 
show set ow elds multiple frames image rigid scene reside low dimensional linear subspace 
shown variety motion models scene models imaging models 
sect 
extend multi frame subspace constraints apply directly image brightness quantities 
incorporated sect 
simultaneous multi point multiframe ow algorithm takes advantage low dimensionality subspace constraints estimation process 
conclude experimental results showing bene ts multi frame constrained estimation 
subspace constraints flow fields denote sequence frames taken moving camera arbitrary motions 
frames size contain pixels 
denote frame sequence frame respect ow elds estimated middle frame sequence 
uij vij denote displacement pixel xi yi frame frame ij 
denote matrices constructed displacements image points frames un un unf vn vn nf row matrices corresponds single frame column corresponds single point 
ranks various world motion camera models show matrices large ranks small 
particular identify ranks uv ces stacked vertically stacked horizontally 
show matrices low ranks di erent conditions 
sections explain low rank constraints order constrain estimated ow 
point need recover quantities camera motion 
analysis section deriving upper bounds ranks matrices 
shown collection points views lie low dimensional variety 
full perspective projection discrete views variety non linear 
cases variety linear ne camera weak perspective orthographic projection 
model valid eld view small depth uctuations scene small relative depth 
ii instantaneous motion model 
camera rotation small forward translation small relative depth 
instantaneous model approximation motion short video segments camera gain large motions short periods time 
cases airborne video approximation long sequences 
instantaneous model relevant short video segments ow analysis 
choosing frame middle frame extends applicability frames 
derived linear subspace rank constraints cases general scene planar scene 
due lack space detail rank derivation case provide nal derived ranks cases 
omitted derivations 
scene point xi yi zi observed pixel xi yi frame tj tx ty tz denote camera translation frame frame ij denote camera rotation frames 
instantaneous motion general scene instantaneous motion assumptions displacement xi yi ij uij vij zi tz xi fj fty tz yi fj fj fj xi yi xi fj fj fj xi yi fj fj focal lengths frames ij respectively 
eq 
straightforward instantaneous motion model case changing focal length 
varying focal length scene uij vij rewritten bilinear product uij mu pi vij mv pi xi yi zi xi zi yi zi point dependent component mu tz mv fty tz frame dependent components depends camera motion focal length frame 
ow vectors points frames expressed bilinear product matrices uv mu mv th column vector pi th row mv vectors mu uv mv respectively 
rank similarly analyze rank uv uij vij mj px py mj fty frame dependent component px py yi xi xi zi xi zi yi tz point dependent components 
leads uv th column px py px py respectively th row ofm mj 
summarize focal length camera motion change sequence uv rank uv rank 
constant focal length scene camera motion changes focal length remains constant sequence assumed known fj ranks matrices lower uv rank uv rank 
ii 
instantaneous motion planar scene scene planar perspective case zi xi yi 
substituting expression eq 
regrouping terms leads simpler bilinear forms rank constraints constant focal length planar scene uv rank rank uv ii varying focal length planar scene uv rank uv 
iii 
ne camera scene showed case ne camera corresponding image points image frames lie dimensional linear subspace additional manipulation reduced 
derivation subspace constraints optical ow similar leading rank constraints uv rank rank uv 
iv 
ne camera planar scene uv rank rank uv 
remarks showed camera motion changes sequence possibly focal length ranks matrices wide variety models small range signi cantly lower actual size matrices 
rank constraints constrain ow estimation 
information recovered process 
furthermore actual rank matrices may lower derived theoretical upper bounds cases camera motion degenerate uniform sequence 
explained sect 
algorithm automatically detects actual underlying ranks directly image brightness quantities prior computing ow 
implies rank constraint applied sequence frames need priori determine underlying model degeneracies 
subspace constraints image brightness straightforward way take advantage subspace constraints rst compute inter frame ow elds existing frame ow estimation technique project collection ow elds appropriate lower dimensional subspace 
problems approach ow vectors treated equally regard reliability ii resulting unconstrained frame ow estimation rst step may contain ow vectors erroneous subspace projection su ce correct 
signi cant number ow vectors severely corrupted may severely damage ow vectors 
toavoid problems propose stage approach applying low dimensionality subspace constraints directly measurable image quantities ow estimation process 
approach implicitly leads con dence weighted subspace projection data accordance amount local image structure pixel 
particular derive di erent brightness subspace constraints multi point multi frame point constraint constancy equation sect 
ii multi point multi frame region constraint lucas kanade formulation sect 

bene ts constraints explained sect 

generalized brightness constancy constraint xi yi pixel frame corresponding pixel frame ij xi uij yi vij 
brightness constancy equation dened single pixel frames states ij xi yi xi uij yi vij 
small uij vij equation linearized uij ixi vij iyi ixi iy spatial derivatives frame pixel xi yi temporal derivative ij xi yi xi yi 
practice uij vij may small especially dealing multiple frames 
increase range applicability larger uij vij linearization applied iterative ne re nement process 
ij ij current estimate uij vij iterative estima tion process 
uij uij ij vij vij ij brightness constancy equation rewritten ij xi ij yi ij xi uij yi vij 
assuming small uij vij equation linearized ij xi ij yi ij xi yi subspace constraints de ned displacements uij vij increments see sect 
substitute expression uij vij leading form brightness constancy equation ij ij xi ij uij ixi vij iyi ij yi vij xi yi eq 
provides single line constraint unknowns uij vij su ce uniquely determining unknown frames 
sequence frames de ned sect 

collection brightness constancy constraints eq 
image points image frames compactly written single matrix form fx fy ft fx fy diagonal matrices spatial andy derivatives frame diagonal fx ix 
ix 

ix fy iy 
iy 

iy ft matrix temporal derivatives image points frames estimated current stage iterative process ft 


nf matrices fx fy ft contain measurable image quantities 
matrices contain unknown displacements 
note corresponding single scene point share spatial derivatives ixi iyi computed frame independent frame 
temporal derivatives vary frame frame iteration 
refer multi point multi frame eq 
generalized brightness constancy equation 
note additional information uv eq 
collection individual frame brightness constancy equations eq 

matrix formulation allows apply rank constraints directly measurable image quantities 
example rank uv implies rank ft apply rank constraint directly data matrix ft prior solving displacements formulation described sect 
form basis direct multi point multi frame algorithm described sect 

generalized lucas kanade constraint lucas kanade extended pixel brightness constancy constraints eq 
region constraint assuming uniform displacement small windows typically 
pixel xi yi solve uij vij minimizing local error measure uij vij neighborhood window wi uij vij wi uij vij kj lucas kanade equation slightly modi ed iterative notation 
di erentiating error uij vij respect uij vij setting derivatives zero yields set linear equations unknown displacement components uij vij pixel uij vij ai bi bi ci ai bi ci gij hij measurable image quantities ai bi ci gij hij ai bi ci computed image independent 
gij hij depend 
eq 
provides equations unknowns uij vij opposed eq 
provides 
uniform displacement assumption local windows 
assumption imposes type local smoothness constraint ects accuracy ow estimation small window propagate errors image regions opposed global smoothness 
vector uij vij unique ai bi solution coe cient matrix sin bi ci corners textured areas 
image regions local information insu cient edges matrix singular 
regions ow vector uij vij uniquely determined lucas kanade algorithm 
gaus ai bi sian noise assumptions matrix eq 
bi ci shown posterior inverse covariance matrix estimated ow vector uij vij 
considering multiple points 
case generalized brightness constancy equation ow vectors uij vij pixel xi yi ini frames ij share coe cient inverse ai bi variance matrix frame lucas bi ci kanade constraints eq 

lucas kanade constraints points frames compactly written single matrix form de ned eq 

diagonal matrices constructed coe cient values ai bi ci respectively 



bn 

cn matrices constructed values gij hij gn gn hn hn hnf refer multi point multi frame eq 
generalized lucas kanade equation 
additional information uv eq 
collection individual frame equations eq 

uv entails rank matrix constructed known measurable image quantities applying rank constraint solving constrain ow estimation process 
interpretation operation explained 
con dence weighted subspace projection note applying rank constraint fact equivalent applying rank constraint directly ow vector matrix rst weighting individual ow vectors uij vij individual inverse covariance ai bi matrices bi ci means reliable ow vectors uence subspace projection process reliable vectors smaller uence 
applying rank constraint ect con dence weighted subspace projection ow vectors prior computing 
constrain ow estimation process sect 

multi frame multi point algorithm uv denote ranks uv respectively 
utilize brightness subspace constraints eqs 
ways noise reduction image measurements measurement matrices ft gh projected lower rank matrices ft rank 
know see sect 
practice actual rank matrices may lower theoretical upper bound 
actual rank automatically detected measurement matrices explained sect 

rank reduction process inhibits noisy measurements measurement matrices 
directly real image sequence nasa coke sequence 
frame frame sequence forward moving camera scene 
flow eld generated frame lucas kanade algorithm 
note errors right hand side depth discontinuity pole front aperture problem 
ow eld corresponding frame generated frame constrained algorithm 
note recovery ow regions 
ow magnitudes pixel 
display provides higher resolution display error 
note clear depth discontinuities multi frame ow image 
ow values coke small camera foe area 
applied gh 
alternatively temporal derivatives typically noisy image measurements misalignment errors subpixel interpolation rank reduction rst applied ft step gives accurate temporal derivatives 
noise reduced temporal derivatives compute gh eq 

gh projected lower rank matrix corresponds applying con dence weighted subspace projection ow vectors prior computing see sect 

noisy measurements inhibited global subspace constraints proceed computing initial estimate ow vec tors solving denotes pseudo inverse matrix 
note diagonal structure matrix vidual pseudo inverse matrices consists indi step ai bi bi ci yields accurate ow pixels local image structure pixels inverse covariance matrix non singular 
pixels accurately estimates component ow direction gradient normal ow pseudo inverse estimation yields solution smallest norm 
addressed 
eliminating aperture problem uv rank constraint determine missing components ow vectors ath pixels uv su cient local image structure 
rank implies decomposition uv ku ku kv kv upper lower halves matrix columns form ai basis uv spans subspace columns columns coe cients linear combination 
decomposition course unique 
pixels correspondences frames reliably computed vectors generate ba sis computed previous step give ai bi accurate ow vectors local inverse covariance matrix conditioned 
bi ci ow vectors generate basis basis computed number unknowns shrink original number fn unknown unconstrained displacements nr unknowns synthetic sequence ground truth quantitative comparison 
frame sequence 
sequence synthetically generated applying set consistent homographies warp single image 
provides ground truth ow 
error maps showing magnitudes errors ground truth ow computed ow eld 
shows errors frame lucas kanade algorithm 
shows errors multi frame constrained algorithm corresponding frame 
brighter values correspond larger errors 
histogram errors ow elds 
flow values image ignored 
multi frame method errors smaller pixel smaller pixel 
frame method ow vectors error pixel 
image regions errors frame method exceeded pixel 
expected correspond areas su er aperture problem 
subspace constrained algorithm accurately recovered ow regions 
unknown components note share coe cients ow vectors known ow component normal ow component uniquely determined decomposition true equivalent decomposition uv 
plugging decomposition eq 
eq 
leads set fn linear equations nr unknowns fx ft fy set equations overconstrained number frames larger lowest actual rank theoretical upper bound 
similarly plugging decomposition eq 
eq 
leads alternative set linear equations twice equations fn equations nr unknowns set equations overconstrained number frames larger 
abovementioned options advantages eq 
numerically stable local con dence weighted averaging small windows lucas kanade algorithm twice equations bene comes price lower spatial resolution ow recovery 
hand eq 
provides half equations allows higher spatial resolution ow recovery small window averaging 
current implementation algorithm eq 

summarize algorithm 
multi point multi frame algorithm 
construct gaussian pyramid image frames 

iteration pyramid level compute matrices 
project lower rank matrix 
compute initial ow estimate 
compute dimensional basis columns linearly solve unknown matrix eq 
generalized brightness constancy generalized lucas kanade 
step recovers missing components normal ow vectors produces accurate ow estimates 
keep iterating re ne step reduces noise measurements steps eliminate aperture problem 
algorithm applied frames steps skipped reduces iterative ne version lucas kanade algorithm 
step preceded projecting matrix ft lower rank matrix ft discussed sect 

step incorporated current implementation omitted algorithm expected reduce noise measurement matrix prior rank reduction 
automatic rank detection step projects matrices lower rank matrices de ned sect 

practice actual rank matrices allowed noise tolerance may lower theoretical upper bound cases degenerate camera motions scene structures 
automatically detect actual rank matrices matrix known upper bound rank actual rank rm rm 
rank reduction subspace projection done applying singular value decomposition check existence rank pm pm number eigenvalues min allows noise tolerance 
rm set min 
singular values rm largest ones set zero matrices produced svd step re composed yielding matrix rank rm frobenius norm 
step uses svd procedure estimate spanning basis results figs 
show comparisons multi frame constrained algorithm iterative coarse ne version frame lucas kanade algorithm 
computed multi frame algorithm see sect 
applying subspace projection steps 
allows isolate ects subspace projection accuracy ow estimation 
comparison done real data data ground truth 
details regarding experiments results see gure captions 
author anandan helpful discussions insightful comments topic 
due szeliski basri useful comments 
anandan 
computational framework algorithm measurement visual motion 
ijcv 
barron fleet beauchemin 
performance optical ow techniques 
cvpr pages champaign june 
bergen anandan hanna hingorani 
hierarchical model motion estimation 
eccv pages may 
bergen burt hingorani peleg 
frame algorithm estimating component image motion 
pami september 
black anandan 
robust dynamic motion estimation time 
cvpr pages 
black anandan 
robust estimation multiple motions parametric piecewise smooth ow elds 
cviu 
hanna 
direct multi resolution estimation egomotion structure motion 
ieee workshop visual motion pp 
princeton 
hanna okamoto combining stereo motion direct estimation scene structure 
iccv pages 
heeger jepson 
subspace methods recovering rigid motion algorithm implementation 
ijcv 
horn schunck 
determining optical ow 
ai august 
irani peleg 
computing occluding transparent motions 
ijcv 
irani 
multi frame correspondence estimation subspace constraints 
tr preparation 
longuet higgins prazdny 
interpretation moving retinal image 
proceedings royal society london 
lucas kanade 
iterative image registration technique application stereo vision 
pages 
nagel 
displacement vectors derived second order intensity variations intensity sequences 
computer vision pattern recognition image processing 
shapiro 
ne analysis image sequences 
cambridge university press cambridge uk 
stein shashua 
model brightness constraints direct estimation structure motion 
cvpr pages june 
tomasi kanade 
shape motion image streams orthography factorization method 
ijcv 
torr 
geometric motion segmentation model selection 
proceedings royal society london 
